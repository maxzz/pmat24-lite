var el=Object.defineProperty;var tl=(e,t,n)=>t in e?el(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N=(e,t,n)=>tl(e,typeof t!="symbol"?t+"":t,n);import{ah as f,ai as sl,b as p,aj as T,j as s,ak as nl,al as ol,am as Cs,an as rl,ao as al,ap as go,aq as il,ar as cl,as as me,at as Ne,au as ll,av as X,aw as fn,ax as y,ay as _t,az as dl,aA as ul,aB as ml,aC as ts,aD as zs,aE as Vs,aF as bo,aG as Gt,aH as fl,aI as hl,aJ as cr,aK as lr,aL as Zt,aM as $,aN as pl,aO as dr,aP as ur,aQ as xl,aR as gl,aS as b,aT as ss,aU as bl,aV as hn,aW as F,aX as pn,aY as Ws,aZ as mr,S as jl,a_ as fr,a$ as Ke,b0 as hr,b1 as pr,b2 as xr,b3 as wl,b4 as vl,b5 as yl,b6 as g,b7 as Al,b8 as Nl,b9 as Sl,ba as Q,bb as Cl,bc as kl,bd as Fl,be as Il,bf as Ml,bg as gr,bh as xn,bi as Tl,bj as Dl,bk as Pl,bl as Rl,bm as Ll,bn as S,bo as br,bp as jr,bq as $l,br as Ol,bs as _l,bt as Bl,bu as El,bv as zl,bw as wr,bx as Vl,by as Wl,bz as vr,bA as Hl,R as Ul}from"./vendor-DOKJtw4O.js";import{u as _,I as yr,H as Ar,T as gn,C as bn,R as Nr,a as Sr,b as Gl,O as jn,P as Zl,c as wn,d as ns,e as ql,D as Cr,f as Kl,g as pe,S as kr,h as Fr,i as vn,j as os,k as rs,l as Ir,m as Mr,n as Tr,L as Dr,o as yn,p as An,q as Nn,r as Pr,s as Rr,t as Xl,v as Ql,w as Jl,A as Yl,x as Lr,y as $r,z as Or,B as _r,E as Br,F as ed,G as Er,J as zr,K as Vr,M as Wr,N as Hr,Q as Ur,U as Gr,V as Zr,W as qr,X as td,Y as sd,Z as nd,_ as od,$ as Kr,a0 as rd,a1 as ad,a2 as Xr,a3 as id,a4 as Sn,a5 as Qr,a6 as Jr,a7 as Yr,a8 as ea,a9 as Cn,aa as ta,ab as sa,ac as kn,ad as na,ae as oa,af as ra,ag as aa,ah as ia,ai as cd,aj as ld,ak as ca,al as dd,am as la,an as da,ao as ua,ap as ud,aq as ma,ar as md,as as fd,at as hd,au as pd,av as rt,aw as xe,ax as Re,ay as fa,az as as,aA as xd,aB as gd,aC as bd,aD as ha,aE as jd}from"./vendor-dom-BQb2BiDW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();(function(){const e=console.info;console.info=function(...t){/Download the React DevTools/.test(t[0])||e.apply(console,t)}})();const Le=f([]);function h(...e){return e.filter(Boolean).join(" ")}function v(...e){return sl(h(...e))}function $e(e,t=100){let n,o,r;function a(...i){r=this,o=i,!n&&(n=setTimeout(()=>{n=null,e.apply(r,o)},t))}return a}function wd(e){return new Promise(t=>setTimeout(t,e))}function vd(e,t){if(!t)return;const n=[...t.querySelectorAll("input")];e?n.forEach(o=>{o.dataset.disState?delete o.dataset.disState:o.removeAttribute("disabled")}):n.forEach(o=>{o.disabled?o.dataset.disState="1":o.setAttribute("disabled","true")})}const Oe={autoComplete:"one-time-code",list:"autocompleteOff",spellCheck:"false"};function pa(e,t,n){return Math.min(Math.max(e,t),n)}const xa=e=>{let t=parseInt(e);return Number.isNaN(t)&&(t=1),t};function ga(e,t){return`${t}${e===1?"":"s"}`}function yd(e){var t;return((t=/(?:\.([^./\\]+))?$/.exec(e))==null?void 0:t[1])||""}function Ad(e,t){const n=yd(e||"").replace(".","").toLowerCase();return t.includes(n)}function Hs(e){const t=(e||"").replace(/^\//,"").split(/[\\\/]/);return t.pop(),t.join("/")}function Nd(e){const t=/\/\//;let n=e.replace(/\\/g,"/");for(;n.match(t);)n=n.replace(t,"/");return n}function Sd(e){return`${location.pathname}/${e}`.replaceAll("//","/")}function ba(e){const t=window.document.documentElement,n=e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"":e==="dark"?"dark":"";t.classList[n?"add":"remove"]("dark")}function Cd({defaults:e,loaded:t}){if(!t)return e;const o=Object.entries(e).map(([r,a])=>[r,t[r]!==void 0?t[r]:a]);return Object.fromEntries(o)}function ja(e,t,n=""){if(!t)return e;const o={...e};for(const r in t){const a=t[r];if(a==null)continue;const i=o[r];if(i==null){o[r]=a;continue}if(Array.isArray(i)||Array.isArray(a)){o[r]=[...wo(i??[]),...wo(a??[])];continue}if(jo(i)&&jo(a)){o[r]=ja(i,a,n?`${n}.${r}`:r);continue}o[r]=a}return o}function jo(e){return Object.prototype.toString.call(e)==="[object Object]"}function wo(e){return Array.isArray(e)?e:[e]}function kd(e,t,n){const o=[...e];return o[t]=[o[n],o[n]=o[t]][0],o}function Fn(e){const t=e instanceof Error?e.message:`${e}`;return t.split(">>>").at(-1)||t}class Fd{constructor(t,n){N(this,"colors",[]);N(this,"items",[]);N(this,"defaultColorName","color: #7c7c7c");N(this,"defaultColorValue","color: #ababab");this.defaultColorName=t||this.defaultColorName,this.defaultColorValue=n||this.defaultColorValue}toFormat(){return this.items.join("")}toStyles(){return this.colors}toFormated(t){return[`${t}${this.items.join("")}`,...this.colors]}add({name:t,value:n,cName:o,cValue:r}){this.items.push(`%c${t}%c${n}`),this.colors.push(o||this.defaultColorName),this.colors.push(r||this.defaultColorValue)}}function I(e,t){const n=f(e);return f(r=>r(n),(r,a,i)=>{const c=typeof i=="function"?i(r(n)):i;a(n,c),t({get:r,set:a,nextValue:c})})}function Id(){const e=p.useState(()=>f(void 0))[0],[t,n]=T(e);return p.useEffect(()=>()=>{t&&_.dismiss(t)},[t]),n}function Md({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-[1.5] stroke-current",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})]})}function Td({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-[1.5] stroke-current",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})]})}function Dd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-[1.5] stroke-current",e),viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M12 8a2.83 2.83 0 0 0 4 4 4 4 0 1 1-4-4"}),s.jsx("path",{d:"M12 2v2"}),s.jsx("path",{d:"M12 20v2"}),s.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),s.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),s.jsx("path",{d:"M2 12h2"}),s.jsx("path",{d:"M20 12h2"}),s.jsx("path",{d:"m6.3 17.7-1.4 1.4"}),s.jsx("path",{d:"m19.1 4.9-1.4 1.4"})]})}function vo({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current",e),strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M15.75 19.5 8.25 12l7.5-7.5"})]})}function Pd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})]})}function Rd({title:e,...t}){return s.jsxs("svg",{viewBox:"0 0 512 512",fill:"currentColor",...t,children:[e&&s.jsx("title",{children:e}),s.jsx("path",{d:"M256 421.6c-18.1 0-33.2-6.8-42.9-10.9-5.4-2.3-11.3 1.8-10.9 7.6l3.5 51c.2 3.1 3.8 4.7 6.3 2.8l14.5-11c1.8-1.4 4.5-.9 5.7 1l20.5 32.1c1.5 2.4 5.1 2.4 6.6 0l20.5-32.1c1.2-1.9 3.9-2.4 5.7-1l14.5 11c2.5 1.9 6.1.3 6.3-2.8l3.5-51c.4-5.8-5.5-10-10.9-7.6-9.8 4.1-24.8 10.9-42.9 10.9z"}),s.jsx("path",{d:"M397.7 293.1l-48-49.1c0-158-93.2-228-93.2-228s-94.1 70-94.1 228l-48 49.1c-1.8 1.8-2.6 4.5-2.2 7.1L130.6 412c.9 5.7 7.1 8.5 11.8 5.4l67.1-45.4s20.7 20 47.1 20c26.4 0 46.1-20 46.1-20l67.1 45.4c4.6 3.1 10.8.3 11.8-5.4l18.5-111.9c.2-2.6-.6-5.2-2.4-7zM256.5 192c-17 0-30.7-14.3-30.7-32s13.8-32 30.7-32c17 0 30.7 14.3 30.7 32s-13.7 32-30.7 32z"})]})}function Ld({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M21.71 20.29L18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.39zM11 18a7 7 0 1 1 7-7a7 7 0 0 1-7 7z"})]})}function wa({className:e,title:t,...n}){return s.jsxs("svg",{className:h("stroke-[1.5] stroke-current fill-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})]})}function va({className:e,title:t,...n}){return s.jsxs("svg",{className:h("stroke-none fill-current",e),viewBox:"0 0 300 300",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M67.54 25.27H1.04V0h86.45l13.3 13.3v86.45H75.52V50.54Q40.94 75.81 29.64 117.7q-11.3 41.89 5.98 81.8 17.29 39.9 55.2 60.51 37.91 20.62 80.47 13.3 42.56-7.31 71.16-39.24 28.59-31.92 31.92-75.14 3.32-43.23-20.62-78.47-23.94-35.25-65.17-48.55l6.65-23.94q33.25 10.64 57.85 33.92 24.61 23.27 36.57 55.2 11.97 31.92 9.31 65.84-2.66 33.91-19.95 63.18-17.29 29.26-45.88 48.54-28.59 19.29-62.51 23.94-33.92 4.65-66.5-5.99t-57.19-33.92q-24.6-23.28-36.57-55.19-11.97-31.92-9.31-65.84T21 74.47q17.29-29.26 46.55-49.21Z"})]})}function $d({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})]})}function Od({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-1.5",e),viewBox:"0 0 24 24",strokeLinejoin:"round",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"m1.44 17.28 6.46-6.46a.42.42 0 0 1 .6 0s4.1 4.4 4.1 4.4"}),s.jsx("path",{d:"m22.56 8.03-5.22 1.75-1.62 4.04a.42.42 0 0 1-.23.24l-2.9 1.16-1.15.46-1.72 5.16"}),s.jsx("path",{d:"m12.23 20.83.96-3.36 3.88-1.56a.29.29 0 0 0 .17-.17l1.66-4.14 3.65-1.38"}),s.jsx("path",{d:"M22.56 4.35v3.68l-5.22 1.75-1.62 4.04a.42.42 0 0 1-.23.24l-2.9 1.16-1.15.46-1.72 5.16H2.67c-.65 0-1.18-.53-1.18-1.18V4.35c0-.65.53-1.18 1.18-1.18h18.71c.65 0 1.18.53 1.18 1.18Z"}),s.jsx("path",{d:"m18.91 11.58 3.65-1.38v9.44c0 .65-.53 1.18-1.18 1.18h-9.15l.96-3.36 3.88-1.56a.29.29 0 0 0 .17-.17l1.66-4.14Z"})]})}function _d({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M12.13 7V5.32m-5.96 7.65H4.5"}),s.jsx("path",{d:"M19.77 12.96c0 2.12-.75 3.93-2.23 5.42-1.48 1.48-3.28 2.22-5.42 2.22s-3.93-.74-5.42-2.22c-1.48-1.48-2.22-3.29-2.22-5.42s.74-3.93 2.22-5.42c1.48-1.48 3.29-2.23 5.42-2.23s3.93.75 5.42 2.23a7.37 7.37 0 0 1 2.23 5.42Z"}),s.jsx("path",{d:"M6.17 12.96H4.49"}),s.jsx("path",{d:"M12.13 7V5.32"}),s.jsx("path",{d:"M19.77 12.96h-1.68"}),s.jsx("path",{d:"M12.13 20.6v-1.67"}),s.jsx("path",{d:"M12.13 8.68v4.28l3.39 3.68"}),s.jsx("path",{d:"M6.41 3.66 2.57 7.5"}),s.jsx("path",{d:"M21.43 7.24 17.59 3.4"})]})}function Bd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.81 11.72h2.46m6.08-2.97-.04 6.47m-10.05.08c-1.48 0-2.48-.81-2.46-2.25v-1.68 1.32-1.68c-.02-1.44.78-2.25 2.46-2.25m4.64 6.55c-1.86 0-2.17-.65-2.14-2.09V8.76m4.03 6.5v-1.4c-.02-1.44.31-2.09 1.45-2.09m-11.2 7.45h13.93a2.25 2.25 0 0 0 2.25-2.25V7.05a2.25 2.25 0 0 0-2.25-2.25H5.03a2.25 2.25 0 0 0-2.25 2.25v9.91a2.25 2.25 0 0 0 2.25 2.25Z"})]})}function Ed({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 9l5 12l1.774-5.226L21 14L9 9zm7.071 7.071l4.243 4.243M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})]})}function zd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Zm1 2.5h1.5m1.5 0H6.5m0 0v7m0 0H5m1.5 0H8"})]})}function Vd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})]})}function Wd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})]})}function Hd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current",e),viewBox:"0 0 16 16",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M10 3h3v1h-1v9l-1 1H4l-1-1V4H2V3h3V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1zM9 2H6v1h3V2zM4 13h7V4H4v9zm2-8H5v7h1V5zm1 0h1v7H7V5zm2 0h1v7H9V5z"})]})}function Ud({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})]})}function In({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})]})}function is({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})]})}function ya({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})]})}function Gd({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 22 5.92",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M7.9 5.89H4.94V3.36H2.96v2.53H0V0h2.96v2.53h1.98V0H7.9v5.89z"}),s.jsx("path",{d:"M12.45 5.89H9.49V0h2.96v5.89z"}),s.jsx("path",{d:"M18.78 5.92h-4.82V0h4.82C20.47 0 22 1.28 22 2.98s-1.54 2.95-3.22 2.95ZM16.73.47v4.85c1.21 0 1.92.21 1.92-2.41S17.83.47 16.73.47Z"})]})}function Zd(){return s.jsxs("symbol",{id:"app-web-chrome",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"4"}),s.jsx("path",{d:"M21.17 8H12"}),s.jsx("path",{d:"M3.95 6.06 8.54 14"}),s.jsx("path",{d:"M10.88 21.94 15.46 14"})]})}function qd({className:e,title:t,children:n,...o}){return s.jsxs("svg",{className:h("fill-none stroke-current",e),...o,children:[t&&s.jsx("title",{children:t}),n,s.jsx("use",{xlinkHref:"#app-web-chrome"})]})}function Kd(){return s.jsx("symbol",{id:"app-win32",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"square",strokeLinejoin:"bevel",d:"M9.57 2.44c-1.34.06-2.65.36-3.88.9l-2.07 7.21a8.55 8.55 0 0 1 4.06-.9c1.43.03 2.82.5 3.97 1.35l2.07-7.21a6.74 6.74 0 0 0-4.15-1.35ZM14.8 4.6l-2.07 7.21c1.8 1.17 3.97 2.25 8.03.45l2.07-7.21c-4.24 1.8-6.31.81-8.12-.45h.09Zm-7.67 6.31c-1.34.06-2.65.36-3.88.9l-2.07 7.21c4.24-1.8 6.22-.72 8.03.45l2.07-7.21a6.74 6.74 0 0 0-4.15-1.35Zm5.23 2.07-2.07 7.21c1.8 1.17 3.88 2.16 8.12.36l1.98-7.12c-4.15 1.8-6.22.81-8.03-.45Z"})})}function Xd({className:e,title:t,children:n,...o}){return s.jsxs("svg",{className:h("fill-none stroke-current",e),...o,children:[t&&s.jsx("title",{children:t}),n,s.jsx("use",{xlinkHref:"#app-win32"})]})}function Qd(){return s.jsxs("symbol",{id:"app-fcat",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),s.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})}function Jd({className:e,title:t,children:n,...o}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),...o,children:[t&&s.jsx("title",{children:t}),n,s.jsx("use",{xlinkHref:"#app-fcat"})]})}function Yd(){return s.jsx("symbol",{id:"app-web-ie",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M22.07 7.45c2.08-4.89-2.23-5.69-4.48-3.69-.09.08-.09.18.15.3 3.85 1.84 5.67 5.1 5.42 9.23-5.13.13-9.8.15-14.66.15-.26 0-.58.06-.49.38.7 3.99 5.86 5.71 8.83 2.97.21-.2.37-.4.69-.36h4.79c.13 0 .15.03.09.14-3.04 7.47-13.34 7.9-17.39 1.64-.41-.63-.26-.33-.41-.63-.2-.4-.25-.58-.51-.23-.81 1.12-1.77 2.63-1.09 4.03.88 1.83 2.66.8 5.22.05-5.48 2.57-7.89 1.43-7.17-3.3A17.98 17.98 0 0 1 9.79 5.87c.01-.03 0-.05-.02-.07-2.51 1.3-4.72 4.03-5.94 5.64-.06.06-.09.09-.17.1 1.03-5.59 6.51-8.89 10.52-8.74 2.44-1.38 7.75-3.56 8.63.54.05.34.3 2.51-.74 4.11Zm-3.9 4.3c.25 0 .37-.16.31-.41-1.22-5.19-9.13-5.25-10.4-.05-.09.3.03.46.34.46h9.75Z"})})}function eu(){return s.jsxs("symbol",{id:"app-web-ie-text",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M2.38 17.52h2.79V6.48H2.38V4.95h8.3v1.53H7.77v11.05h2.91v1.53h-8.3v-1.53Z"}),s.jsx("path",{d:"M12.68 4.95h8.82v1.53h-6.22v4.4h5.36v1.53h-5.36v5.12h6.35v1.53h-8.95V4.95Z"})]})}function tu(){return s.jsxs("symbol",{id:"app-web-ie-dot",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"#f86a6a"}),s.jsx("path",{d:"M21.17 8H12"}),s.jsx("path",{d:"M3.95 6.06 8.54 14"}),s.jsx("path",{d:"M10.88 21.94 15.46 14"})]})}function su({className:e,title:t,children:n,...o}){return s.jsxs("svg",{className:h("fill-none stroke-current",e),...o,children:[t&&s.jsx("title",{children:t}),n,s.jsx("use",{xlinkHref:"#app-web-ie-dot"})]})}function nu(){return s.jsx("symbol",{id:"app-manual-mode",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M22.52 12.93c-.45-1.22-2.45-.96-3.97.02-.61.4-1.13.65-2.59.95-.64 0-.78-.68-.66-1.35l1.47-8.19c.42-2.08-2.14-2.84-2.65-.7l-1.27 7.12c-.64 1.78-.88 0-.88 0l-.35-7.67c0-2.78-2.73-2.95-2.73 0l.32 7.01c.14 2.77-.52 1.21-.52.99L7.4 4.87c-.62-2.63-3.07-1.95-2.63.44l1.19 5.56c.2 1.29-.81.68-.99.37L3.8 8.55c-.97-2.05-3.05-1.23-2.38.8l1.95 4.98c.19.54.33 1.09.42 1.66 0 1.4.91 4.26 1.65 5.01a6.87 6.87 0 0 0 9.73 0c1.8-2.02 2.66-2.87 3.37-4.42 0 0 1.82-1.53 4.08-2.81.2-.12-.11-.86-.11-.86Z"})})}function ou({className:e,title:t,children:n,...o}){return s.jsxs("svg",{className:h("fill-none stroke-current scale-x-[-1] rotate-[25deg]",e),...o,children:[t&&s.jsx("title",{children:t}),n,s.jsx("use",{xlinkHref:"#app-manual-mode"})]})}function ru(){return s.jsxs(s.Fragment,{children:[Zd(),Kd(),Yd(),eu(),tu(),nu(),Qd()]})}function au(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-folder",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M240.258 111.814A14.034 14.034 0 0 0 228.9 106H214V88a14.016 14.016 0 0 0-14-14h-69.333a2.013 2.013 0 0 1-1.2-.4l-27.734-20.8a14.087 14.087 0 0 0-8.4-2.8H40a14.016 14.016 0 0 0-14 14v144c0 .038.005.075.006.113c.001.085.007.169.013.253a6.07 6.07 0 0 0 .074.651c.026.154.059.306.097.456c.015.062.03.123.047.184c.052.18.112.355.179.527c.012.031.022.064.035.095a6.085 6.085 0 0 0 .293.613c.01.02.024.039.035.059q.145.256.315.496c.013.02.024.041.039.061c.026.036.057.068.084.103c.092.122.188.24.289.355a5.919 5.919 0 0 0 .488.491c.048.044.093.088.142.13a6.171 6.171 0 0 0 .522.396l.013.008a5.947 5.947 0 0 0 .554.325c.048.026.097.047.147.071a5.745 5.745 0 0 0 .637.267q.226.08.46.141c.063.017.126.035.19.05c.16.036.324.064.49.088c.058.008.116.02.176.026A6.047 6.047 0 0 0 32 214h176a6 6 0 0 0 5.692-4.103l28.49-85.47a14.034 14.034 0 0 0-1.924-12.613zM40 62h53.334a2.013 2.013 0 0 1 1.2.4l27.733 20.8a14.087 14.087 0 0 0 8.4 2.8H200a2.003 2.003 0 0 1 2 2v18H69.766a13.983 13.983 0 0 0-13.282 9.573L38 171.026V64a2.003 2.003 0 0 1 2-2zm190.798 58.632L203.676 202H40.325l27.544-82.632A1.998 1.998 0 0 1 69.766 118H228.9a2 2 0 0 1 1.898 2.632z"})})})}function iu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-dot",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 16a4 4 0 1 1 0-8a4 4 0 0 1 0 8z"})})})}function Mn({className:e,title:t,children:n,...o}){return s.jsxs("svg",{className:h("fill-current",e),...o,children:[t&&s.jsx("title",{children:t}),n,s.jsx("use",{xlinkHref:"#icon-dot"})]})}function cu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-open-link",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})}function lu({title:e,children:t,...n}){return s.jsxs("svg",{fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",...n,children:[e&&s.jsx("title",{children:e}),t,s.jsx("use",{xlinkHref:"#icon-open-link"})]})}function du(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-cross",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"m2 2 20 20"}),s.jsx("path",{d:"M2 22 22 2"})]})})}function uu({title:e,children:t,...n}){return s.jsxs("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,...n,children:[e&&s.jsx("title",{children:e}),t,s.jsx("use",{xlinkHref:"#icon-cross"})]})}function mu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-pen",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M1.48 20.12 6.37 8.39l7.65-2.91 5.01 3.21-.64 8.27-14.65 5.53c-.21.08-.38-.19-.21-.34l7.4-6.6s.23-.28.57-.39c.65-.21 1.7-.17 2.42-1.18 1.37-1.91-1.11-4.28-3.09-3.1-1.04.62-1.12 2.04-1.24 2.89-.05.39-.32.66-.32.66L1.85 20.4c-.19.16-.47-.05-.37-.28Z"}),s.jsx("path",{d:"m15.79 3.77 1.77-2.22c.06-.07.15-.08.23-.03l4.68 3.16c.08.06.1.17.04.25L20.64 7.2a.17.17 0 0 1-.23.03L15.8 3.92s-.05-.08 0-.14Z"})]})})}function fu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-form-login",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"m17.93 8.75-4.49 4.49 2.1 2.07a.99.99 0 0 1-.68 1.69s-1.79.2-4.05.2-3.45-.08-3.45-.08a1 1 0 0 1-1.01-.99s-.11-1.96-.11-3.78.11-3.75.11-3.75a.98.98 0 0 1 1.68-.7l2.4 2.37 4.51-4.51a1.03 1.03 0 0 1 1.47 0l1.51 1.51c.41.41.41 1.07 0 1.48Z"}),s.jsx("path",{d:"M19.35 21.66s-3.87.18-7.3.18-7.3-.18-7.3-.18a2.25 2.25 0 0 1-2.25-2.25s-.35-2.65-.35-7.41c0-4.4.16-5.64.35-7.41.13-1.24 1.01-2.25 2.25-2.25 0 0 3.9-.18 7.3-.18s7.3.18 7.3.18a2.25 2.25 0 0 1 2.25 2.25s.24 3.69.24 7.41-.24 7.41-.24 7.41a2.25 2.25 0 0 1-2.25 2.25Z"})]})})}function hu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-form-change",viewBox:"0 0 24 24",children:s.jsx("path",{d:"m21.5 10-3 2.8c-.4.5-1.1.5-1.6 0L14 10c-.4-.5.1-1.4.8-1.4H16V7.4c0-1.4-1-2.5-2.4-2.5H10C8.6 5 7.5 6 7.5 7.4c0 .4-.4.7-.8.7H5.6c-.6 0-1.1-.4-1.1-1v-.7c0-2.3 1.9-4.2 4.2-4.2h6.6c2.3 0 4.2 1.9 4.2 4.2v2.2h1.2c.7 0 1.3.9.8 1.4ZM2.5 14l3-2.8c.4-.5 1.1-.5 1.6 0l3 2.8c.4.5-.1 1.4-.8 1.4H8v1.2c0 1.4 1 2.5 2.4 2.5H14c1.3 0 2.4-1.1 2.4-2.5 0-.4.4-.8.8-.8h1.1c.6 0 1.1.5 1.1 1.2v.6c0 2.3-1.9 4.2-4.2 4.2H8.7c-2.3 0-4.2-1.9-4.2-4.2v-2.2H3.3c-.7 0-1.3-.9-.8-1.4Z"})})})}function pu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-chkbox",viewBox:"0 0 21 21",children:[s.jsx("path",{d:"M5.5 3.5h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2z"}),s.jsx("path",{d:"M7.5 10.5l2 2l4-4"})]})})}function xu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-chkbox-empty",viewBox:"0 0 21 21",children:s.jsx("path",{d:"M5.5 3.5h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2z"})})})}function gu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-chevron-down",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M5.843 9.593L11.5 15.25l5.657-5.657l-.707-.707l-4.95 4.95l-4.95-4.95l-.707.707z"})})})}function cs({title:e,children:t,...n}){return s.jsxs("svg",{fill:"currentColor",...n,children:[e&&s.jsx("title",{children:e}),t,s.jsx("use",{xlinkHref:"#icon-chevron-down"})]})}function bu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-chevron-up",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M5.843 15.407L11.5 9.75l5.657 5.657l-.707.707l-4.95-4.95l-4.95 4.95l-.707-.707z"})})})}function ju(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-chevron-down-2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.157 7.593L11.5 13.25L5.843 7.593l.707-.707l4.95 4.95l4.95-4.95l.707.707zm0 4L11.5 17.25l-5.657-5.657l.707-.707l4.95 4.95l4.95-4.95l.707.707z"})})})}function wu({title:e,children:t,...n}){return s.jsxs("svg",{fill:"currentColor",...n,children:[e&&s.jsx("title",{children:e}),t,s.jsx("use",{xlinkHref:"#icon-chevron-down-2"})]})}function vu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-chevron-right",viewBox:"0 0 15 15",children:s.jsx("path",{d:"M6.16 3.14a.5.5 0 0 1 .7.02l3.76 4c.18.19.18.49 0 .68l-3.75 4a.5.5 0 1 1-.73-.68L9.56 7.5 6.14 3.84a.5.5 0 0 1 .02-.7Z"})})})}function yu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-fire",viewBox:"0 0 24 24",children:[s.jsx("path",{className:"fill-[var(--fill-a,none)] stroke-[var(--stroke-a,currentColor)]",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),s.jsx("path",{className:"fill-[var(--fill-b,none)] stroke-[var(--stroke-b,currentColor)]",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})]})})}const Au="fill-none stroke-current stroke-[1.5]",Nu="[--fill-a:#ea580c] [--fill-b:#fff7ed]";function Aa({className:e,children:t,title:n,colorize:o,...r}){return s.jsxs("svg",{className:h(Au,o&&Nu,e),strokeLinecap:"round",strokeLinejoin:"round",...r,children:[n&&s.jsx("title",{children:n}),t,s.jsx("use",{xlinkHref:"#icon-fire"})]})}function Su(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-info",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M12 16v-4"}),s.jsx("path",{d:"M12 8h.01"})]})})}function Cu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-question",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),s.jsx("path",{d:"M12 17h.01"})]})})}function ku(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-warning",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})})}function Tn({className:e,children:t,title:n,...o}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[1.5]",e),strokeLinecap:"round",strokeLinejoin:"round",...o,children:[n&&s.jsx("title",{children:n}),t,s.jsx("use",{xlinkHref:"#icon-warning"})]})}function Fu(){return s.jsx(s.Fragment,{children:s.jsx("symbol",{id:"icon-code",viewBox:"0 0 15 15",children:s.jsx("path",{d:"M9.96 2.69a.5.5 0 1 0-.92-.38l-4 10a.5.5 0 1 0 .92.38l4-10Zm-6.1 2.46c.19.2.19.5 0 .7L2.2 7.5l1.64 1.65a.5.5 0 1 1-.7.7l-2-2a.5.5 0 0 1 0-.7l2-2c.2-.2.5-.2.7 0Zm7.29 0c.2-.2.5-.2.7 0l2 2c.2.2.2.5 0 .7l-2 2a.5.5 0 0 1-.7-.7l1.64-1.65-1.64-1.65a.5.5 0 0 1 0-.7Z"})})})}function Iu({className:e,children:t,title:n,...o}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),...o,children:[n&&s.jsx("title",{children:n}),t,s.jsx("use",{xlinkHref:"#icon-code"})]})}function Mu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-forms",viewBox:"0 0 24 24",children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),s.jsx("path",{d:"M9 8h7"}),s.jsx("path",{d:"M8 12h6"}),s.jsx("path",{d:"M11 16h5"})]})})}function Tu(){return s.jsx(s.Fragment,{children:s.jsxs("symbol",{id:"icon-ellipsis",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"12",r:"1"}),s.jsx("circle",{cx:"19",cy:"12",r:"1"}),s.jsx("circle",{cx:"5",cy:"12",r:"1"})]})})}function Du(){return s.jsxs(s.Fragment,{children:[au(),iu(),gu(),cu(),du(),mu(),fu(),hu(),pu(),xu(),bu(),ju(),vu(),yu(),Su(),Cu(),ku(),Fu(),Mu(),Tu()]})}function Pu(){return s.jsxs(nl,{children:[ol(),ru(),Du()]})}const Ue={edit:cl,psw:il,check:go,radio:go,list:Cs,combo:Cs,text:al,button:rl,listbx:Cs};function Ru({field:e,className:t,title:n}){var a;const o=e.password?"psw":e.type;return((a=Ue[o])==null?void 0:a.call(Ue,{className:t,title:n}))||s.jsx("div",{className:"text-red-500",children:"nan"})}const Lu={edit:"edit",psw:"psw",check:"checkbox",radio:"radio button",list:"listbox",combo:"combobox",text:"text",button:"button",listbx:"listbox"};function $u(e){var r;const t=e.password?"psw":e.type,n=Lu[t];return t==="list"?`Field ${n} choices:
${((r=e.choosevalue)==null?void 0:r.split(":").join(`
`))||"No choices"}`:`Field type: ${n}`}function ls({fType:e}){return{fType:e,value:"",valueAs:me.askReuse,isRef:!1,isNon:!1}}function Ou(e,t){return e.value===t.value&&e.valueAs===t.valueAs&&e.isRef===t.isRef&&e.fType===t.fType&&e.isNon===t.isNon}function _u(e){return{displayname:"",dbname:fn(),ownernote:"",...ls({fType:e})}}function Bu(e){const t=_u(e);return{fieldValue:X({...t}),beforeEdit:t,fceMeta:Na(0),editor:X({isSelectedInView:!1,isSelectedInPicker:!1})}}function Na(e){const t=Ne.asNumber(),n=t-ll;return{index:e,uuid:n,mruAtom:f(t)}}function Eu(e){let t;return e?e==="alpha"?t=y.ConstrainSet.alpha:e==="numeric"?t=y.ConstrainSet.numeric:e==="withspecial"?t=y.ConstrainSet.withspecial:e==="atleastonenumber"?t=y.ConstrainSet.atleastonenumber:t=y.ConstrainSet.alphanumeric:t=y.ConstrainSet.alphanumeric,t}function zu(e){let t="";switch(e){case y.ConstrainSet.alphanumeric:default:break;case y.ConstrainSet.alpha:t="alpha";break;case y.ConstrainSet.numeric:t="numeric";break;case y.ConstrainSet.withspecial:t="withspecial";break;case y.ConstrainSet.atleastonenumber:t="atleastonenumber";break}return t}function Vu(e){let t;return e?e==="different_wp"?t=y.ConstrainPsw.diffWp:e==="different_ap"?t=y.ConstrainPsw.diffAp:e==="different_pp"?t=y.ConstrainPsw.diffPp:t=y.ConstrainPsw.none:t=y.ConstrainPsw.none,t}function Wu(e){let t="";switch(e){case y.ConstrainPsw.none:default:break;case y.ConstrainPsw.diffWp:t="different_wp";break;case y.ConstrainPsw.diffAp:t="different_ap";break;case y.ConstrainPsw.diffPp:t="different_pp";break}return t}function Hu(e,t,n){const o={useAs:y.UseAs.none};return Gu(e,o),qu(t,o),o}const Uu=/^\[p4\](v|g):(\d+):(\d+):(\w*):(\w*)$/;function Gu(e,t){if(!e)return;const n=e.match(Uu);if(!n||n.length!==6){console.error(`invalid simple policy: '${e}'`);return}const[o,r,a,i,c,l]=n;t.useAs=r==="v"?y.UseAs.verify:r==="g"?y.UseAs.generate:y.UseAs.none,t.minLen=+a,t.maxLen=+i,t.constrainSet=Eu(c),t.constrainPsw=Vu(l)}const Zu=/^\[e1\](v|g):(.*)<(\d+),(\d+)>$/;function qu(e,t){if(t.custom="",!e)return;const n=e.match(Zu);if(!n||n.length!==5){console.error(`invalid extended policy: '${e}'`);return}const[o,r,a,i,c]=n;t.useAs=r==="v"?y.UseAs.verify:r==="g"?y.UseAs.generate:y.UseAs.none,t.custom=a,t.minLen=+i,t.maxLen=+c}function Ku(e,t){return{policy:Xu(e),policy2:Qu(e),options:t}}function Xu(e){let t="";switch(e.useAs){case y.UseAs.none:return"";case y.UseAs.verify:t="v";break;case y.UseAs.generate:t="g";break}const n=zu(e.constrainSet),o=Wu(e.constrainPsw);return`[p4]${t}:${e.minLen}:${e.maxLen}:${n}:${o}`}function Qu(e){if(e.custom){let t="";switch(e.useAs){case y.UseAs.none:return"";case y.UseAs.verify:t="[e1]v:";break;case y.UseAs.generate:t="[e1]g:";break}return`${t}${e.custom}<${e.minLen},${e.maxLen}>`}return""}class Ju{constructor(){N(this,"chars","");N(this,"min",-1);N(this,"max",-1)}}class Yu{constructor(){N(this,"rules",[]);N(this,"min",-1);N(this,"max",-1);N(this,"mix",!0)}}class yo{constructor(){N(this,"chSet",new Ju);N(this,"group",new Yu);N(this,"isGroup",!1)}}class Ao{constructor(){N(this,"rules",[]);N(this,"targetMin",-1);N(this,"targetMax",-1);N(this,"noRepeat",!1);N(this,"noPrevPos",!1)}}var V=(e=>(e[e.none=0]="none",e[e.unexpected=1]="unexpected",e[e.unexpShorthand=2]="unexpShorthand",e[e.unexpChar=3]="unexpChar",e[e.expChar=4]="expChar",e[e.expCharALessB=5]="expCharALessB",e[e.expMoreText=6]="expMoreText",e[e.expNum=7]="expNum",e[e.invRange=8]="invRange",e[e.expDigit=9]="expDigit",e[e.exp4Digits=10]="exp4Digits",e[e.unexpChSetClose=11]="unexpChSetClose",e[e.chSetEmpty=12]="chSetEmpty",e[e.expLowBoundCh=13]="expLowBoundCh",e[e.unexpDoubleSet=14]="unexpDoubleSet",e[e.moreThen1024=15]="moreThen1024",e[e.lastError=16]="lastError",e))(V||{});class W{constructor(t,n,o,r=""){N(this,"type",0);N(this,"pos",0);N(this,"what","");N(this,"expected","");this.what=t,this.type=n,this.pos=o,this.expected=r}}function em(e){return e instanceof W?`${e.what} at position ${e.pos}`:e instanceof Error?e.message:`${e}`}function K(e,t){for(let n=0;n<e.length;++n)if(t.has(e[n]))return n;return-1}function Dn(e){return e>="0"&&e<="9"}function tm(e){return Dn(e)||e>="A"&&e<="F"||e>="a"&&e<="f"}const Sa="0123456789",Ca="abcdefghijklmnopqrstuvwxyz",ka="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Fa="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";function sm(e,t){switch(e){case"d":return Sa;case"a":return Ca;case"A":return ka;case"s":return Fa;default:throw new W("unexpected shorthand",V.unexpShorthand,t)}}class nm{constructor(){N(this,"sourceText","");N(this,"rulesAndMeta",new Ao);N(this,"sourceTextPos",0)}doParse({custom:t,minTotal:n,maxTotal:o}){this.sourceText=t,this.sourceTextPos=0,this.rulesAndMeta=new Ao,this.parse_start(),this.rulesAndMeta.targetMin===-1&&(this.rulesAndMeta.targetMin=n),this.rulesAndMeta.targetMax===-1&&(this.rulesAndMeta.targetMax=o)}skipWhitespace(){for(;this.sourceTextPos<this.sourceText.length;){const{ch:t,hasChar:n}=this.getCharNoThrow();if(!n)return;switch(t){case" ":case"	":break;default:{this.ungetChar();return}}}}hasChar(){return this.sourceTextPos<this.sourceText.length}ungetChar(){if(this.sourceTextPos<=0){console.error("impossible: no more unget");return}this.sourceTextPos--}getChar(){if(!this.hasChar())throw new W("no more text",V.expMoreText,this.sourceTextPos);const t=this.sourceText[this.sourceTextPos];return this.sourceTextPos++,t}getCharNoThrow(){return this.hasChar()?{ch:this.sourceText[this.sourceTextPos++],hasChar:!0}:{ch:"",hasChar:!1}}getCharIfExistWs(){return this.skipWhitespace(),this.getCharNoThrow()}expectedCharWs(t){this.skipWhitespace();const{ch:n,hasChar:o}=this.getCharNoThrow();if(!o||n!==t)throw new W(`expected '${t}'`,V.expChar,this.sourceTextPos,t)}getNumberIfExistWs(){this.skipWhitespace();let t="";for(;;){const{ch:o,hasChar:r}=this.getCharNoThrow();if(!r)break;if(!Dn(o)){this.ungetChar();break}t+=o}return t?{num:parseInt(t),hasChar:!0}:{num:-1,hasChar:!1}}getRangeEntryWs(t,n){const o={min:-1,max:-1},{ch:r,hasChar:a}=this.getCharIfExistWs();if(!a)return o;if(r!==t)return this.ungetChar(),o;const{num:i,hasChar:c}=this.getNumberIfExistWs();if(o.min=i,!a||isNaN(i))throw new W("expected number",V.expNum,this.sourceTextPos);if(this.skipWhitespace(),this.getChar()===n)return o.max=o.min,o;this.ungetChar(),this.expectedCharWs(",");const{num:l,hasChar:d}=this.getNumberIfExistWs();if(o.max=l,(!d||isNaN(l))&&(o.max=-2),this.expectedCharWs(n),d&&o.min>o.max)throw new W("invalid range",V.invRange,this.sourceTextPos);return o}parse_finalPswLength(){const t=this.getRangeEntryWs("<",">");return t.max===-1&&(t.max=t.min),t}parse_range(t){const n=this.getRangeEntryWs("{","}");t.min=n.min,t.max=n.max}getCharOfCharset(){let t="";if(t=this.getChar(),t!=="\\"||(t=this.getChar(),t!=="u"&&t!=="U"))return t;t=this.getChar(),t!=="+"&&t!=="-"&&this.ungetChar();let n="",o=0;for(;o++<4;){if(t=this.getChar(),!tm(t))throw new W("expected digit",V.expDigit,this.sourceTextPos);n+=t}const r=parseInt(n,16);if(isNaN(r)||r>65535||r<0)throw new W("expected 4 hex digits",V.exp4Digits,this.sourceTextPos);return String.fromCharCode(r)}parse_charset(){let t="",n=this.getChar(),o=n==="[";for(n!=="["&&this.ungetChar();;){if(n=this.getChar(),n==="]"){if(!o)throw new W("unexpected '[' before ']'",V.unexpChSetClose,this.sourceTextPos);if(!t)throw new W("unexpected empty charset",V.chSetEmpty,this.sourceTextPos);return t}let a=!1;if(n==="-"){if(!t)throw new W("expected lower boundary char before '-'",V.expLowBoundCh,this.sourceTextPos);if(n=this.getChar(),n==="-")throw new W("unexpected double '--'",V.unexpDoubleSet,this.sourceTextPos);this.ungetChar(),a=!0}else this.ungetChar();let i=this.getCharOfCharset();if(a){let c=t[t.length-1];t=t.substring(0,t.length-1),t=r(c,i,t,this.sourceTextPos),a=!1}else t+=i}function r(a,i,c,l){if(a>i)throw new W("expected set n <= m",V.expCharALessB,l);for(;a<=i;)c.indexOf(a)===-1&&(c+=a),a=String.fromCharCode(a.charCodeAt(0)+1);return c=c.split("").sort().join(""),c}}parse_group(){let t=new yo,n=this.getChar();if(n!=="(")throw new W("expected '('",V.expChar,this.sourceTextPos,"(");if(t.group.rules=this.parse_rules(),n=this.getChar(),n!==")")throw new W("expected ')'",V.expChar,this.sourceTextPos,")");const{ch:o,hasChar:r}=this.getCharIfExistWs();return r&&(o==="."?t.group.mix=!1:this.ungetChar()),t}parse_rule(){let t=new yo;const{ch:n,hasChar:o}=this.getCharIfExistWs();if(!o)return t;switch(n){case"(":{this.ungetChar(),t=this.parse_group(),t.isGroup=!0,this.parse_range(t.group);break}case"[":{if(this.ungetChar(),t.chSet.chars=this.parse_charset(),t.isGroup=!1,this.parse_range(t.chSet),t.chSet.chars.length>1024)throw new W("expected less then 1024 per charset",V.moreThen1024,this.sourceTextPos);break}case"d":case"a":case"A":case"s":{t.chSet.chars=sm(n,this.sourceTextPos),t.isGroup=!1,this.parse_range(t.chSet);break}default:throw new W("unexpected char",V.unexpChar,this.sourceTextPos,n)}return t}parse_rules(){const t=[];for(;;){const{ch:n,hasChar:o}=this.getCharNoThrow();if(!o)return t;switch(n){case"(":case"[":case"d":case"a":case"A":case"s":{this.ungetChar();const r=this.parse_rule();t.push(r);break}default:return this.ungetChar(),t}}}parse_start(){for(;;){const{ch:t,hasChar:n}=this.getCharIfExistWs();if(!n)return;switch(t){case"~":{this.rulesAndMeta.noRepeat=!0;break}case"&":{this.rulesAndMeta.noPrevPos=!0;break}case"(":case"[":case"d":case"a":case"A":case"s":{this.ungetChar(),this.rulesAndMeta.rules=this.parse_rules();break}case"<":{this.ungetChar();const o=this.parse_finalPswLength();this.rulesAndMeta.targetMin=o.min,this.rulesAndMeta.targetMax=o.max;break}default:throw new W(`unexpected char '${t}'`,V.unexpChar,this.sourceTextPos,t)}}}}const ks=(e,t)=>e===1?t:`${t}s`,at={chSetLen:(e,t)=>`   Password length must be between ${e} and ${t} characters`,chSet:e=>`   a character from ${e}`,chSetMin:(e,t)=>`   at least ${e} ${ks(e,"character")} from ${t}`,chSetMax:(e,t)=>`   only ${e} ${ks(e,"character")} from ${t}`,chSetMinMax:(e,t,n)=>`   at least ${e} and not more than  ${t} ${ks(t,"character")} from ${n}`,repeat:()=>"   repeated occurrence of:",noRepeat:()=>"   Each password character must only be used one time"};_t[y.ConstrainPsw.diffWp],_t[y.ConstrainPsw.diffAp],_t[y.ConstrainPsw.diffPp];function Ia(e,t){for(const n of e)if(n.isGroup)Ia(n.group.rules,t);else{const o=n.chSet.min,r=n.chSet.max,a=n.chSet.chars===ka?"[A-Z]":n.chSet.chars===Ca?"[a-z]":n.chSet.chars===Sa?"[0-9]":n.chSet.chars===Fa?"[!@#$%^&*()_+=]":`[${n.chSet.chars}]`;let i="";o===-1&&r===-1?i=at.chSet(a):r>0&&o>0?r===o?r===1?i=at.chSet(a):i=at.chSetMax(r,a):i=at.chSetMinMax(o,r,a):o>0&&(i=at.chSetMin(o,a)),t.push(i)}}const ds="abcdefghikjlmnopqrstuvwxyz",us="ABCDEFGHIJKLMNOPQRSTUVWXYZ",ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghikjlmnopqrstuvwxyz",Xe="0123456789",vt="!\"#$%&'()*+,-./:;<=>?[\\]^_`{|}~@",Pn=ms+Xe,Ma=Pn+vt,ht=new Set(ds),pt=new Set(us),om=new Set(ms),xt=new Set(Xe),Ta=new Set(vt),rm=new Set(Pn),am=new Set(Ma),im=Object.freeze(Object.defineProperty({__proto__:null,SET_AlphaBoth:ms,SET_AlphaLower:ds,SET_AlphaNumeric:Pn,SET_AlphaNumericSpecial:Ma,SET_AlphaUpper:us,SET_Numeric:Xe,SET_Special:vt,setSET_AlphaBoth:om,setSET_AlphaLower:ht,setSET_AlphaNumeric:rm,setSET_AlphaNumericSpecial:am,setSET_AlphaUpper:pt,setSET_Numeric:xt,setSET_Special:Ta},Symbol.toStringTag,{value:"Module"}));function cm(e,t){const n=Math.ceil(e),o=Math.floor(t);return Math.floor(Math.random()*(o-n+1)+n)}function Da(e,t){if(e>t)throw new Error("inv.r.bounds");return cm(e,t)}function Rn(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),Array.from(t)}const lm=Object.freeze(Object.defineProperty({__proto__:null,getRandomCryptoValues:Rn,getRandomInRange:Da},Symbol.toStringTag,{value:"Module"}));function de(e,t,n){if(n<=0)throw new Error("inv.arg.length");let o=new Set(e);for(const c of t)o.delete(c);let r=Array.from(o).join("");if(!r)throw new Error("empty.comb.set");return Rn(n).map(c=>r[c%r.length]).join("")}const dm=Object.freeze(Object.defineProperty({__proto__:null,genPswPartByChars:de},Symbol.toStringTag,{value:"Module"}));function Pa(e){if(!e)return"";const t=Rn(e.length),n=e.split("");let o=0;return n.forEach((a,i)=>{const c=t[o++]%e.length,l=n[c];n[c]=a,n[i]=l}),n.join("")}const um=Object.freeze(Object.defineProperty({__proto__:null,randomizeCharsInString:Pa},Symbol.toStringTag,{value:"Module"}));function mm(e){let t=e,n="";K(t,ht)!==-1&&(n+=ds),K(t,pt)!==-1&&(n+=us),K(t,xt)!==-1&&(n+=Xe),K(t,Ta)!==-1&&(n+=vt);let o="",r=new Map;return Array.from(e).forEach((i,c)=>{o+=i;let l=r.get(i);l||(r.set(i,[]),l=r.get(i)),l.push(c);let d=n.indexOf(i);d!==-1&&(n=n.substring(0,d)+n.substring(d+1))}),Object.entries(r).forEach(([i,c])=>{c.length!==1&&c.forEach(l=>{let u=de(n,o,1)[0];t=t.substring(0,l)+u+t.substring(l+1),o+=u})}),t}const fm=Object.freeze(Object.defineProperty({__proto__:null,removeDuplicateChars:mm},Symbol.toStringTag,{value:"Module"}));function hm(e){let t=!1;for(const n of e){const o=Dn(n);if(o&&t)return!0;t=o}return!1}function pm(e){return new Set(e).size!==e.length}const xm=Object.freeze(Object.defineProperty({__proto__:null,hasAdjacentDigits:hm,hasDuplicateChars:pm},Symbol.toStringTag,{value:"Module"}));function gm(e){return de(ms,"",e)}function bm(e){return de(Xe,"",e)}function Ra(e){return de(vt,"",e)}function La(e){let t="";const n=de(ds,"",e),o=de(us,"",e),r=de(Xe,"",e),a=n+o+r;let i=!0;do t=de(a,"",e),e>2?i=K(t,xt)===-1||K(t,ht)===-1||K(t,pt)===-1:e===2?i=K(t,xt)===-1||K(t,ht)===-1&&K(t,pt)===-1:i=K(t,xt)===-1&&K(t,ht)===-1&&K(t,pt)===-1;while(i);return t}function jm(e){const t=e>3?Da(1,e-3):1,n=e-t;let o="";return n>0&&(o+=La(n)),t>0&&(o+=Ra(t)),Pa(o),o}const wm=Object.freeze(Object.defineProperty({__proto__:null,genAlpha:gm,genAlphaNumSpecial:jm,genAlphaNumeric:La,genNumeric:bm,genSpecial:Ra},Symbol.toStringTag,{value:"Module"})),Ge={...im,...lm,...fm,...dm,...um,...xm,...wm};function $a(e,t,n){let o;for(const r of n)if(r.isGroup&&(o=$a(e,t,r.group.rules)),r.chSet.chars.indexOf(e)!==-1){o=t.get(r.chSet);break}return o}function Oa(e){let t="";const{rules:n,chSetExtraMap:o,noDuplicates:r,avoidConsecutiveChars:a,excludeChars:i}=e;return n.forEach(c=>{if(c.isGroup){let l=Oa({...e,rules:c.group.rules});if(c.group.mix&&(l=Ge.randomizeCharsInString(l)),t+=l,a){let d="",u;for(let m=0;m<t.length;m++){let x=t[m];if(u===x){let j=$a(x,o,c.group.rules);if(j){let A=(m===t.length-1?u:u+t[m+1])+i,k=Ge.genPswPartByChars(j.chSet.chars,A,1);x=k?k[0]:x}}d+=x,u=x}t=d}}else{const l=o.get(c.chSet);if(!l)throw new Error("no.chSetExtra.1");const d=(r?t:"")+i;if(l.generatedLen>0&&(t+=l.generateValue(d)),a){let u="",m;for(let x=0;x<t.length;x++){let j=t[x];if(m===j){let A=(x===t.length-1?m:m+t[x+1])+i,k=Ge.genPswPartByChars(l.chSet.chars,A,1);j=k?k[0]:j}u+=j,m=j}t=u}}}),t}class vm{constructor(t){N(this,"chSet");N(this,"min");N(this,"max");N(this,"wasGenerated",!1);N(this,"generatedLen",-1);this.chSet=t,this.min=t.min,this.max=t.max}checkWasLenGenerated(){if(this.wasGenerated)return!0;if(this.min===-1&&this.max===-1)this.min=1,this.max=1;else if(this.max===-2)return!1;return this.generatedLen=Ge.getRandomInRange(this.min,this.max),this.wasGenerated=this.generatedLen>=this.min&&this.generatedLen<=this.max,this.wasGenerated}generateValue(t){return Ge.genPswPartByChars(this.chSet.chars,t,this.generatedLen)}}function _a(e,t){e.forEach(n=>{if(n.isGroup)_a(n.group.rules,t);else{const o=new vm(n.chSet);o.checkWasLenGenerated()?(t.generated.push(o),t.chSetExtraMap.set(n.chSet,o),t.pswLenGenerated+=o.generatedLen):(t.toGenerate.push(o),t.chSetExtraMap.set(n.chSet,o),t.pswLenFixedCount+=o.min)}})}function ym(e,t){return e.chSet.chars.length===t.chSet.chars.length?0:e.chSet.chars.length<t.chSet.chars.length?-1:1}function Am(e,t,n,o){e.sort(ym);let r=e.length;return e.forEach((a,i)=>{const c=Math.floor((o-t)/(r>0?r:1));if(c<=0)a.max=a.min;else{const l=i===e.length-1;if(l&&n>t){let d=n-t;const u=Math.max(d,a.min);a.min=Math.min(u,a.chSet.chars.length)}a.max=Math.max(a.min,c),l&&a.max>o-t&&(a.max=o-t)}a.checkWasLenGenerated()&&(t+=a.generatedLen,r--)}),t}function Ba(e,t,n){try{let o={chSetExtraMap:new Map,generated:[],toGenerate:[],pswLenGenerated:0,pswLenFixedCount:0};_a(e.rules,o),o.pswLenGenerated=Am(o.toGenerate,o.pswLenGenerated,e.targetMin,e.targetMax);const r={rules:e.rules,chSetExtraMap:o.chSetExtraMap,noDuplicates:t,avoidConsecutiveChars:e.noRepeat,excludeChars:e.noPrevPos?n:""};return Oa(r)}catch(o){return console.error("generatePswByRule",o),""}}function Ea(e){for(const t of e.rules)if(t.isGroup){const n={rules:t.group.rules,password:e.password,mix:t.group.mix};if(!Ea(n))return!1;e.password=n.password;continue}else{let n=e.password.length,o=t.chSet.min,r=t.chSet.max;o===r&&r===-1&&(o=r=1),r===-2&&(r=n);const a=t.chSet.chars,i=new Set(a);let c=0,l=0;for(;l<n&&l<r;l++){let d=-1;if(e.mix)d=K(e.password,i),d!==-1&&(e.password=e.password.substring(0,d)+e.password.substring(d+1));else{let u=e.password[l];d=a.indexOf(u)}if(d!==-1&&(c++,c>r)||!e.mix&&d===-1)break}if(!e.mix&&l>0&&(e.password=e.password.substring(l)),c<o||c>r)return!1}return!0}function za(e,t,n,o){if(!n)return!1;const{targetMin:r,targetMax:a}=e;if(!((r===0||r<=n.length)&&(a===0||a>=n.length))||o&&Ge.hasDuplicateChars(n))return!1;if(e.noPrevPos&&t){let d=Math.min(t.length,n.length);for(let u=0;u<d;u++)if(t[u]===n[u])return!1}if(e.noRepeat){let d="";for(let u=0;u<n.length;u++){if(d===n[u])return!1;d=n[u]}}let c={rules:e.rules,password:n,mix:!1},l=Ea(c);return l&&(l=!c.password),l}function Va(e,t){e.forEach(n=>{if(n.isGroup)Va(n.group.rules,t);else{const o=n.chSet.min,r=n.chSet.max;if(o===-1&&r===-1){t.totalMin++,t.totalMax++;return}r===-2&&(t.hasUndef=!0),o>0&&(t.totalMin+=o),r>0?t.totalMax+=r:r===-2&&(t.totalMax+=o,t.openRanges.push(n.chSet))}})}function Nm(e){var t={openRanges:[],totalMin:0,totalMax:0,hasUndef:!1};Va(e.rules,t);const n={isMinValid:!0,isMaxValid:!0,minAvailableChars:-1,maxAvailableChars:-1,...t};return t.totalMin<e.targetMin?(n.minAvailableChars=t.openRanges.reduce((o,r)=>o+r.chars.length,t.totalMin),n.isMinValid=n.minAvailableChars>e.targetMin):t.totalMin>e.targetMax&&(n.isMinValid=!1),t.totalMax<e.targetMin?(n.maxAvailableChars=t.openRanges.reduce((o,r)=>o+r.chars.length,t.totalMax),n.isMaxValid=n.maxAvailableChars>e.targetMin):t.totalMax>e.targetMax&&(n.isMaxValid=!1),n}function Wa(e){try{let t;return e.mani?t=dl(e.mani):e.fc&&(t=ul(e.fc)),t?{xml:ml(t)||""}:{error:"failed to convert"}}catch(t){return{error:"Failed to convert"+t}}}function Ha(e){return{unid:Ne.asRelativeNumber(),idx:(e==null?void 0:e.idx)??-1,fname:(e==null?void 0:e.fname)||"",fpath:(e==null?void 0:e.fpath)||"",fmodi:(e==null?void 0:e.fmodi)||0,size:(e==null?void 0:e.size)||0,raw:(e==null?void 0:e.raw)||"",failed:(e==null?void 0:e.failed)??!1,notOur:(e==null?void 0:e.notOur)??!1,newFile:(e==null?void 0:e.newFile)??!0,fromMain:(e==null?void 0:e.fromMain)??!1,webFsItem:(e==null?void 0:e.webFsItem)||null,webFile:e==null?void 0:e.webFile,changesSet:ts()}}f(null,(e,t,n)=>{Ua(e,t,n)});const Sm=f(null,(e,t)=>{e(Le).forEach(o=>{const r=e(o);Ua(e,t,r)})});function Ua(e,t,n){var r;const o=e(n.maniAtomsAtom);o&&(o[0],o[1]),Cm((r=n.fceAtomsForFcFile)==null?void 0:r.viewFceCtx),Us(n.fceAtomsForFcFile),Us(n)}function Cm(e){Us(e)}function Us(e){e&&Object.keys(e).forEach(t=>{e[t]=void 0})}const km=/[-|\\{}()[\]^$+.]/g,Fm=/[\?]/g,Im=/[\*]/g;function Mm(e){return e.replace(km,"\\$&").replace(Fm,".").replace(Im,".*")}function Tm(e,t){let n=!!(e&&e.match(/^win\:/)),o=!!(e&&e.match(/^web\:/)),r=!!(e&&e.match(/^why\:/)),a=!!(e&&e.match(/^cap\:/)),i=!!(e&&e.match(/^cls\:/));return(n||o||r||a||i)&&(e=e==null?void 0:e.replace(/^(win|web|why|cap|cls)\:/,"")),{winOnly:n,webOnly:o,whyOnly:r,capOnly:a,clsOnly:i,regex:e&&new RegExp(Mm(e),t?"":"i")||void 0}}function Dm(e,t){var o,r,a,i,c,l,d,u,m,x,j,A,k;let n=!!e.fileCnt.fname.match(t);return n||(n=!!((c=(i=(a=(r=(o=e.parsedSrc.mani)==null?void 0:o.forms)==null?void 0:r[0])==null?void 0:a.options)==null?void 0:i.choosename)!=null&&c.match(t))),n||(n=!!((m=(u=(d=(l=e.parsedSrc.meta)==null?void 0:l[0])==null?void 0:d.mani.detection)==null?void 0:u.web_ourl)!=null&&m.match(t))),n||(n=!!((k=(A=(j=(x=e.parsedSrc.meta)==null?void 0:x[1])==null?void 0:j.mani.detection)==null?void 0:A.web_ourl)!=null&&k.match(t))),n}var be=(e=>(e[e.web=0]="web",e[e.win=1]="win",e[e.man=2]="man",e[e.ie6=3]="ie6",e[e.cat=4]="cat",e))(be||{});const it="text-muted-foreground",Fs="text-red-500 fill-red-300 opacity-75",Is={0:{Icon:qd,normalClasses:it,warningClasses:Fs},1:{Icon:Xd,normalClasses:it,warningClasses:Fs},2:{Icon:ou,normalClasses:it,warningClasses:Fs},3:{Icon:su,normalClasses:it,warningClasses:""},4:{Icon:Jd,normalClasses:it,warningClasses:""}};function Bt(e){const{iconEnum:t,uiOptShowIeWarnIcon:n}=e[0]||{},{iconEnum:o,uiOptShowIeWarnIcon:r}=e[1]||{},a=({className:l,...d})=>{const{Icon:u,normalClasses:m,warningClasses:x}=Is[t],j=n?x:m;return s.jsx(u,{className:h(j,l),...d})},i=({className:l,...d})=>{const{Icon:u,normalClasses:m,warningClasses:x}=Is[t],j=n?x:m,{Icon:A,normalClasses:k,warningClasses:M}=Is[o],O=r?M:k;return s.jsxs("div",{className:"relative size-4 w-5",children:[s.jsx(u,{className:h("absolute top-0 left-0",j,l),...d}),s.jsx(A,{className:h("absolute top-2 left-2 !size-2.5 !fill-muted",O,l)})]})};return e.length===1||t===o&&n===r?a:i}function Pm(e,t){const{stats:n,meta:o}=e.parsedSrc;if(n.isFCat)return[{iconEnum:be.cat,uiOptShowIeWarnIcon:!1}];const r=[],a=Gs({isWeb:zs(o==null?void 0:o[0]),isIe:bo(o==null?void 0:o[0]),isManual:Vs(o==null?void 0:o[0]),uiOptShowIeWarnIcon:t}),i=Gt(o);if(r.push({iconEnum:a,uiOptShowIeWarnIcon:i}),o!=null&&o[1]){const c=Gs({isWeb:zs(o==null?void 0:o[1]),isIe:bo(o==null?void 0:o[1]),isManual:Vs(o==null?void 0:o[1]),uiOptShowIeWarnIcon:t}),l=Gt(o);r.push({iconEnum:c,uiOptShowIeWarnIcon:l})}return r}function Gs({isWeb:e,isIe:t,isManual:n,uiOptShowIeWarnIcon:o}){return e?t&&o?be.ie6:be.web:n?be.man:be.win}function Rm(e,t){if(e.parsedSrc.stats.isFCat)return[Bt([{iconEnum:be.cat,uiOptShowIeWarnIcon:!1}])];if(!e.parsedSrc.meta)return[];const n=e.parsedSrc.meta.map(i=>{if(!i)return;const c=fl(i),l=zs(i),d=Vs(i),u=hl(e.parsedSrc.meta);return{iconEnum:Gs({isWeb:l,isIe:u,isManual:d,uiOptShowIeWarnIcon:t}),uiOptShowIeWarnIcon:c}}).filter(Boolean),o=[],r=n==null?void 0:n[0];r&&o.push(Bt([r]));const a=n==null?void 0:n[1];return r&&a&&(r.iconEnum!==a.iconEnum||r.uiOptShowIeWarnIcon!==a.uiOptShowIeWarnIcon)&&o.push(Bt([a])),o}function Lm(e,t,n){const{showChosen:o,showFname:r}=t;return(r?e.fileCnt.fname:o?n(e.parsedSrc.stats.loginFormChooseNameAtom):e.parsedSrc.stats.loginFormDomain)||e.fileCnt.fname}function $m(e){const t=Ha(e);return{fileCnt:t,parsedSrc:Om(t),uiState:{isGroupAtom:f(!1),isCurrentAtom:f(!1)},maniAtomsAtom:f(null),fceAtomsForFcFile:void 0,fceAtomsRefForMani:void 0}}function Om(e){const t={mani:void 0,meta:void 0,fcat:void 0,stats:{}};try{const n=cr(e.raw||"");t.mani=n.mani,t.meta=lr(n.mani),t.fcat=n.fcat}catch(n){const o=`tm parse error: ${n}
${e.fname}
${e.raw}`;e.raw=o,e.failed=!0,console.error(o)}return t.stats=Ga(e,t),t}function _m(e){const t={mani:void 0,meta:void 0,fcat:{names:[]},stats:{}};return t.stats=Ga(e,t),t}function Ga(e,t){var i,c,l,d,u,m,x,j,A;const n=(i=t.mani)==null?void 0:i.forms[0],o=(l=(c=t.meta)==null?void 0:c[0])==null?void 0:l.disp.domain,r=!!e.fpath&&!e.fromMain;return{loginFormDomain:o,isFCat:!!t.fcat,isFCatRoot:!1,isCustomization:!((d=t.meta)!=null&&d.length)&&!!((u=t.mani)!=null&&u.options),loginFormChooseNameAtom:f((n==null?void 0:n.options.choosename)||""),isSubFolder:r,subFolder:e.fpath||"",dateCreated:Zt.dpTimeToShow((x=(m=t.mani)==null?void 0:m.descriptor)==null?void 0:x.created),dateModified:Zt.dpTimeToShow((A=(j=t.mani)==null?void 0:j.descriptor)==null?void 0:A.modified)}}const Bm={showNormal:!0,showManual:!0,showEmpty:!0,showFldCat:!0};var Za=(e=>(e[e.normal=0]="normal",e[e.compact=1]="compact",e[e.minimal=2]="minimal",e))(Za||{}),qt=(e=>(e[e.index=0]="index",e[e.url=1]="url",e[e.group=2]="group",e))(qt||{}),Me=(e=>(e[e.lowToHigh=0]="lowToHigh",e[e.highToLow=1]="highToLow",e))(Me||{});const Em={sortBy:qt.index,order:Me.highToLow},zm={itemSize:Za.normal,showIndex:!1,showFname:!1,showChosen:!1,showIeMarker:!1,selectAsTrigger:!1,selectEmptySpace:!1};var J=(e=>(e[e.forms=0]="forms",e[e.xml=1]="xml",e))(J||{});const Vm={activeView:0},Wm={[$.login]:[],[$.cpass]:[]},Zs=X({msg:""}),ce=X({manual:0,normal:0,empty:0,fc:0}),Kt={textAtom:f(""),caseSensitiveAtom:f(!1)},qa=pl(e=>f(async()=>{try{if(!e)return"";const t=e.endsWith(".json"),n=Sd(e),o=await fetch(n);if(!o.ok)throw new Error(`Failed to fetch ${n}`);return t?await o.json():await o.text()}catch(t){return console.error(t),""}})),Hm={none:"",A:"tests/25.01.16.25/TopLevelWindowsScreenshots.json",B:"tests/25.01.16.25/TopLevelWindowsScreenshots2many.json"},Um=f(null,async(e,t,n)=>{const o=Hm[n];return o?await e(qa(o)):[]}),Gm={none:"",win32:"tests/{1d88e2f5-70b7-4c9f-bda4-b72afd02005d}.dpm",web:"tests/{1fdf1f83-a96f-422c-981e-3ca4e6cedd20}.dpm"},Zm=f(null,async(e,t,n)=>{const o=Gm[n];return o?await e(qa(o)):""}),fe=X({buildRunning:!1,buildError:"",buildFailedBody:""}),qm=dr(fe),Ze=X({buildCounter:0,getPosProgress:null}),Ms=f(void 0),No=f(null),So=new Map,Km=f(null,async(e,t,n)=>{try{if(!n)throw new Error("No hwnd");const o=So.get(n),r=o||await qe({type:"r2mi:get-window-icon",hwnd:n});if(r&&r!==o&&So.set(n,r),e(Ms)!==r){t(Ms,r);const i=JSON.parse(r||""),c=new Image;c.src=`data:image/png;base64,${i.data}`,t(No,c)}fe.buildError=""}catch(o){t(Ms,""),t(No,null),fe.buildError=Fn(o),console.error(`'doGetWindowIconAtom' ${o instanceof Error?o.message:`${o}`}`)}});function Xm(e){if(!(e!=null&&e.length))return;const t=e.at(-1);return xl(t==null?void 0:t.roleString)}function Qm(e){const t=ur.loc.getControlRect(e);if(t)return{left:t[0],top:t[1],right:t[2],bottom:t[3]}}function Jm(e){var r;const t=e.pool&&((r=e.controls)!=null&&r.length)?e:null;if(!t)return null;const n=gl(t.pool);return{pool:t.pool,controls:Ym(n,t.controls)}}function Ym(e,t){return t.map(o=>{const r=ur.fieldPathItems(e,o.path),a=Qm(r.loc),i=Xm(r.p4||r.p4a),c={uuid:Ne.asRelativeNumber(),path:r,...a&&{rect:a},...i&&{role:i}};return{control:o,meta:c}})}function je({progress:e,isRunning:t,error:n,failedBody:o}){Ze.buildCounter=e,t!==void 0&&(fe.buildRunning=t),n!==void 0&&(fe.buildError=n),o!==void 0&&(fe.buildFailedBody=o)}const Et=f(""),qs=f(null);f(null,async(e,t,n)=>{try{if(!n)throw new Error("No hwnd");if(fe.buildRunning)return;je({progress:0,isRunning:!0,error:"",failedBody:""});const o=await qe({type:"r2mi:get-window-controls",hwnd:n});if(e(Et)===o){je({progress:0,isRunning:!1,error:""});return}t(Et,o);const a=JSON.parse(o||"{}"),i=Jm(a);t(qs,i),t(Ks,Ze.buildCounter),je({progress:0,isRunning:!1,error:""}),console.log("doGetWindowControlsAtom.set",JSON.stringify(a,null,4))}catch(o){t(Et,""),t(qs,null),je({progress:0,isRunning:!1,error:Fn(o)}),t(Ks,Ze.buildCounter),console.error(`'doGetWindowControlsAtom' ${o instanceof Error?o.message:`${o}`}`)}});const zt=f(""),jt=f(null),Ks=f(0);f(null,(e,t)=>{t(jt,null),t(zt,"")});f(null,async(e,t)=>{try{const n=await qe({type:"r2mi:get-target-hwnd"});if(e(zt)===n)return;t(zt,n),t(Et,void 0),t(qs,null);const r=JSON.parse(n||"{}");t(jt,r),ve.uiState.iconAutoUpdate&&r.hwnd&&t(Km,r.hwnd)}catch(n){t(zt,""),t(jt,null),console.error(`'doGetTargetHwndAtom' ${n instanceof Error?n.message:`${n}`}`)}});f(e=>{const t=e(jt),{buildRunning:n}=e(qm);return!(t==null?void 0:t.hwnd)||n});const Ts=f(""),Ka=f(void 0),Co=f(null);f(null,async(e,t,{hwnd:n,wantXml:o})=>{var r;try{if(!n)throw new Error("No hwnd");if(fe.buildRunning)return;je({progress:0,isRunning:!0,error:"",failedBody:""});const a=await qe({type:"r2mi:get-window-mani",hwnd:n,wantXml:o});if(e(Ts)===a){je({progress:0,isRunning:!1,error:""});return}if(t(Ts,a),o)t(Ka,a),console.log(`doGetWindowManiXmlAtom.set
${a}`);else{const c=JSON.parse(a||"{}"),l=c.pool&&((r=c.controls)!=null&&r.length)?c:null;t(Co,l),console.log("doGetWindowManiAtom.set",JSON.stringify(c,null,4))}t(Ks,Ze.buildCounter),je({progress:0,isRunning:!1,error:""})}catch(a){t(Ts,""),t(Co,null),je({progress:0,isRunning:!1,error:Fn(a)}),console.error(`'doGetWindowManiAtom' ${a instanceof Error?a.message:`${a}`}`)}});f(e=>{const t=e(Ka);return t?ef(t):null});function ef(e){const t=cr(e);return{mani:t.mani,fcat:t.fcat,meta:lr(t.mani)}}const Ae=f([]),Ln=f(null,async(e,t,{width:n})=>{Se()?await tf(n,t):await sf(n,e,t)});async function tf(e,t){try{const n=await qe({type:"r2mi:get-tlw-infos"}),r=JSON.parse(n||"[]").map(l=>l.hwnd),i=await qe({type:"r2mi:get-tlw-screenshots",tlwInfos:{imageFormat:"png",width:e||300,hwnd:r}}),c=JSON.parse(i||"{}");nf(c),t(Ae,Xa(c))}catch(n){console.error(`'doCollectScreenshotsAtom' ${n instanceof Error?n.message:`${n}`}`),_.error(`'doCollectScreenshotsAtom' ${n instanceof Error?n.message:`${n}`}`),t(Ae,[])}}async function sf(e,t,n){const o=ve.testCreate.screen,r=await n(Um,o);n(Ae,Xa(r))}function Xa(e){return e.map((n,o)=>{const r={...n};return r.type==="data"&&(r.data=`data:image/${r.format};base64,${r.data}`),{item:r,uuid:Ne.asRelativeNumber(),editor:X({selected:!1})}})}function nf(e){const t=[];e.forEach((n,o)=>{var a;const r=`${o+1}`.padStart(2," ");if(n.type==="error"){t.push(`${r}. type: ${n.type} hwnd: ${n.hwnd} errorCode: ${n.errorCode}`);return}else if(n.type==="data"){t.push(`${r}. hwnd:${n.hwnd} ${n.format} ${`${n.width}`.padStart(4," ")} x ${`${n.height}`.padEnd(4," ")} img:'${(a=n.data)==null?void 0:a.substring(0,7)}...' caption: '${n.caption}'`);return}t.push("undefined")}),console.log("Screenshots",JSON.stringify(t,null,2))}f(null,(e,t,{hwnd:n,rect:o})=>{if(o){if(n===void 0){const r=e(jt);n=r==null?void 0:r.hwnd}n&&Te.highlightRect(n,o)}});const Dt=f(-1),Pt=f(!1);let ge;f(e=>e(Pt),(e,t,{doStart:n,callback:o})=>{if(e(Pt))n||(t(Pt,!1),t(Dt,-1),ge&&(clearTimeout(ge),ge=void 0));else if(n){let a=function(){o==null||o(),t(Dt,e(Dt)+1),ge=setTimeout(a,1e3)};t(Pt,!0),ge&&(clearTimeout(ge),ge=void 0),t(Dt,1),ge=setTimeout(a,1e3)}});async function of(e,t){const n={type:"r2mi:load-files",filenames:e,...t&&{allowedExt:t}};return(await(Y==null?void 0:Y.invokeMain(n))||[]).map(Qa)}function Qa(e){const t=e;return t.unid=Ne.asRelativeNumber(),t.changesSet=ts(),t.fpath=Nd(t.fpath),t}function Ja(e){const t=zi(e.map(n=>n.fpath));bt({rpath:t,dir:void 0,fromMain:!0})}const rf=f(null,(e,t,n)=>{switch(n.type){case"m2r:loaded-files":{const o=n.filesCnt.map(Qa);Ja(o),t(Ct,o);break}case"m2r:reload-files":{console.log("m2r:reload-files");break}case"m2r:dark-mode":{console.log("case dark-mode, active",n.active);break}case"m2r:detection-progress":{Ze.buildCounter=n.progress;break}case"m2r:position-progress":{Ze.getPosProgress=n.progress;break}case"m2r:failed-raw-content":{fe.buildFailedBody=n.body;break}case"m2r:log":{console.log("m2r:log",JSON.stringify(JSON.parse(n.body),null,4));break}default:{const o=n;throw new Error(`
Unknown IPC-listener: ${JSON.stringify(o)}
`)}}});var Te;(e=>{function t(u){ie({type:"r2m:menu:command",...u})}e.menuCommand=t;function n(u){ie({type:"r2m:file:load-manifests-dialog",...u})}e.loadManifestsDialog=n;function o(u){ie({type:"r2m:dark-mode",...u})}e.darkMode=o;function r(u){ie({type:"r2m:notify",...u})}e.notify=r;function a(u){ie({type:"r2m:set-napi-options",...u})}e.setNapiOptions=a;function i(){ie({type:"r2m:cancel-detection"})}e.cancelDetection=i;function c(u,m){ie({type:"r2m:highlight-rect",hwnd:u,rect:m})}e.highlightRect=c;function l(){ie({type:"r2m:file:load-test-manifests"})}e.loadTestManifests=l;function d(){ie({type:"r2m:test"})}e.startTestFromMain=d})(Te||(Te={}));const Xs={listeners:new Set,update(e){e&&this.listeners.forEach(t=>t(e))}};function af(){const e=b(rf);return p.useEffect(()=>{const t=n=>n&&e(n);return Xs.listeners.add(t),()=>{Xs.listeners.delete(t)}},[e]),null}function Ya(){Te.setNapiOptions({state:{maxControls:ve.uiState.maxControls}})}function cf(){return p.useEffect(()=>{Ya()},[]),null}var Y=typeof tmApi<"u"?tmApi:void 0;function Se(){return!!Y}Y==null||Y.setCbCallFromMain((e,t)=>Xs.update(t));function ie(e){Y==null||Y.callMain(e)}async function qe(e){return Y==null?void 0:Y.invokeMain(e)}const lf={maxControls:0,acquireXml:!1,iconAutoUpdate:!0,iconsLarge:!1},ze={A:"A",B:"B",none:"none"},Ve={win32:"win32",web:"web",none:"none"},df={screen:"none",mani:"none"},ei="pmat24-lite:ui",ti="v1",uf={uiState:lf,testCreate:df},ve=X(mf());function mf(){var o;let e,t=localStorage.getItem(ei);if(t)try{e=(o=JSON.parse(t))==null?void 0:o[ti]}catch{console.error("storageUi bad format")}return Cd({defaults:uf,loaded:e})}ss(ve,()=>{Ya(),localStorage.setItem(ei,JSON.stringify({[ti]:ve}))});const fs=ts();function ee({fileUs:e},t,n){const o=e.fileCnt.changesSet;return o[t?"add":"delete"](n),fs[o.size?"add":"delete"](`${e.fileCnt.unid}`),o}function ff({fileUs:e}){e.fileCnt.changesSet.clear(),fs.delete(`${e.fileCnt.unid}`)}function hf({fileUs:e},t){return e.fileCnt.changesSet.has(t)}function hs({fileUs:e}){return e.fileCnt.changesSet.size>0}function si(e,t){const{useIt:n,label:o,type:r,dbname:a,valueLife:i,policies:c,rfield:l,rfieldIndex:d,rfieldForm:u}=e;return{useItAtom:I(n,t),labelAtom:I(o,t),typeAtom:I(r,t),valueLifeAtom:I(i,t),dbnameAtom:I(a,t),policiesAtom:I(c,t),rfieldAtom:I(l,t),rfieldIndexAtom:I(d,t),rfieldFormAtom:I(u,t)}}function ps(e,t,n){return{useIt:t(e.useItAtom),label:t(e.labelAtom),type:t(e.typeAtom),valueLife:t(e.valueLifeAtom),dbname:t(e.dbnameAtom),policies:t(e.policiesAtom),rfield:t(e.rfieldAtom),rfieldIndex:t(e.rfieldIndexAtom),rfieldForm:t(e.rfieldFormAtom)}}function pf(e,t){return e.policy===t.policy&&e.policy2===t.policy2&&e.options===t.options}function ni(e,t){return e.useIt===t.useIt&&e.label===t.label&&e.type===t.type&&e.dbname===t.dbname&&Ou(e.valueLife,t.valueLife)&&pf(e.policies,t.policies)&&e.rfield===t.rfield&&e.rfieldIndex===t.rfieldIndex&&e.rfieldForm===t.rfieldForm}function xf(e,t,n,o){o(t.useItAtom,e.useIt),o(t.labelAtom,e.label),o(t.typeAtom,e.type),o(t.dbnameAtom,e.dbname),o(t.valueLifeAtom,e.valueLife),o(t.policiesAtom,e.policies),o(t.rfieldAtom,e.rfield),o(t.rfieldIndexAtom,e.rfieldIndex),o(t.rfieldFormAtom,e.rfieldForm)}function oi(e){const t={useit:e.useIt,displayname:e.label,dbname:e.dbname,...bl(e.type),policy:e.policies.policy,policy2:e.policies.policy2,options:e.policies.options,rfield:e.rfield,rfieldindex:e.rfieldIndex,rfieldform:e.rfieldForm};return hn.valueLife2Mani(e.valueLife,t),t}var Qs;(e=>{function t(o,r){var x;const{fileUs:a,formIdx:i}=o;return(((x=a.parsedSrc.meta)==null?void 0:x[i]).fields||[]).filter(j=>j.ftyp!==F.button).map(m)||[];function m(j,A){function k({get:O,set:U}){bf(A,{fileUsCtx:o,maniAtoms:r,get:O,set:U})}return n(j,k)}}e.createFieldsCtx=t;function n(o,r){const a=pn(o.mani);return{...si(a,r),metaField:o,fromFile:a,fromFcAtom:f()}}})(Qs||(Qs={}));function gf(e,{fileUsCtx:t,maniAtoms:n,get:o,set:r}){const a=n[t.formIdx].normal;if(!a)return;const i=a.rowCtxs[e],c=ps(i,o),l=!ni(c,i.fromFile);ee(t,l,`${t.formIdx?"c":"l"}-f-${e}`)}const bf=$e(gf);function jf(e){var u;const t=!!(e!=null&&e.mani.detection.web_ourl),n=wf(e),o=vf(n),r=yf(n,t),a=(u=e.mani.options)==null?void 0:u.submittype,i=!a,c=a===Ws.dosumbit||o!==-1,l=1+(!c&&o===-1?-1:t?c?0:-1:o);return{buttonNameItems:r,selected:l,doSubmit:c,isSubmitTypeUndefined:i}}function wf(e){var t;return((t=e.fields)==null?void 0:t.filter(n=>n.ftyp===F.button||n.mani.submit))||[]}function vf(e){return e.findIndex(n=>n.mani.useit)}function yf(e,t){const o=[{name:!t&&!e.length?"There is no control to submit":"Don't submit",metaField:null}];if(t)o.push({name:"Submit",metaField:null});else{let r=0;o.push(...e.map(a=>({name:a.mani.displayname||`No name ${++r}`,metaField:a})))}return o}function Af(e,t){const{buttonNameItems:n,selected:o,doSubmit:r,isSubmitTypeUndefined:a}=e;return{buttonNameItemsAtom:I(n,t),selectedAtom:I(o,t),doSubmitAtom:I(r,t),isSubmitTypeUndefinedAtom:I(a,t)}}function ri(e,t,n){const{buttonNameItemsAtom:o,selectedAtom:r,doSubmitAtom:a,isSubmitTypeUndefinedAtom:i}=e;return{buttonNameItems:t(o),selected:t(r),doSubmit:t(a),isSubmitTypeUndefined:t(i)}}function Nf(e,t){return e.selected===t.selected&&e.doSubmit===t.doSubmit&&e.isSubmitTypeUndefined===t.isSubmitTypeUndefined}function Sf(e,t,n,o){o(t.buttonNameItemsAtom,e.buttonNameItems),o(t.selectedAtom,e.selected),o(t.doSubmitAtom,e.doSubmit),o(t.isSubmitTypeUndefinedAtom,e.isSubmitTypeUndefined)}var Js;(e=>{function t(n,o){var u;const{fileUs:r,formIdx:a}=n,i=(u=r.parsedSrc.meta)==null?void 0:u[a],c=jf(i);return{...Af(c,({get:m,set:x})=>{kf({fileUsCtx:n,maniAtoms:o,get:m,set:x})}),isWeb:!!(i!=null&&i.mani.detection.web_ourl),metaForm:i,fromFile:c}}e.createSubmitCtx=t})(Js||(Js={}));function Cf({fileUsCtx:e,maniAtoms:t,get:n,set:o}){const r=t[e.formIdx].normal;if(!r)return;const a=r.submitCtx,i=ri(a,n),c=!Nf(i,a.fromFile);ee(e,c,`${e.formIdx?"c":"l"}-submit`)}const kf=$e(Cf);var Ys;(e=>{function t(n,o){return{rowCtxs:Qs.createFieldsCtx(n,o),submitCtx:Js.createSubmitCtx(n,o)}}e.createNormalCtx=t})(Ys||(Ys={}));var ai=(e=>(e[e.add=0]="add",e[e.edit=1]="edit",e[e.na=2]="na",e))(ai||{});function Ff(e,t,n){return!e&&!t?n===F.psw?0:2:1}function If(e){switch(e){case 0:return"Add";case 1:return"Edit";case 2:return"n/a"}}function Xt(e,t){const n={type:"string",data:e,initialData:e,dirty:!1,error:void 0,touched:void 0,validate:void 0};return t?{...n,...t}:n}function He(e,t){var i;e=e.toString();const{options:n,...o}=t||{};if(n!=null&&n.initialValidate){const c=(i=o.validate)==null?void 0:i.call(o,e);c&&(o.error=c,o.touched=!0)}const r={type:"string",data:e,initialData:e,dirty:!1,error:void 0,touched:void 0,validate:void 0};return t?{...r,...o}:r}function D(e,t){return{...e,data:t,dirty:!1,error:void 0,touched:void 0}}function P(e,t,n){const o=He(e,n);return I(o,t)}function le(e,t){return P(e?"1":"",t,{type:"boolean"})}function Mf(e){return e?"":"The manifest name cannot be empty."}function ii(e){const t=+e;return isNaN(t)?"Value must be a number.":""}function Tf(e,t,n){return n=n||"Value",o=>{const r=+o;return isNaN(r)?`${n} must be a number.`:r<e||r>t?`${n} must be between ${e} and ${t}.`:""}}function Df(e){const t=+e;return isNaN(t)?"Value must be a number.":t<1?"Min password length must be more than 1":""}function Pf(e){const t=+e;return isNaN(t)?"Value must be a number.":t<1?"Max password length must be more than 1":""}const Rf=Nr,ci=p.forwardRef(({className:e,...t},n)=>s.jsx(yr,{ref:n,className:v("border-b",e),...t}));ci.displayName="AccordionItem";const Lf="flex-1 py-4 text-sm font-medium hover:underline [&[data-state=open]>svg]:rotate-180 transition-all flex items-center justify-between",$f="[&>svg]:-rotate-90 [&[data-state=open]>svg]:rotate-0",Of=p.forwardRef(({className:e,children:t,iconFirst:n,leftDown:o,...r},a)=>{const i=s.jsx(mr,{className:"shrink-0 size-4 text-muted-foreground transition-transform duration-200"});return s.jsx(Ar,{className:"flex",children:s.jsxs(gn,{ref:a,className:v(Lf,n&&"justify-start",o&&$f,e),...r,children:[n&&i,s.jsx("div",{children:t}),!n&&i]})})});Of.displayName=gn.displayName;const _f="overflow-hidden data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",li=p.forwardRef(({className:e,children:t,...n},o)=>s.jsx(bn,{ref:o,className:v(_f,e),...n,children:t}));li.displayName=bn.displayName;const Bf="text-sm font-medium focus-visible:ring-1 focus-visible:ring-ring focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none transition-colors rounded-md select-none inline-flex items-center justify-center",Ef=fr(Bf,{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"px-4 py-2 h-9",xs:"px-2 h-7 text-xs rounded-md",sm:"px-3 h-8 text-xs rounded-md",lg:"px-8 h-10 rounded-md",icon:"size-9"}},defaultVariants:{variant:"outline",size:"xs"}}),C=p.forwardRef(({className:e,variant:t,size:n,asChild:o=!1,...r},a)=>{const i=o?jl:"button";return s.jsx(i,{className:v(Ef({variant:t,size:n,className:e})),ref:a,...r})});C.displayName="Button";const zf="peer w-4 h-4 shrink-0 border-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:text-accent data-[state=checked]:bg-muted-foreground border rounded-sm shadow",Z=p.forwardRef(({className:e,...t},n)=>s.jsx(Sr,{ref:n,className:v(zf,e),...t,children:s.jsx(Gl,{className:v("flex items-center justify-center text-current"),children:s.jsx(Ke,{className:"h-4 w-4"})})}));Z.displayName=Sr.displayName;const _e=Kl,di=Zl,ui="fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",$n=p.forwardRef(({className:e,...t},n)=>s.jsx(jn,{ref:n,className:v(ui,e),...t}));$n.displayName=jn.displayName;const On=p.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:v(ui,e),...t}));On.displayName=`${jn.displayName}WithScroll`;const Vf="fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] z-50 p-6 w-full md:w-full max-w-lg bg-background data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] border sm:rounded-lg shadow-lg duration-200 grid gap-4",Wf=e=>e.preventDefault(),Be=p.forwardRef(({className:e,children:t,noClose:n,container:o,withScroll:r,modal:a,overlayClasses:i,onPointerDownOutside:c,hiddenTitle:l,...d},u)=>s.jsxs(di,{container:o,children:[r?s.jsx(On,{className:i}):s.jsx($n,{className:i}),s.jsxs(wn,{ref:u,className:v(Vf,e),onPointerDownOutside:a?Wf:c,"aria-describedby":void 0,...d,children:[l&&s.jsx(ns,{className:"sr-only",children:l}),t,!n&&s.jsx(Qe,{})]})]}));Be.displayName=wn.displayName;const Hf="absolute right-4 top-4 opacity-70 transition-opacityhover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 data-[state=open]:bg-accent data-[state=open]:text-muted-foreground ring-offset-background rounded-sm disabled:pointer-events-none";function Qe({className:e,...t}){return s.jsxs(ql,{className:v(Hf,e),...t,children:[s.jsx(hr,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})}function xs({className:e,...t}){return s.jsx("div",{className:v("text-center sm:text-left flex flex-col space-y-1.5",e),...t})}const gs=p.forwardRef(({className:e,...t},n)=>s.jsx(ns,{ref:n,className:v("text-lg font-semibold leading-none tracking-tight",e),...t}));gs.displayName=ns.displayName;const mi=p.forwardRef(({className:e,...t},n)=>s.jsx(Cr,{ref:n,className:v("text-sm text-muted-foreground",e),...t}));mi.displayName=Cr.displayName;const Uf=pe.Portal,fi=p.forwardRef(({className:e,...t},n)=>s.jsx(pe.Overlay,{ref:n,className:v("fixed inset-0 bg-black/80 z-50",e),...t}));fi.displayName=pe.Overlay.displayName;const Gf="fixed inset-x-0 mt-24 bottom-0 h-auto bg-background border rounded-t-[10px] flex flex-col z-50",Zf=p.forwardRef(({className:e,children:t,withoutOverlay:n,withTopBar:o,hiddenTitle:r,...a},i)=>s.jsxs(Uf,{children:[!n&&s.jsx(fi,{}),s.jsxs(pe.Content,{ref:i,className:v(Gf,e),"aria-describedby":void 0,...a,children:[r&&s.jsx(pe.Title,{className:"sr-only",children:r}),o&&s.jsx("div",{className:"mx-auto mt-4 w-[100px] h-2 bg-muted rounded-full"}),t]})]}));Zf.displayName="DrawerContent";const qf=p.forwardRef(({className:e,...t},n)=>s.jsx(pe.Title,{ref:n,className:v("text-lg font-semibold leading-none tracking-tight",e),...t}));qf.displayName=pe.Title.displayName;const Kf=p.forwardRef(({className:e,...t},n)=>s.jsx(pe.Description,{ref:n,className:v("text-sm text-muted-foreground",e),...t}));Kf.displayName=pe.Description.displayName;const hi=" data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ",Je=An,Ye=Nn,Xf="px-2 py-1.5 focus:bg-accent data-[state=open]:bg-accent rounded-sm outline-none select-none cursor-default flex items-center",Qf=p.forwardRef(({className:e,inset:t,children:n,...o},r)=>s.jsxs(kr,{ref:r,className:v(Xf,t&&"pl-8",e),...o,children:[n,s.jsx(pr,{className:"ml-auto h-4 w-4"})]}));Qf.displayName=kr.displayName;const pi=`p-1 min-w-[8rem] text-sm z-50 text-popover-foreground bg-popover border rounded-md shadow-md overflow-hidden  ${hi}`,Jf=p.forwardRef(({className:e,...t},n)=>s.jsx(Fr,{ref:n,className:v(pi,e),...t}));Jf.displayName=Fr.displayName;const Yf=pi,Ee=p.forwardRef(({className:e,sideOffset:t=4,...n},o)=>s.jsx(vn,{children:s.jsx(os,{ref:o,className:v(Yf,e),sideOffset:t,...n})}));Ee.displayName=os.displayName;const eh="relative px-2 py-1 min-h-[26px] focus:text-accent-foreground focus:bg-accent data-[disabled]:opacity-50 data-[disabled]:pointer-events-none transition-colors rounded-sm outline-none select-none cursor-default flex items-center",E=p.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(rs,{ref:o,className:v(eh,t&&"pl-8",e),...n}));E.displayName=rs.displayName;const th="relative pl-8 pr-2 py-1.5 focus:text-accent-foreground focus:bg-accent data-[disabled]:opacity-50 data-[disabled]:pointer-events-none transition-colors rounded-sm outline-none select-none cursor-default flex items-center",_n=p.forwardRef(({className:e,children:t,checked:n,...o},r)=>s.jsxs(Ir,{ref:r,className:v(th,e),checked:n,...o,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Mr,{children:s.jsx(Ke,{className:"h-4 w-4"})})}),t]}));_n.displayName=Ir.displayName;const sh="relative pl-8 pr-2 py-1.5 focus:text-accent-foreground focus:bg-accent data-[disabled]:opacity-50 data-[disabled]:pointer-events-none transition-colors rounded-sm outline-none select-none cursor-default flex items-center",nh=p.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(Tr,{ref:o,className:v(sh,e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Mr,{children:s.jsx(xr,{className:"h-4 w-4 fill-current"})})}),t]}));nh.displayName=Tr.displayName;const oh=p.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(Dr,{ref:o,className:v("px-2 py-1.5 font-semibold",t&&"pl-8",e),...n}));oh.displayName=Dr.displayName;const ue=p.forwardRef(({className:e,...t},n)=>s.jsx(yn,{ref:n,className:v("-mx-1 my-1 h-px bg-muted",e),...t}));ue.displayName=yn.displayName;const et=({className:e,...t})=>s.jsx("span",{className:v("ml-auto text-xs tracking-widest opacity-60",e),...t});et.displayName="DropdownMenuShortcut";const Bn=Xl,En=Jl,rh=Ql,zn=Pr,ah=`p-4 w-72 z-50 text-popover-foreground bg-popover border rounded-md shadow-md outline-none  ${hi}`,bs=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...o},r)=>s.jsx(Pr,{children:s.jsx(Rr,{ref:r,align:t,sideOffset:n,className:v(ah,e),...o})}));bs.displayName=Rr.displayName;function Vn({className:e,...t}){return s.jsx(Yl,{className:v("-mt-px fill-popover stroke-popover-foreground stroke-[1.5]",e),asChild:!0,...t,children:s.jsxs("svg",{viewBox:"0 0 30 10",children:[s.jsx("polyline",{points:"0,0 15,9 30,0"}),s.jsx("rect",{x:"0",y:"-1",width:"30",height:"2",stroke:"none"})]})})}const ih=p.forwardRef(({openAsFolder:e,multiple:t=!0,...n},o)=>{const r={...e&&{webkitdirectory:""}};return s.jsx("input",{ref:o,className:"hidden",type:"file",multiple:t,...r,...n})}),ch="px-3 py-1 w-full h-9 text-sm border-input bg-transparent file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:opacity-50 disabled:cursor-not-allowed transition-colors border rounded-md shadow-sm flex",tt=p.forwardRef(({className:e,type:t,...n},o)=>s.jsx("input",{type:t,className:v(ch,e),ref:o,...n}));tt.displayName="Input";const lh="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",dh=fr(lh),R=p.forwardRef(({className:e,...t},n)=>s.jsx(Lr,{ref:n,className:v(dh(),e),...t}));R.displayName=Lr.displayName;const uh="p-1 h-9 bg-background border rounded-md shadow-sm flex items-center space-x-1",mh=p.forwardRef(({className:e,...t},n)=>s.jsx($r,{ref:n,className:v(uh,e),...t}));mh.displayName=$r.displayName;const fh="px-3 py-1 text-sm font-medium focus:text-accent-foreground focus:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:bg-accent rounded-sm outline-none select-none cursor-default flex items-center",hh=p.forwardRef(({className:e,...t},n)=>s.jsx(Or,{ref:n,className:v(fh,e),...t}));hh.displayName=Or.displayName;const ph="px-2 py-1.5 text-sm focus:text-accent-foreground focus:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:bg-accent rounded-sm outline-none select-none cursor-default flex items-center",xh=p.forwardRef(({className:e,inset:t,children:n,...o},r)=>s.jsxs(_r,{ref:r,className:v(ph,t&&"pl-8",e),...o,children:[n,s.jsx(pr,{className:"ml-auto h-4 w-4"})]}));xh.displayName=_r.displayName;const gh="p-1 min-w-[8rem] z-50 text-popover-foreground bg-popover data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border rounded-md shadow-lg overflow-hidden",bh=p.forwardRef(({className:e,...t},n)=>s.jsx(Br,{ref:n,className:v(gh,e),...t}));bh.displayName=Br.displayName;const jh="p-1 min-w-[12rem] z-50 text-popover-foreground bg-popover data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border rounded-md shadow-md overflow-hidden",wh=p.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:o=8,...r},a)=>s.jsx(ed,{children:s.jsx(Er,{ref:a,align:t,alignOffset:n,sideOffset:o,className:v(jh,e),...r})}));wh.displayName=Er.displayName;const vh="relative px-2 py-1.5 text-sm focus:text-accent-foreground focus:bg-accent data-[disabled]:opacity-50 data-[disabled]:pointer-events-none rounded-sm select-none outline-none cursor-default flex items-center",yh=p.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(zr,{ref:o,className:v(vh,t&&"pl-8",e),...n}));yh.displayName=zr.displayName;const xi="relative pl-8 pr-2 py-1.5 text-sm focus:text-accent-foreground focus:bg-accent data-[disabled]:opacity-50 data-[disabled]:pointer-events-none rounded-sm outline-none select-none cursor-default flex items-center",Ah=p.forwardRef(({className:e,children:t,checked:n,...o},r)=>s.jsxs(Vr,{ref:r,className:v(xi,e),checked:n,...o,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Wr,{children:s.jsx(Ke,{className:"h-4 w-4"})})}),t]}));Ah.displayName=Vr.displayName;const Nh=p.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(Hr,{ref:o,className:v(xi,e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Wr,{children:s.jsx(xr,{className:"h-4 w-4 fill-current"})})}),t]}));Nh.displayName=Hr.displayName;const Sh=p.forwardRef(({className:e,inset:t,...n},o)=>s.jsx(Ur,{ref:o,className:v("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Sh.displayName=Ur.displayName;const Ch=p.forwardRef(({className:e,...t},n)=>s.jsx(Gr,{ref:n,className:v("-mx-1 my-1 h-px bg-muted",e),...t}));Ch.displayName=Gr.displayName;const en=p.forwardRef(({className:e,...t},n)=>s.jsx(Zr,{className:v("grid gap-2",e),...t,ref:n}));en.displayName=Zr.displayName;const kh="h-4 w-4 aspect-square text-primary border-primary focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 border rounded-full shadow",Ie=p.forwardRef(({className:e,children:t,...n},o)=>s.jsx(qr,{ref:o,className:v(kh,e),...n,children:s.jsx(td,{className:"flex items-center justify-center",children:s.jsx(Ke,{className:"h-3.5 w-3.5 fill-primary"})})}));Ie.displayName=qr.displayName;const Fh=({className:e,...t})=>s.jsx(nd,{className:v("w-full h-full flex data-[panel-group-direction=vertical]:flex-col",e),...t}),ko=sd,Ih="relative group w-px bg-border hover:bg-sky-600 transition-colors delay-[.15s] after:absolute after:left-1/2 after:-translate-x-1/2 after:w-1 after:inset-y-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:h-1 [&[data-panel-group-direction=vertical]>div]:rotate-90 flex items-center justify-center";function Mh({className:e,children:t,...n}){return s.jsx(od,{className:v(Ih,e),...n,children:t})}function Th(e){e==null||e[e.isCollapsed()?"expand":"collapse"]()}function Fo(e,t,n){const o=e.current,r=t.current;o&&r&&Th((!o.isCollapsed()&&!r.isCollapsed()?n:!n)?o:r)}const Dh="invisible group-hover:visible transition-all delay-150",Io="p-px size-4 invisible group-hover:visible transition-all delay-150 bg-border outline outline-1 outline-muted-foreground/30 rounded-sm";function Ph({className:e,...t}){return s.jsx("div",{className:h("w-3 h-4 rounded-sm border bg-border flex items-center justify-center z-10",e),...t,children:s.jsx(wl,{className:"h-2.5 w-2.5"})})}const Rh="[&_[data-radix-scroll-area-viewport]>div]:h-full",Lh="[&_[data-radix-scroll-area-viewport]>div]:![display:block]",$h="[&_[data-radix-scroll-area-content]]:!min-w-0",oe=p.forwardRef(({className:e,children:t,horizontal:n,fixedWidth:o,fullHeight:r,parentContentWidth:a,...i},c)=>s.jsxs(Kr,{ref:c,className:v("relative overflow-hidden",r&&Rh,o&&Lh,a&&$h,e),...i,children:[s.jsx(rd,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(tn,{}),n&&s.jsx(tn,{orientation:"horizontal"}),s.jsx(ad,{})]}));oe.displayName=Kr.displayName;const tn=p.forwardRef(({className:e,orientation:t="vertical",...n},o)=>s.jsx(Xr,{ref:o,orientation:t,className:v("flex touch-none select-none transition-colors",t==="vertical"&&"w-2.5 h-full border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(id,{className:v("relative rounded-full bg-border",t==="vertical"&&"flex-1")})}));tn.displayName=Xr.displayName;const yt=aa,Oh=cd,At=ia,_h="px-3 py-2 h-9 w-full text-sm bg-transparent placeholder:text-muted-foreground border-input ring-offset-background focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 border rounded-md shadow-sm whitespace-nowrap [&>span]:line-clamp-1 flex items-center justify-between gap-1",st=p.forwardRef(({className:e,children:t,...n},o)=>s.jsxs(Sn,{ref:o,className:v(_h,e),...n,children:[t,s.jsx(Qr,{asChild:!0,children:s.jsx(vl,{className:"flex-none h-4 w-4 opacity-50"})})]}));st.displayName=Sn.displayName;const gi="py-1 cursor-default flex items-center justify-center",bi=p.forwardRef(({className:e,...t},n)=>s.jsx(Jr,{ref:n,className:v(gi,e),...t,children:s.jsx(yl,{})}));bi.displayName=Jr.displayName;const ji=p.forwardRef(({className:e,...t},n)=>s.jsx(Yr,{ref:n,className:v(gi,e),...t,children:s.jsx(mr,{})}));ji.displayName=Yr.displayName;const Bh="z-50 relative min-w-[8rem] max-h-96 text-popover-foreground bg-popover data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=top]:slide-in-from-bottom-2 data-[side=right]:slide-in-from-left-2 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 overflow-hidden border rounded-md shadow-md",Eh="data-[side=top]:-translate-y-1 data-[side=right]:translate-x-1 data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1",zh="w-full min-w-[var(--radix-select-trigger-width)] h-[var(--radix-select-trigger-height)]",nt=p.forwardRef(({className:e,children:t,position:n="popper",buttonClasses:o,...r},a)=>s.jsx(ea,{children:s.jsxs(Cn,{ref:a,className:v(Bh,n==="popper"&&Eh,e),position:n,...r,children:[s.jsx(bi,{className:o}),s.jsx(ta,{className:v("p-1",n==="popper"&&zh),children:t}),s.jsx(ji,{className:o})]})}));nt.displayName=Cn.displayName;const wi=p.forwardRef(({className:e,...t},n)=>s.jsx(sa,{ref:n,className:v("px-2 py-1.5 text-sm font-semibold",e),...t}));wi.displayName=sa.displayName;const Vh="relative py-1.5 pl-2 pr-8 w-full text-sm focus:text-accent-foreground focus:bg-accent data-[disabled]:opacity-50 data-[disabled]:pointer-events-none rounded-sm outline-none select-none cursor-default flex items-center",Wh="pl-8 pr-2",Hh="pl-2 pr-8",Uh="left-2",Gh="right-2",ye=p.forwardRef(({className:e,children:t,indicatorFirst:n,...o},r)=>{const a=n?Wh:Hh,i=n?Uh:Gh;return s.jsxs(kn,{ref:r,className:v(Vh,a,e),...o,children:[s.jsx("span",{className:v("absolute right-2 flex h-3.5 w-3.5 items-center justify-center",i),children:s.jsx(na,{children:s.jsx(Ke,{className:"h-4 w-4"})})}),s.jsx(oa,{children:t})]})});ye.displayName=kn.displayName;const vi=p.forwardRef(({className:e,...t},n)=>s.jsx(ra,{ref:n,className:v("-mx-1 my-1 h-px bg-muted",e),...t}));vi.displayName=ra.displayName;const Zh="group toast group-[.toaster]:text-xs group-[.toaster]:text-foreground group-[.toaster]:bg-background group-[.toaster]:border-border group-[.toaster]:shadow-lg ",qh="group-[.toast]:text-muted-foreground ",Kh="[--toast-close-button-start:initial] [--toast-close-button-end:0] ",Xh="group-[.toast]:text-primary-foreground group-[.toast]:bg-primary ",Qh="group-[.toast]:text-muted-foreground group-[.toast]:bg-muted ",Jh="group-[.toaster]:text-white group-[.toaster]:bg-red-600 group-[.toaster]:border-red-700 group-[.toaster]:shadow-muted-foreground/30 group-[.toaster]:shadow-md ",Yh="group-[.toaster]:text-white group-[.toaster]:bg-sky-600 group-[.toaster]:border-sky-700 group-[.toaster]:shadow-muted-foreground/30 group-[.toaster]:shadow-md ",ep="group-[.toaster]:text-black group-[.toaster]:bg-orange-400 group-[.toaster]:border-orange-500 group-[.toaster]:shadow-muted-foreground/30 group-[.toaster]:shadow-md ";function tp(e){return s.jsx(ld,{className:"toaster group",toastOptions:{classNames:{toast:Zh,closeButton:Kh,error:Jh,info:Yh,warning:ep,description:qh,actionButton:Xh,cancelButton:Qh}},richColors:!0,...e})}const sp="peer w-9 h-5 border-transparent focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring focus-visible:ring-offset-background focus-visible:outline-none disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary data-[state=unchecked]:bg-input transition-colors border-2 rounded-full shadow-sm cursor-pointer shrink-0 inline-flex items-center",np="block size-4 bg-background data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 transition-transform pointer-events-none ring-0 rounded-full shadow-lg",op=p.forwardRef(({className:e,thumbClasses:t,...n},o)=>s.jsx(ca,{ref:o,className:v(sp,e),...n,children:s.jsx(dd,{className:v(np,t)})}));op.displayName=ca.displayName;const rp=ud,ap="p-1 h-9 text-muted-foreground bg-muted rounded-lg inline-flex items-center justify-center",yi=p.forwardRef(({className:e,...t},n)=>s.jsx(la,{ref:n,className:v(ap,e),...t}));yi.displayName=la.displayName;const ip="px-3 py-1 text-sm font-medium whitespace-nowrap focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none data-[state=active]:text-foreground data-[state=active]:bg-background data-[state=active]:shadow ring-offset-background transition-all rounded-md inline-flex items-center justify-center",Vt=p.forwardRef(({className:e,...t},n)=>s.jsx(da,{ref:n,className:v(ip,e),...t}));Vt.displayName=da.displayName;const cp="h-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none ring-offset-background",Wt=p.forwardRef(({className:e,...t},n)=>s.jsx(ua,{ref:n,className:v(cp,e),...t}));Wt.displayName=ua.displayName;const lp="px-3 py-2 w-full min-h-[60px] text-sm border-input bg-transparent placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:opacity-50 disabled:cursor-not-allowed border rounded-md shadow-sm flex",Wn=p.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:v(lp,e),ref:n,...t}));Wn.displayName="Textarea";const dp='after:![content:attr(data-replicated)_"_"] after:whitespace-pre after:border-transparent after:invisible after:[grid-area:1/1/2/2] grid',up="resize-none overflow-hidden [grid-area:1/1/2/2]",mp="after:px-3 after:py-2 after:text-sm after:border",fp=p.forwardRef(({containerPaddingFont:e=mp,className:t,value:n,...o},r)=>s.jsx("div",{className:v(dp,e),"data-replicated":n,children:s.jsx(Wn,{className:v(up,t),value:n,ref:r,...o})}));fp.displayName="TextareaAutoGrow";const Ai=md,Ni=fd,Si=hd,Ci=pd,hp="z-50 px-3 py-1.5 text-xs text-primary-foreground bg-primary animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 overflow-hidden rounded-md",Hn=p.forwardRef(({className:e,sideOffset:t=4,...n},o)=>s.jsx(ma,{ref:o,sideOffset:t,className:v(hp,e),...n}));Hn.displayName=ma.displayName;function pp({doSetFilesFromDropAtom:e,activeAtom:t}){const n=b(t),o=b(e),r=p.useRef(0);p.useEffect(()=>{function a(){r.current++||n(!0)}function i(u){u.preventDefault()}function c(){--r.current||n(!1)}function l(u){u.preventDefault(),r.current=0,n(!1),u.dataTransfer&&o(u.dataTransfer)}const d=document.addEventListener;return d("dragenter",a),d("dragover",i),d("dragleave",c),d("drop",l),()=>{const u=document.removeEventListener;u("dragenter",a),u("dragover",i),u("dragleave",c),u("drop",l)}},[])}function xp({doSetFilesFromDropAtom:e}){const[t]=p.useState(f(!1)),n=g(t);return pp({doSetFilesFromDropAtom:e,activeAtom:t}),s.jsx(s.Fragment,{children:n&&s.jsx("div",{className:"fixed inset-0 grid place-items-center text-5xl font-bold text-slate-50 bg-slate-800/90 z-[99]",children:"Drop it!"})})}const gp="px-1.5 py-1 text-popover-foreground bg-popover border-mani-border border radix-side-top:animate-slide-up radix-side-bottom:animate-slide-down rounded shadow-md grid grid-cols-1",bp="relative pl-8 pr-4 py-2 text-xs text-accent-foreground focus:text-accent-foreground focus:bg-accent data-highlighted:bg-primary-700 data-highlighted:text-primary-100 radix-disabled:opacity-50 rounded select-none cursor-default flex items-center",jp="p-2 h-8 text-mani-foreground bg-mani-background border-mani-border-muted border flex items-center justify-between space-x-1 rounded";function Un({items:e,valueAsLabel:t,value:n,onValueChange:o,className:r}){return s.jsxs(aa,{value:n,onValueChange:o,children:[s.jsx(Sn,{asChild:!0,children:s.jsxs("div",{className:h(jp,r),tabIndex:0,children:[s.jsx(ia,{className:vp}),s.jsx(Qr,{children:s.jsx(cs,{className:"size-4"})})]})}),s.jsx(ea,{children:s.jsx(Cn,{className:"z-50",children:s.jsx(ta,{className:gp,children:e.map((a,i)=>{const c=typeof a=="string",l=c?a:a[0],d=c?t&&typeof l=="string"?l:i.toString():a[1];return s.jsxs(kn,{className:bp,value:d,children:[s.jsx(oa,{children:l}),s.jsx(na,{className:"absolute left-2 inline-flex items-center",children:s.jsx(Ke,{})})]},i)})})})})]})}const wp={onClick:()=>_.error("Not implemented yet")},vp="focus:ring-1 focus:ring-offset-1 focus:ring-mani-ring-activated focus:ring-offset-mani-foreground dark:focus:ring-offset-mani-background focus:outline-none",Nt="pl-2 tracking-tight",js="focus-within:ring-1 focus-within:ring-offset-1 ring-mani-ring focus-within:ring-mani-ring-activated focus-within:ring-offset-mani-background transition-all duration-200",yp="_loader_jy8vm_5",Ap={loader:yp};function Np({className:e,...t}){return s.jsx("div",{className:h(Ap.loader,e),...t})}const Sp="px-2 py-1 h-7 w-full text-mani-foreground font-normal bg-mani-background border-mani-border-muted border rounded-sm outline-none";function sn({stateAtom:e,className:t,onValueStateChange:n,...o}){const[r,a]=T(e);function i(l){a(d=>{var x;const u=l.target.value,m={...d,data:u,error:(x=d.validate)==null?void 0:x.call(d,u),dirty:d.initialData!==u};return n==null||n(m),m})}function c(){a(l=>{var u;return{...l,touched:!0,error:(u=l.validate)==null?void 0:u.call(l,l.data),dirty:l.initialData!==l.data}})}return s.jsx("input",{className:h(Sp,js,t),value:r.data,onChange:i,onBlur:c,...Oe,...o})}function Cp({stateAtom:e,className:t,onValueStateChange:n,...o}){const[r,a]=T(e);function i(l){const d=l.target.checked?"1":"";a(u=>{const m={...u,data:d,dirty:r.initialData!==d};return n==null||n(m),m})}function c(){a(l=>{const d={...l,touched:!0,dirty:r.initialData!==l.data};return n==null||n(d),d})}return s.jsx("input",{className:h("place-self-center size-4 dark-checkbox",t),type:"checkbox",checked:r.data==="1",onChange:i,onBlur:c,...o})}function nn({stateAtom:e,children:t,containerClasses:n,Trigger:o}){const r=g(e),[a,i]=p.useState(!1);return s.jsx(Ai,{children:s.jsxs(Ni,{open:a,onOpenChange:i,children:[s.jsxs("div",{className:h("relative w-full",n),children:[t,s.jsx(Si,{asChild:!0,children:s.jsx("div",{children:s.jsx(o,{error:r.error})})})]}),r.error&&r.touched&&s.jsxs(Ci,{children:[" ",s.jsx(Hn,{align:"end",sideOffset:-2,children:r.error})]})]})})}function ki(e,t){const n=Ne.asRelativeNumber(),o=f(!1),r={validate:ii,options:{initialValidate:!0}};switch(e.type){case"kbd":{let a=function(d){return({get:u,set:m,nextValue:x})=>{t(`${d}-${n}`)({get:u,set:m,nextValue:l})}};const i=He(e.repeat,{validate:Tf(1,9999,"Repeat key"),options:{initialValidate:!0}}),c={charAtom:P(e.char,a("kbd-key")),repeatAtom:I(i,a("kbd-repeat")),shiftAtom:P(e.shift,a("kbd-shift")),ctrlAtom:P(e.ctrl,a("kbd-ctrl")),altAtom:P(e.alt,a("kbd-alt"))},l={type:"kbd",uid5:n,selectedAtom:o,hasErrorAtom:f(!!i.error),original:e,...c};return l}case"pos":{let a=function(m){return({get:x,set:j,nextValue:A})=>{t(`${m}-${n}`)({get:x,set:j,nextValue:u})}};const i=He(e.x,r),c=He(e.y,r),l=He(e.res,r),d={xAtom:I(i,a("pos-x")),yAtom:I(c,a("pos-y")),unitsAtom:le(e.units,a("pos-units")),resAtom:I(l,a("pos-res"))},u={type:"pos",uid5:n,selectedAtom:o,hasErrorAtom:f(!!i.error||!!c.error||!!l.error),original:e,...d};return u}case"dly":{let a=function(d){return({get:u,set:m,nextValue:x})=>{t(`${d}-${n}`)({get:u,set:m,nextValue:l})}};const i=He(e.n,r),c={nAtom:I(i,a("dly-dly"))},l={type:"dly",uid5:n,selectedAtom:o,hasErrorAtom:f(!!i.error),original:e,...c};return l}case"fld":{let a=function(u){return({get:m,set:x,nextValue:j})=>{t(`${u}-${n}`)({get:m,set:x,nextValue:d})}};const i=pn(e.field.mani),l={...si(i,a("fld")),metaField:e.field,fromFile:i,fromFcAtom:f()},d={type:"fld",uid5:n,selectedAtom:o,hasErrorAtom:f(!1),original:e,rowCtx:l};return d}}}function Mo(e,t){return e.map((o,r)=>ki(o,t))}function Fi(e,t){return{char:t(e.charAtom),repeat:t(e.repeatAtom),shift:t(e.shiftAtom),ctrl:t(e.ctrlAtom),alt:t(e.altAtom)}}function Ii(e,t){return{x:t(e.xAtom),y:t(e.yAtom),units:t(e.unitsAtom),res:t(e.resAtom)}}function Mi(e,t){return{n:t(e.nAtom)}}function Ti(e,t){const n=[];switch(e.type){case"kbd":{const{char:o,repeat:r,shift:a,ctrl:i,alt:c}=Fi(e,t);n.push(o,r,a,i,c);break}case"pos":{const{x:o,y:r,units:a,res:i}=Ii(e,t);n.push(o,r,a,i);break}case"dly":{const{n:o}=Mi(e,t);n.push(o);break}}return n.map(o=>({...o,uuid:e.uid5,chunk:e}))}function kp(e,t){return e.map(o=>Ti(o,t)).flat()}function Di(e,t){switch(e.type){case"kbd":{const{char:n,repeat:o,shift:r,ctrl:a,alt:i}=Fi(e,t);return{type:"kbd",char:n.data,repeat:+o.data,shift:+r.data,ctrl:+a.data,alt:+i.data}}case"pos":{const{x:n,y:o,units:r,res:a}=Ii(e,t);return{type:"pos",x:+n.data,y:+o.data,units:!!r.data,res:+a.data}}case"dly":{const{n}=Mi(e,t);return{type:"dly",n:+n.data}}case"fld":{const n=ps(e.rowCtx,t);return{type:"fld",field:e.rowCtx.metaField,editField:n}}}}function Fp(e,t){return e.map(o=>Di(o,t))}function To(e,t,n,o){const r=t===$.login?"login":"cpass",a=n(e.chunksAtom);if(!Ip(a))return[{error:'The action list must contain at least one "Field" action.',tab:r}];const i=kp(a,n),c=new Map,l=i.map(d=>{var A;const u=d,m=u.uuid,x=(A=u.validate)==null?void 0:A.call(u,u.data);if(x){const k=c.get(u.chunk.hasErrorAtom);c.set(u.chunk.hasErrorAtom,k===void 0?1:k+1)}return x?{error:x,tab:r,actionUuid:m}:void 0}).filter(Boolean);return c.forEach((d,u)=>{o(u,!0)}),l}function Ip(e){return e.some(n=>n.type==="fld")}function Mp(e,t,n){return Ti(e,t).some(a=>{var c;return(c=a.validate)==null?void 0:c.call(a,a.data)})}function on(e){return e.map(t=>t.uid5).join("")}function Tp(e,t){return e.char===t.char&&e.repeat===t.repeat&&e.alt===t.alt&&e.ctrl===t.ctrl&&e.shift===t.shift}function Dp(e,t){return e.n===t.n}function Pp(e,t){return e.x===t.x&&e.y===t.y&&e.units===t.units&&e.res===t.res}function Rp(e,t){switch(e.type){case"kbd":return Tp(e,t);case"dly":return Dp(e,t);case"pos":return Pp(e,t);case"fld":return!1}}var Qt;(e=>{function t(o,r){var A;const{fileUs:a,formIdx:i}=o,l=((A=a.parsedSrc.meta)==null?void 0:A[i]).fields||[],d=Al(l);function u(k){function M({get:O,set:U,nextValue:G}){Do(j,k,G,{fileUsCtx:o,maniAtoms:r,get:O,set:U})}return M}function m({get:k,set:M,nextValue:O}){Do(j,"order",O,{fileUsCtx:o,maniAtoms:r,get:k,set:M})}const x=Mo(d,u),j={chunksAtom:I(x,m),initialChunks:on(x),selectedIdxStoreAtom:f(0),onChangeItem:u,onChangeOrder:m,fromFile:d};return j}e.createFormCtx=t;function n(o,r,a){const i=Mo(o.fromFile,o.onChangeItem),c=on(i);a(o.chunksAtom,i),o.initialChunks=c}e.resetChunks=n})(Qt||(Qt={}));function Lp(e,t,n,{fileUsCtx:o,maniAtoms:r,get:a,set:i}){const c=r[o.formIdx].manual;if(!c)return;if(Array.isArray(n)){const d=a(c.chunksAtom),m=on(d)!==c.initialChunks;ee(o,m,`${o.formIdx?"c":"l"}-manual-${t}`);return}let l;if(n.type==="fld"){const d=ps(n.rowCtx,a);l=!ni(d,n.rowCtx.fromFile)}else{const d=Di(n,a);l=!Rp(d,n.original),i(n.hasErrorAtom,Mp(n,a))}ee(o,l,`${o.formIdx?"c":"l"}-manual-${t}`)}const Do=$e(Lp);function $p(e,t,n){if(!t)return;let o;switch(n){case"ArrowUp":{e>0&&(o=e-1);break}case"ArrowDown":{e<t-1&&(o=e+1);break}case"Home":{o=0;break}case"End":{o=t-1;break}}return o}const Gn=f(null,(e,t,n,o)=>{var i;qn(n,e,t);const a=(i=e(n.chunksAtom)[o])==null?void 0:i.selectedAtom;a&&t(a,!0),t(n.selectedIdxStoreAtom,o)}),Zn=f(null,(e,t,n,o,r)=>{var l;e(n.selectedIdxStoreAtom)!==o&&qn(n,e,t);const c=(l=e(n.chunksAtom)[o])==null?void 0:l.selectedAtom;c&&(r=typeof r=="function"?r(e(c)):r,t(c,r),t(n.selectedIdxStoreAtom,r?o:-1))});function qn(e,t,n){var i;const o=t(e.selectedIdxStoreAtom),a=(i=t(e.chunksAtom)[o])==null?void 0:i.selectedAtom;a&&n(a,!1)}const Op=f(null,(e,t,n,o)=>{const r=e(n.selectedIdxStoreAtom),a=e(n.chunksAtom),i=$p(r,a.length,o);i!==void 0&&t(Gn,n,i)});function _p(e){return Nl(p.useCallback((n,o)=>{o(Zn,e,n(e.selectedIdxStoreAtom),!0)},[]))}function Bp(e){return{type:"edit",password:e,useit:!0,displayname:"No name",dbname:Sl()}}function Ep(e){return{mani:Bp(e),ftyp:F.edit,life:ls({fType:F.edit}),path:{},pidx:0,ridx:0,uuid:Ne.asRelativeNumber()}}function zp({type:e,password:t}){switch(e){case"fld":{const n=Ep(t),o=pn(n.mani);return{type:"fld",field:n,editField:o}}case"kbd":return{type:"kbd",char:"tab",repeat:1,shift:0,ctrl:0,alt:0};case"pos":return{type:"pos",x:10,y:20,units:!1,res:0};case"dly":return{type:"dly",n:1e3};default:{const n=e;throw new Error(n)}}}function Vp(e,t,n){const o=zp({type:e,password:t});return ki(o,n)}const Wp=f(null,(e,t,n,o,r)=>{const a=Vp(o,r,n.onChangeItem);qn(n,e,t);const i=e(n.chunksAtom);let c=e(n.selectedIdxStoreAtom);c=pa(c+1,0,i.length-1);const l=[...i];l.splice(c,0,a),t(n.chunksAtom,l),t(Gn,n,c)}),Hp=f(null,(e,t,n,o)=>{const a=[...e(n.chunksAtom)];a.splice(o,1),t(n.chunksAtom,a);const i=Math.max(0,Math.min(o,a.length-1));t(Gn,n,i)}),Up=f(null,(e,t,n,o,r)=>{const a=e(n.chunksAtom);if(r<0||r>=a.length)return;const i=kd(a,o,r);t(n.chunksAtom,i),t(Zn,n,r,!0)});function Pi(e){var d;const{fileUs:t,formIdx:n}=e,r=((d=t.parsedSrc.meta)==null?void 0:d[n]).mani,a=(r==null?void 0:r.options)||{},i=(r==null?void 0:r.detection)||{},c=!!i.web_ourl;return{p1General:{name:a.choosename||"",desc:a.sidekick||"",hint:a.ownernote||"",balloon:a.balooncount||"3",submitType:a.submittype||"",qlName:a.quicklink||"",qlWoCred:a.qlwocred==="1",unkAttrs:a.unknownattributes||""},p2Detect:{caption:i.caption||"",variablecaption:i.variablecaption||"",monitor:a.recheckwindowafterfillin==="1",ourl:i.web_ourl||"",murl:i.web_murl||"",webCheckUrl:!!i.web_checkurl,dlg_tab:i.dlg_tab||"",dlg_class:i.dlg_class||"",dlg_checkexe:!!i.dlg_checkexe,emu_pattern:i.emu_pattern||"",names:i.names||"",names_ext:i.names_ext||"",processname:decodeURIComponent(i.processname||""),commandline:decodeURIComponent(i.commandline||""),reCheck:a.recheckwindowafterfillin==="1"},p3Auth:{aim:a.autoprompt==="1",lock:a.lockfields==="1",auth_pl:a.auth_pl||""},p4QL:{qName:a.quicklink||"",qUrl:i.web_qurl||"",qUse:!a.usequicklink||a.usequicklink==="1"},p5Icon:{id:a.iconkey||"",loc:a.iconlocation||""},isFormWeb:c,formIdx:n}}function Gp(e,t){const{p1General:n,p2Detect:o,p3Auth:r,p4QL:a,p5Icon:i}=e;return{p1General:{nameAtom:P(n.name,t("name"),{validate:Mf}),descAtom:P(n.desc,t("desc")),hintAtom:P(n.hint,t("hint")),balloonAtom:P(n.balloon,t("balloon"),{validate:ii}),submitTypeAtom:P(n.submitType,t("submitType")),qlNameAtom:P(n.qlName,t("qlName")),qlWoCredAtom:le(n.qlWoCred,t("qlWoCred")),unkAttrsAtom:P(n.unkAttrs,t("unkAttrs"))},p2Detect:{captionAtom:P(o.caption,t("caption")),variablecaptionAtom:P(o.variablecaption,t("variablecaption")),monitorAtom:le(o.monitor,t("monitor")),ourlAtom:P(o.ourl,t("ourl")),murlAtom:P(o.murl,t("murl")),webCheckUrlAtom:le(o.webCheckUrl,t("web_checkurl")),dlg_tabAtom:P(o.dlg_tab,t("dlg_tab")),dlg_classAtom:P(o.dlg_class,t("dlg_class")),dlg_checkexeAtom:le(o.dlg_checkexe,t("dlg_checkexe")),emu_patternAtom:P(o.emu_pattern,t("emu_pattern")),namesAtom:P(o.names,t("names")),names_extAtom:P(o.names_ext,t("names_ext")),processnameAtom:P(o.processname,t("processname")),commandlineAtom:P(o.commandline,t("commandline")),reCheckAtom:le(o.reCheck,t("recheckwindowafterfillin"))},p3Auth:{aimAtom:le(r.aim,t("aim")),lockAtom:le(r.lock,t("lock")),auth_plAtom:P(r.auth_pl,t("auth_pl"))},p4QL:{qNameAtom:P(a.qName,t("qname")),qUrlAtom:P(a.qUrl,t("qurl")),qUseAtom:le(a.qUse,t("quse"))},p5Icon:{idAtom:P(i.id,t("id")),locAtom:P(i.loc,t("loc"))},isWebAtom:I(e.isFormWeb,t("isWeb")),formIdx:e.formIdx}}function Zp(e,t,n,o){const{p1General:r,p2Detect:a,p3Auth:i,p4QL:c,p5Icon:l}=e;o(t.p1General.nameAtom,d=>D(d,r.name)),o(t.p1General.descAtom,d=>D(d,r.desc)),o(t.p1General.hintAtom,d=>D(d,r.hint)),o(t.p1General.balloonAtom,d=>D(d,r.balloon)),o(t.p1General.submitTypeAtom,d=>D(d,r.submitType)),o(t.p1General.qlNameAtom,d=>D(d,r.qlName)),o(t.p1General.qlWoCredAtom,d=>D(d,Fe(r.qlWoCred))),o(t.p1General.unkAttrsAtom,d=>D(d,r.unkAttrs)),o(t.p2Detect.captionAtom,d=>D(d,a.caption)),o(t.p2Detect.monitorAtom,d=>D(d,Fe(a.monitor))),o(t.p2Detect.ourlAtom,d=>D(d,a.ourl)),o(t.p2Detect.murlAtom,d=>D(d,a.murl)),o(t.p2Detect.dlg_tabAtom,d=>D(d,a.dlg_tab)),o(t.p2Detect.dlg_classAtom,d=>D(d,a.dlg_class)),o(t.p2Detect.dlg_checkexeAtom,d=>D(d,Fe(a.dlg_checkexe))),o(t.p2Detect.emu_patternAtom,d=>D(d,a.emu_pattern)),o(t.p2Detect.namesAtom,d=>D(d,a.names)),o(t.p2Detect.names_extAtom,d=>D(d,a.names_ext)),o(t.p2Detect.processnameAtom,d=>D(d,a.processname)),o(t.p2Detect.commandlineAtom,d=>D(d,a.commandline)),o(t.p2Detect.reCheckAtom,d=>D(d,Fe(a.reCheck))),o(t.p3Auth.aimAtom,d=>D(d,Fe(i.aim))),o(t.p3Auth.lockAtom,d=>D(d,Fe(i.lock))),o(t.p3Auth.auth_plAtom,d=>D(d,i.auth_pl)),o(t.p4QL.qNameAtom,d=>D(d,c.qName)),o(t.p4QL.qUrlAtom,d=>D(d,c.qUrl)),o(t.p4QL.qUseAtom,d=>D(d,Fe(c.qUse))),o(t.p5Icon.idAtom,d=>D(d,l.id)),o(t.p5Icon.locAtom,d=>D(d,l.loc))}function Fe(e){return e?"1":""}function qp(e,t,n){const{p1General:o,p2Detect:r,p3Auth:a,p4QL:i,p5Icon:c}=e;return{p1General:{name:t(o.nameAtom).data,desc:t(o.descAtom).data,hint:t(o.hintAtom).data,balloon:t(o.balloonAtom).data,qlName:t(o.qlNameAtom).data,submitType:t(o.submitTypeAtom).data,qlWoCred:t(o.qlWoCredAtom).data==="1",unkAttrs:t(o.unkAttrsAtom).data},p2Detect:{caption:t(r.captionAtom).data,variablecaption:t(r.variablecaptionAtom).data,monitor:t(r.monitorAtom).data==="1",ourl:t(r.ourlAtom).data,murl:t(r.murlAtom).data,webCheckUrl:t(r.webCheckUrlAtom).data==="1",dlg_tab:t(r.dlg_tabAtom).data,dlg_class:t(r.dlg_classAtom).data,dlg_checkexe:t(r.dlg_checkexeAtom).data==="1",emu_pattern:t(r.emu_patternAtom).data,names:t(r.namesAtom).data,names_ext:t(r.names_extAtom).data,processname:encodeURIComponent(t(r.processnameAtom).data),commandline:encodeURIComponent(t(r.commandlineAtom).data),reCheck:t(r.reCheckAtom).data==="1"},p3Auth:{aim:t(a.aimAtom).data==="1",lock:t(a.lockAtom).data==="1",auth_pl:t(a.auth_plAtom).data},p4QL:{qName:t(i.qNameAtom).data,qUrl:t(i.qUrlAtom).data,qUse:!!t(i.qNameAtom).data.trim()},p5Icon:{id:t(c.idAtom).data,loc:t(c.locAtom).data},isFormWeb:t(e.isWebAtom),formIdx:e.formIdx}}function Po(e,t,n,o){const{p1General:r,p2Detect:a,p3Auth:i,p4QL:c,p5Icon:l}=e,d=t===$.login?{...r,...a,...i,...c,...l}:{...a,...i,...c,...l};return Object.entries(d).map(([m,x])=>{var M;const j=n(x),A=(M=j.validate)==null?void 0:M.call(j,j.data);return A?{error:A,tab:"options"}:void 0}).filter(Boolean)}var rn;(e=>{function t(n,o){const r=c=>({get:l,set:d,nextValue:u})=>{Xp(c,u,{fileUsCtx:n,maniAtoms:o,get:l,set:d})},a=Pi(n);return Gp(a,r)}e.createAtoms=t})(rn||(rn={}));function Kp(e,t,{fileUsCtx:n,maniAtoms:o,get:r,set:a}){o[n.formIdx].options,e==="name"&&a(n.fileUs.parsedSrc.stats.loginFormChooseNameAtom,t.data),ee(n,t.dirty,`${n.formIdx?"c":"l"}-o-${e}`),console.log(`%c-------- "${e}" %s`,"color: darkgoldenrod; font-size: 0.6rem;",`nextValue ${JSON.stringify(t)}`)}const Xp=$e(Kp);function Ro(e,t){var l;const{fileUs:n,formIdx:o}=e,r=(l=n.parsedSrc.meta)==null?void 0:l[o];if(!r)return;let a,i;return r.disp.isScript?i=Qt.createFormCtx(e,t):a=Ys.createNormalCtx(e,t),{normal:a,manual:i,options:rn.createAtoms(e,t),fileUsCtx:e}}function Ri(e,t){const n=[],o=n;return n.push(Ro({fileUs:e,fileUsAtom:t,formIdx:$.login},o)),n.push(Ro({fileUs:e,fileUsAtom:t,formIdx:$.cpass},o)),n}const Qp=f(null,(e,t,{maniAtoms:n})=>{const o=[],[r,a]=n;if(r!=null&&r.normal){let i=0;r.normal.rowCtxs.forEach((c,l)=>{e(c.useItAtom)&&i++}),i||o.push({error:"No login fields selected",tab:"login"})}if(a!=null&&a.normal){let i=0;a.normal.rowCtxs.forEach((c,l)=>{e(c.useItAtom)&&i++}),i||o.push({error:"No password change fields selected",tab:"cpass"})}return o.length?o:void 0});function Lo(e,t,n){const o=n(Qp,{maniAtoms:e})||[],[r,a]=e;if(r||o.push({error:"Login form is missing",tab:"options"}),o.length){w.right.mani.activeTab=o[0].tab;const i=o.map((c,l)=>s.jsx("div",{children:c.error},l));return _.error(s.jsx("div",{className:"flex flex-col",children:i})),!0}}const Jp=f(null,(e,t,{maniAtoms:n})=>{const[o,r]=n,a=[];if(o!=null&&o.manual){const i=To(o.manual,$.login,e,t);i.length&&a.push(...i)}if(r!=null&&r.manual){const i=To(r.manual,$.cpass,e,t);i.length&&a.push(...i)}return a.length?a:void 0});function $o(e,t,n){const o=n(Jp,{maniAtoms:e});if(o){w.right.mani.activeTab=o[0].tab;const r=o.map((a,i)=>s.jsx("div",{children:a.error},i));return _.error(s.jsx("div",{className:"flex flex-col",children:r})),!0}}const Yp=f(null,(e,t,{maniAtoms:n})=>{const[o,r]=n,a=[];if(o){const i=Po(o.options,$.login,e);i.length&&a.push(...i)}if(r){const i=Po(r.options,$.cpass,e);i.length&&a.push(...i)}return a.length?a:void 0});function ex(e,t,n){const o=n(Yp,{maniAtoms:e});if(o){w.right.mani.activeTab="options";const r=o.map((a,i)=>s.jsx("div",{children:a.error},i));return _.error(s.jsx("div",{className:"flex flex-col",children:r})),!0}}function tx(e,t,n){if(ex(e,t,n))return!0;const[o,r]=e;if(o!=null&&o.normal&&Lo(e,t,n)||r!=null&&r.normal&&Lo(e,t,n)||o!=null&&o.manual&&$o(e,t,n)||r!=null&&r.manual&&$o(e,t,n))return!0}function sx(e,t){const{get:n}=t;return ri(e.submitCtx,n)}function nx(e,t){const{get:n}=t;return e.rowCtxs.map(r=>{const a=ps(r,n),i=oi(a);return{metaField:r.metaField,editField:i}})}function ox({field:e,useIt:t}){const n={...e};return t!==void 0&&(n.useit=t),n}function Li({from:e,maniField:t,ftyp:n,isSubmit:o}){const r=e.rfieldform===Q.noname&&t.rfieldform===Q.brokenFcLink,a={...t,...e,submit:o,rfieldform:r?Q.fieldcatalog:e.rfieldform};return a.value=rx(e.value,n),a}function rx(e,t){const n=t===F.check||t===F.radio,o=(e||"").trim().toLowerCase();return n?o&&o!=="0"&&o!=="false"&&o!=="no"&&o!=="off"?"1":void 0:o}function ax(e,t){const n=[],o=[];t.forEach((a,i)=>{if(!a.newMani)return;const c=a.newMani;o.push("   "),r({name:" type: ",value:`${c.type.padEnd(6," ")}`,colorValue:c.type==="button"?"color: #8eacf8":"color: #888888"}),r({name:" useIt: ",value:c.useit?"true":"    ",colorValue:c.useit?"color: #00a000":"color: #ababab"}),r({name:" uuid: ",value:`${a.meta.uuid}`,colorValue:"color: #ababab; font-size: 0.5rem"}),r({name:" name: ",value:`${c.displayname||"???no name"}`,colorValue:"color: var(--console-color-yellow); font-size: 0.6rem"}),r({name:"",value:"",colorValue:"color: black"}),i!==t.length-1&&o.push(`
`)}),console.log(`${e}
${o.join("")}`,...n);function r({name:a,value:i,colorValue:c,colorName:l}){o.push(`%c${a}%c${i}`),n.push(l||"color: gray"),n.push(c||"color: #d58e00")}}function ix(e,t,n){const o=Object.values(e);o.length&&console.log("newSortedFields2",JSON.stringify(o.map(r=>{var a,i;return`useIt: ${(a=r.newMani)==null?void 0:a.useit}, name: ${(i=r.newMani)==null?void 0:i.displayname}`}),null,2)),ax(`newSortedFields doFormSubmit=${t}`,n)}function cx(e,t,n){const o=lx(n,t),r=dx(e,n),{newSubmitsByUuid:a,doFormSubmit:i}=ux(e,n),c=Object.entries({...o,...r,...a});c.forEach(([u,m])=>{m.newMani=m.newMani||m.meta.mani});const l=c.sort(([u,m],[x,j])=>m.meta.pidx-j.meta.pidx).map(([u,m])=>m);return ix(a,i,l),{newFields:l.map(u=>u.newMani),submittype:i}}function lx(e,t){var r;const n=(r=e.fileUs.parsedSrc.meta)==null?void 0:r[t];return n?n.fields.reduce((a,i)=>(a[i.uuid]={meta:i,newMani:void 0},a),{}):{}}function dx(e,t){return nx(e,t).reduce((r,{metaField:a,editField:i})=>{const c=Li({from:i,maniField:a.mani,ftyp:a.ftyp,isSubmit:!1});return r[a.uuid]={meta:a,newMani:c},r},{})}function ux(e,t){const n=sx(e,t);let o=n.selected,r;return e.submitCtx.isWeb&&(r=o?Ws.dosumbit:Ws.nosumbit,o=-1),{newSubmitsByUuid:n.buttonNameItems.reduce((i,c,l)=>(c.metaField&&(i[c.metaField.uuid]={meta:c.metaField,newMani:ox({field:c.metaField.mani,useIt:l===o})}),i),{}),doFormSubmit:r}}function mx(e,t,n){const{get:o}=n,r=o(e.chunksAtom),a=Fp(r,o);return Cl(a).map(l=>{const d=oi(l.chunk.editField),u=kl(d),m=Li({from:d,maniField:l.chunk.field.mani,ftyp:u,isSubmit:!1});return m.path=Fl(l.sn),m})}function fx(e,t,n){const{get:o}=n,r=qp(e,o);return{detection:hx(r),options:px(r,t)}}function hx(e){const{p2Detect:t}=e;return{caption:t.caption,variablecaption:t.variablecaption,web_ourl:t.ourl,web_murl:t.murl===t.ourl?void 0:t.murl,web_qurl:e.p4QL.qUrl===t.ourl?void 0:e.p4QL.qUrl,web_checkurl:t.webCheckUrl,dlg_class:t.dlg_class,dlg_tab:t.dlg_tab,dlg_checkexe:t.dlg_checkexe,emu_pattern:t.emu_pattern,names:t.names,names_ext:t.names_ext,processname:t.processname,commandline:t.commandline}}function px(e,t){const{p1General:n,p3Auth:o,p4QL:r,p5Icon:a,p2Detect:i}=e,c=n.submitType==="dosubmit"||n.submitType==="nosubmit"?n.submitType:void 0,l=t===$.cpass||o.auth_pl==="0"?void 0:o.auth_pl;return{choosename:n.name,sidekick:n.desc,ownernote:n.hint,quicklink:n.qlName,auth_pl:l,balooncount:n.balloon,autoprompt:o.aim?"1":void 0,lockfields:o.lock?"1":void 0,submittype:c,iconkey:a.id,iconlocation:a.loc,usequicklink:r.qUse?"1":"2",recheckwindowafterfillin:i.reCheck?"1":void 0,qlwocred:n.qlWoCred?"1":void 0,unknownattributes:n.unkAttrs}}function xx(e){return{displayname:e.dispname,dbname:e.dbname,ownernote:e.ownernote||"",...hn.valueLife4Catalog(e)}}function gx(e){const t={dispname:e.displayname,dbname:e.dbname,ownernote:e.ownernote,...Il(e.fType)};return hn.valueLife2Mani(e,t),t}function ot(e){const t=Object.entries(e).filter(([n,o])=>!!o);return t.length?Object.fromEntries(t):void 0}function bx(e){const{maniAtoms:t}=e,[n,o]=t;jx(e),Oo(n,$.login,e),Oo(o,$.cpass,e)}function jx(e){var r,a;const{newMani:t}=e,{fileUs:n}=e;let o=(r=n.parsedSrc.mani)==null?void 0:r.descriptor;o=o?{...o}:{id:`{${fn()}}`,created:Zt.timeNowAsDpTime()},o.modified=Zt.timeNowAsDpTime(),o.version="2.4.5",t.descriptor=o,(a=n.parsedSrc.mani)!=null&&a.options&&(t.options=n.parsedSrc.mani.options)}function Oo(e,t,n){if(e){const{newMani:o}=n,{detection:r,options:a}=fx(e.options,t,n);o.forms=o.forms||[],o.forms[t]={detection:r,options:a,fields:[]};const i=o.forms[t];if(e.normal){const{newFields:c,submittype:l}=cx(e.normal,t,n);i.fields=c,i.options.submittype=l}else if(e.manual){const c=mx(e.manual,t,n);i.fields=c}wx(`${t?"cpass":"login"} fields:
`,i.fields)}}function wx(e,t,n){const o=t.map(r=>{const a=ot({...r});return a==null||delete a.path_ext,a});console.log(`%c${e}`,"color: cyan",JSON.stringify(o,null,2))}function vx(e){var n;return{descriptor:e.descriptor,options:e.options,forms:(n=e.forms)==null?void 0:n.map(yx).filter(Boolean)}}function yx(e,t){let n={fcontext:t===$.cpass?{type:"pchange",name:"1"}:void 0,detection:Ax(e.detection),options:Nx(e.options),fields:e.fields.map(Sx)};return n=ot(n),n}function Ax(e){let t={...e,...e.web_checkurl&&{web_checkurl:"1"}};return t=ot(t),t}function Nx(e){const t={...e,...e.submittype&&{submittype:e.submittype},...e.autoprompt&&{autoprompt:"1"}};return t.balooncount==="3"&&delete t.balooncount,ot(t)}function Sx(e){let t={...e};return t=ot(t),t}function Cx(e,t,n){const o=t(e);let r;if(o.fceAtomsForFcFile)r=Fx(o.fceAtomsForFcFile,t);else{const a=t(o.maniAtomsAtom);a&&(r=kx(o,a,t,n))}if(r){const{xml:a,error:i}=r;if(i||!a){console.error("Error converting to xml",i),Ml({error:i});return}return a}}function kx(e,t,n,o){if(tx(t,n,o))return;const r={forms:[]};bx({fileUs:e,maniAtoms:t,newMani:r,get:n});const a=vx(r);return Wa({mani:a})}function Fx(e,t,n){const o=t(e.aboutAtom),r=t(e.allAtom),a={descriptor:{id:o||fn()},names:r.map(c=>ot(gx(c.fieldValue))).filter(Boolean)};return Wa({fc:a})}const St=f(null,async(e,t,n,o)=>{const r=e(n);!hs({fileUs:r})||Cx(n,e,t)}),Ix=f(null,(e,t)=>{const n=e(ne);n&&t(St,n)}),Mx=f(null,(e,t,n)=>{const o="newFilename",r=e(n);!hs({fileUs:r})||!e(r.maniAtomsAtom)||(t(St,n,o),console.log("saved as",r.fileCnt.fname))}),$i=f(null,(e,t)=>{e(Le).forEach(o=>{const r=e(o);hs({fileUs:r})&&t(St,o)})});function Tx(e,t,n){const{get:o,set:r}=n,{rowCtxs:a,submitCtx:i}=e;a.forEach(l=>{const d=l.fromFile;xf(d,l,o,r)});const c=i.fromFile;Sf(c,i,o,r)}function Dx(e,t,n){const{get:o,set:r}=n;Qt.resetChunks(e,o,r)}function Px(e,t,n){const{get:o,set:r}=n,a={fileUs:n.fileUs,fileUsAtom:n.fileUsAtom,formIdx:t},i=Pi(a);Zp(i,e,o,r),t===$.login&&r(a.fileUs.parsedSrc.stats.loginFormChooseNameAtom,i.p1General.name)}function Rx(e){const{maniAtoms:t}=e,[n,o]=t;_o(n,$.login,e),_o(o,$.cpass,e)}function _o(e,t,n){e&&(Px(e.options,t,n),e.normal&&Tx(e.normal,t,n),e.manual&&Dx(e.manual,t,n))}const Lx=f(null,(e,t,n)=>{const o=e(n);if(hs({fileUs:o})){if(o.fceAtomsForFcFile)_.info("Resetting field catalog is not a good idea. Do it only if you know what you are doing.");else{const r=e(o.maniAtomsAtom);r&&(Rx({fileUs:o,fileUsAtom:n,maniAtoms:r,get:e,set:t}),ff({fileUs:o}))}console.log("reset",o.fileCnt.fname)}}),ne=f(void 0),$x=f(null,(e,t,{newAtom:n})=>{if(e(ne)===n){t(ne,void 0);return}t(Oi,n),t(ne,n)}),Kn=f(e=>{const t=e(ne);return t?e(t):void 0}),Oi=f(null,(e,t,n)=>{if(n){const o=e(n);o.parsedSrc.mani&&!e(o.maniAtomsAtom)&&t(o.maniAtomsAtom,Ri(o,n))}}),_i="field_catalog.dpn";let we;function Bi(){return!!(we!=null&&we.fceAtomsForFcFile)}function Xn(){if(!(we!=null&&we.fceAtomsForFcFile))throw new Error("root fc not set yet");return we.fceAtomsForFcFile}function Ei(e){we=e,e&&(e.parsedSrc.stats.isFCatRoot=!0)}function zi(e){if(!e.length)return"";let t=e[0];for(const n of e){const o=n;o.length<t.length&&(t=o)}return t}function Ox(e){var r;if(!e.length)return;let t=Hs((r=e[0])==null?void 0:r.webkitRelativePath),n=e[0];for(let a=1;a<e.length;a++){const i=e[a],c=Hs(i==null?void 0:i.webkitRelativePath);if(!c||!i.directoryHandle)continue;(!t||c.length<t.length)&&(t=c,n=i)}return{hadle:n.directoryHandle,rpath:t,fromMain:!1}}const gt={rpath:"",hadle:void 0,fromMain:!1};function bt({rpath:e,dir:t,fromMain:n}){gt.rpath=e,gt.hadle=t,gt.fromMain=n}function _x(e,t,n,o){var m;if((m=t.fceCtx.inData)!=null&&m.openItemPickerDlg)return;const{fceCtx:r,name:a,nextValue:i}=t,c=e.beforeEdit,l=e.fceMeta.uuid;let d=!1,u;switch(a){case"nameAtom":{u="name";const x=i;d=x!==c.displayname,e.fieldValue.displayname=x;break}case"ownernoteAtom":{u="note";const x=i;d=x!==c.ownernote,e.fieldValue.ownernote=x;break}}u&&(ee(r.fceAtoms,d,`${u}-${l}`),Bx(e,t,d,u))}function Bx(e,t,n,o,r){const{fceCtx:a}=t;if(!a.fceAtoms.fileUs.parsedSrc.stats.isFCatRoot)return;const i=e.fieldValue,c=new Fd;c.add({name:"fceItem.change:",value:`'${o}'`,cValue:"color: #ea900a"}),c.add({name:", changed:",value:n?"true, ":"false,",cValue:n?"color: #00a000":"color: #ababab"}),c.add({name:" dbid:",value:`'${i.dbname}'`}),c.add({name:", disp:",value:`'${i.displayname}'`,cValue:"color: #8eacf8"}),console.log(...c.toFormated(""))}const Ex=f(null,(e,t,n)=>{const o=e(n.fceCtx.selectedItemAtom);o&&zx(o,n,e,t)}),zx=$e(_x,500),ws=f(null,(e,t,{fceCtx:n,idx:o,doubleClick:r})=>{var l;e(n.selectedIdxStoreAtom)!==o&&Vx(n,e,t);const c=e(n.shownAtom)[o];return c&&(c.editor[n.isPicker?"isSelectedInPicker":"isSelectedInView"]=!0,t(n.selectedIdxStoreAtom,o),t(n.selectedItemAtom,c),Wx({fceCtx:n,selectedItem:c,get:e,set:t})),r&&((l=n.onItemDoubleClick)==null||l.call(n,c)),c});function Vx(e,t,n){const o=t(e.selectedIdxStoreAtom),a=t(e.shownAtom)[o];a&&(a.editor[e.isPicker?"isSelectedInPicker":"isSelectedInView"]=!1,n(e.selectedIdxStoreAtom,-1))}ls({fType:F.edit});function Wx({fceCtx:e,selectedItem:t,get:n,set:o}){const{dispNameAtom:r,ownernoteAtom:a}=e.fcePropAtoms;o(r,(t==null?void 0:t.fieldValue.displayname)||""),o(a,(t==null?void 0:t.fieldValue.ownernote)||"")}const Hx=e=>f(t=>!!t(e.selectedItemAtom)),Ux=f(null,(e,t,{fceCtx:n})=>{var c,l;const o=e(n.shownAtom),r=!((c=n.inData)!=null&&c.openItemPickerDlg),a=(l=n.inData)==null?void 0:l.dbid;let i;r||!a?i=o.findIndex(d=>d.editor[n.isPicker?"isSelectedInPicker":"isSelectedInView"]):(i=o.findIndex(d=>d.fieldValue.dbname===a),o.forEach(d=>d.editor.isSelectedInPicker=!1)),t(ws,{fceCtx:n,idx:i,doubleClick:!1})}),Gx=f(null,(e,t,n)=>{if(!n)return;const r=e(Xn().allAtom).reduce((a,i)=>(a.set(i.beforeEdit.dbname,i),a),new Map);n.forEach(a=>{var l;const i=e(a);if(!i.parsedSrc.mani||!Vi(i))return;t(Oi,a);const c=e(i.maniAtomsAtom);if(c){for(const d of c)if(d!=null&&d.normal){const u=((l=d.normal)==null?void 0:l.rowCtxs)||[];for(const m of u){if(m.metaField.ftyp===F.button||m.metaField.mani.rfieldform!==Q.fieldcatalog)continue;const x=r.get(m.fromFile.dbname);x?t(m.fromFcAtom,x):m.metaField.mani.rfieldform=Q.brokenFcLink}}else if(d!=null&&d.manual){const u=e(d==null?void 0:d.manual.chunksAtom);for(const m of u){if(m.type!=="fld"||m.original.field.mani.rfieldform!==Q.fieldcatalog)continue;const x=r.get(m.rowCtx.fromFile.dbname);x?t(m.rowCtx.fromFcAtom,x):m.rowCtx.metaField.mani.rfieldform=Q.brokenFcLink}}}})}),Zx=f(null,(e,t,{fceItem:n})=>{var r;const o=e(Le);for(const a of o){const i=e(a);if(!i.parsedSrc.mani||!Vi(i))continue;const c=e(i.maniAtomsAtom);if(c){for(const l of c)if(l!=null&&l.normal){const d=((r=l.normal)==null?void 0:r.rowCtxs)||[];for(const u of d)u.metaField.ftyp!==F.button&&e(u.fromFcAtom)===n&&(t(u.fromFcAtom,void 0),u.metaField.mani.rfieldform=Q.noname)}else if(l!=null&&l.manual){const d=e(l==null?void 0:l.manual.chunksAtom);for(const u of d)u.type==="fld"&&e(u.rowCtx.fromFcAtom)===n&&(t(u.rowCtx.fromFcAtom,void 0),u.rowCtx.metaField.mani.rfieldform=Q.noname)}}}});function Vi(e){if(!e.parsedSrc.mani)return!1;const t=e.parsedSrc.mani.forms||[];for(const n of t){const o=n.fields||[];for(const r of o)if(r.rfieldform===Q.fieldcatalog)return!0}return!1}const Wi=f(null,(e,t,n,o)=>{const r=Bu(o),a=[...e(n.fceAtoms.allAtom),r];t(n.fceAtoms.allAtom,a);const i=a.length-1,c=`New ${o===F.edit?"text":"password"} ${i+1}`;return r.fceMeta.index=i,r.beforeEdit.displayname=c,r.fieldValue.displayname=c,t(ws,{fceCtx:n,idx:i,doubleClick:!1}),t(n.selectedItemAtom,r),ee(n.fceAtoms,!0,`add-${r.fceMeta.uuid}`),r}),Hi=f(null,(e,t,n)=>{const o=n.fceAtoms,r=e(n.shownAtom),a=e(n.selectedIdxStoreAtom),i=r[a];if(!i)return;t(Zx,{fceItem:i});const l=e(o.allAtom).filter(x=>x.fceMeta.uuid!==i.fceMeta.uuid);t(o.allAtom,l);const d=a>0?a-1:a<=l.length-1?a:-1,u=l[d];t(ws,{fceCtx:n,idx:d,doubleClick:!1}),t(n.selectedItemAtom,u);const m=i.fceMeta.uuid;hf(o,`add-${m}`)?(ee(o,!1,`add-${m}`),ee(o,!1,`name-${m}`),ee(o,!1,`note-${m}`),ee(o,!1,`life-${m}`)):ee(o,!0,`del-${m}`)}),qx=f(null,(e,t,{container:n,fceCtx:o,scrollToIdx:r})=>{if(!n)return;const a=r??e(o.selectedIdxStoreAtom),c=e(o.shownAtom)[a];if(a===-1||!c)return;const l=n.querySelector("[data-radix-scroll-area-viewport]"),d=n.querySelector(`[data-list-uiid="${c.fceMeta.uuid}"]`);if(!l||!d)return;const u=a*d.clientHeight,m=l.scrollTop;return u>=m&&u<=m+l.clientHeight-d.clientHeight||u>l.clientHeight-d.clientHeight&&(l.scrollTop=a*d.clientHeight-l.clientHeight/2),c});f(null,(e,t,{container:n,fceCtx:o})=>{if(!n||!e(o.shownAtom).length)return;const a=n.querySelector("[data-radix-scroll-area-viewport]");a&&(a.scrollTop=o.scrollTo)});function Kx(e,t){const{search:n,showText:o,showPassword:r,ascending:a}=t;let i=e.filter(c=>{const{fType:l,displayname:d}=c.fieldValue;return!o&&l===F.edit||!r&&l===F.psw?!1:n?o&&d.toLowerCase().includes(n.toLowerCase()):!0});return a!==void 0&&(i=i.sort((c,l)=>a?c.fieldValue.displayname.localeCompare(l.fieldValue.displayname):l.fieldValue.displayname.localeCompare(c.fieldValue.displayname))),i}function Xx(e){return{search:"",showText:(e==null?void 0:e.showTxt)??!0,showPassword:(e==null?void 0:e.showPsw)??!0,ascending:void 0}}function Ui({fceAtoms:e,inData:t,closeFldCatDialog:n}){function o({fceCtx:u,name:m,nextValue:x,set:j}){j(Ex,{fceCtx:u,name:m,nextValue:x})}function r(u){return({get:m,set:x,nextValue:j})=>{o({fceCtx:d,name:u,set:x,nextValue:j})}}const a=f(Xx(t)),i=Jx(e.allAtom,a),c=t==null?void 0:t.outBoxAtom,d={inData:t,fceAtoms:e,isPicker:!!(t!=null&&t.openItemPickerDlg),isMaster:!1,selectedIdxStoreAtom:f(-1),selectedItemAtom:f(void 0),scrollTo:0,focusGridAtom:f(!1),filterAtom:a,shownAtom:i,fcePropAtoms:Qx(r),onItemDoubleClick:c?u=>n({selectedItem:u}):void 0,onChangeFcePropValue:o};return d.hasSelectedItemAtom=Hx(d),d}function Qx(e){function t(o){function r({get:a,set:i,nextValue:c}){e(o)({get:a,set:i,nextValue:c})}return r}return{dispNameAtom:I("",t("nameAtom")),ownernoteAtom:I("",t("ownernoteAtom")),useItAtom:f(!0),valueLifeAtom:I(ls({fType:F.edit}),t("valueLifeAtom"))}}function Jx(e,t){return f(n=>{const o=n(t);return Kx(n(e),o)})}function Yx(){const e=Ha(null);e.fpath=gt.rpath,e.fname=_i;const t={fileCnt:e,parsedSrc:_m(e),uiState:{isGroupAtom:f(!1),isCurrentAtom:f(!1)},maniAtomsAtom:f(null),fceAtomsForFcFile:void 0,fceAtomsRefForMani:void 0};return t.fceAtomsForFcFile=Gi({fileUs:t,desc:void 0,items:void 0}),t}function e1(e){const t=e.parsedSrc.fcat;if(!t)throw new Error("This is not a field catalog file");if(!e.fceAtomsForFcFile){const n=t1(t.names),o=Gi({fileUs:e,desc:t.descriptor,items:n});e.fceAtomsForFcFile=o}}function t1(e){return e.map((n,o)=>{const r=xx(n);return{fieldValue:X({...r}),beforeEdit:r,fceMeta:Na(o),editor:X({isSelectedInView:!1,isSelectedInPicker:!1})}})}function Gi({fileUs:e,desc:t,items:n}){const o={fileUs:e,aboutAtom:f((t==null?void 0:t.id)||""),allAtom:f(n||[])},r={openItemPickerDlg:!1,dbid:void 0,showTxt:!0,showPsw:!0,outBoxAtom:void 0};return o.viewFceCtx=Ui({fceAtoms:o,inData:r,closeFldCatDialog:()=>{}}),o}const De=f([]),Pe=f([]),s1=f([]),Qn=7;function Bo(e,t,n,o){const r=t?F.psw:F.edit;return e.filter(i=>i.fieldValue.fType===r).sort((i,c)=>n(c.fceMeta.mruAtom)-n(i.fceMeta.mruAtom)).slice(0,Qn)}const n1=f(null,(e,t)=>{if(!Bi()){t(De,[]),t(Pe,[]);return}const n=e(Xn().allAtom),o=Bo(n,!1,e),r=Bo(n,!0,e);t(De,o),t(Pe,r)});f(null,(e,t,{item:n})=>{const o=n.fieldValue.fType===F.psw;let r=e(o?Pe:De);r.unshift(n),r=r.slice(0,Qn),t(o?Pe:De,r)});f(null,(e,t,{item:n})=>{const o=n.fieldValue.fType===F.psw;let r=e(o?Pe:De);r=r.filter(a=>a.fceMeta.uuid!==a.fceMeta.uuid),t(o?Pe:De,r)});const Jn=f([]),o1=f(e=>Zi(e(Jn),F.edit)),r1=f(e=>Zi(e(Jn),F.psw)),a1=f(e=>t=>{if(t){const n=e(Jn);return i1(n,t)}});function Zi(e,t){return e.filter(n=>n.fieldValue.fType===t)}function i1(e,t){return e.find(n=>n.fieldValue.dbname===t)}function c1(e,t){return e.filter(n=>n.fceMeta.uuid!==t.fceMeta.uuid)}function l1(e,t){let n=e;return t&&(n=c1(e,t),n.unshift(t),n=n.slice(0,Yn)),n}const Yn=7,d1=f(e=>{let t=e(o1);return t=t.slice(0,Yn),t}),u1=f(e=>{let t=e(r1);return t=t.slice(0,Yn),t});f(e=>{function t(n,o){const r=e(a1)(o),a=e(n?u1:d1);return{mruItems:l1(a,r),thisFceItem:r}}return t});function m1(e,t){const n=e!==F.edit&&e!==F.psw,o=e===F.psw,r=g(n?s1:o?Pe:De);return p.useMemo(()=>{if(n)return[Eo];const i=o?F.psw:F.edit,c=r.filter(d=>d.fieldValue.fType===i);t&&(c.findIndex(u=>u.fieldValue.dbname===t.fieldValue.dbname)===-1&&c.push(t),c.splice(Qn+1));const l=c.map(f1);return l.length>0&&l.unshift("-"),l.unshift(Eo),l.push("-",h1),l},[n,o,t,r])}function f1(e){return[e.fieldValue.displayname,{key:e.fieldValue.dbname,fceItem:e}]}const Eo=["Not from catalog","-1"],h1=["More fields ...","-2"];function zo(e,t,n){e?p1(e):Ei(void 0),n(n1)}function p1(e){var o;let t;const n=gt.rpath.toLowerCase();e.reduce((r,a)=>{if(a.parsedSrc.stats.isFCat){const i=a.fileCnt.fpath.toLowerCase(),c=a.fileCnt.fname.toLowerCase();e1(a),c===_i&&i===n?t=a:r[`${i}/${c}`]=a}return r},{}),t||(t=Yx(),e.push(t)),e.forEach(r=>{!r.parsedSrc.stats.isFCat&&r.fileCnt.fpath.toLowerCase().match(RegExp(`^${n}(?:[/\\][a-c])*$`))&&(r.fceAtomsRefForMani=t.fceAtomsForFcFile)}),(o=t.fceAtomsForFcFile)!=null&&o.viewFceCtx&&(t.fceAtomsForFcFile.viewFceCtx.isMaster=!0),Ei(t)}const wt=f(null),qi=f(null,(e,t,{fceAtoms:n,inData:o})=>{n=n||Xn();function r(i){t(Ki,i)}const a=Ui({fceAtoms:n,inData:o,closeFldCatDialog:r});t(wt,a)}),eo=f(null,(e,t)=>{t(wt,null)}),Ki=f(null,(e,t,n)=>{var a;const o=(a=e(wt))==null?void 0:a.inData,r=o==null?void 0:o.outBoxAtom;r&&t(r,n),o&&t(wt,null)});function x1(){return f(null)}const g1=f(!1),Ct=f(null,async(e,t,n)=>{n.length>100&&(Zs.msg="Parsing...",await wd(100)),t(ne,void 0),zo(void 0,e,t),t(Sm),ce.normal=0,ce.manual=0,ce.empty=0,ce.fc=0;const o=[],r=n.filter(i=>i.size).map(i=>{const c=$m(i);return c.parsedSrc.fcat?ce.fc++:gr(c.parsedSrc.meta)?ce.empty++:xn(c.parsedSrc.meta)?ce.manual++:ce.normal++,c}).filter(i=>{const c=i.fileCnt.failed||i.fileCnt.notOur||!i.parsedSrc.mani&&!i.parsedSrc.fcat;return c&&(i.fileCnt.failed&&console.error(i.fileCnt.raw),o.push(i)),!c});zo(r,e,t),b1(r),o.length&&j1(o);const a=r.map(i=>f(i));t(Gx,a),t(Le,a),Zs.msg=""});function b1(e){e.sort((t,n)=>t.parsedSrc.fcat&&!n.parsedSrc.fcat?1:!t.parsedSrc.fcat&&n.parsedSrc.fcat?-1:t.fileCnt.fname.localeCompare(n.fileCnt.fname)),e.forEach((t,n)=>t.fileCnt.idx=n)}function j1(e){const t=e.length>1,n=t?"are":"is",o=t?"files":"file",r=t?"":" ",a=s.jsxs("div",{className:"max-h-[50vh] text-foreground dark:text-background overflow-auto smallscroll",children:[s.jsx("span",{className:"font-semibold",children:`There ${n} ${e.length} unsupported ${o}:`}),e.map(i=>s.jsx("span",{className:t?"block":void 0,children:`${r}"${i.fileCnt.fname}"`},i.fileCnt.unid))]});_.warning(a,{})}class an{constructor({parent:t,handle:n,entry:o,file:r,path:a}){N(this,"parent",null);N(this,"handle",null);N(this,"entry",null);N(this,"file",null);N(this,"path");this.parent=t||null,this.handle=n||null,this.entry=o||null,this.file=r||null,this.path=a||""}}const Xi=["dpm","dpn"];async function w1(e){if(e){const t=await Tl({recursive:!0,mode:"readwrite"});if(v1(t))return bt({rpath:t[0].name,dir:t[0],fromMain:!1}),[];{const n=t,o=Ox(n);return bt({rpath:(o==null?void 0:o.rpath)||"",dir:o==null?void 0:o.hadle,fromMain:!1}),n}}else{let t=await Dl({multiple:!0});return bt({rpath:"",dir:void 0,fromMain:!1}),t}}function v1(e){return e.length===1&&e[0].kind==="directory"}function y1(e){return!!e.handle}function A1(e){return!!e.directoryHandle}async function*Qi(e,t){for await(const n of e.values())if(n.kind==="file")yield[t,n,e];else if(n.kind==="directory"){const o=`${t}/${n.name}`;yield[o,n,e];for await(const[r,a,i]of Qi(n,o))yield[r,a,i]}}async function N1(e){const t=[],n=e.map(o=>o.getAsFileSystemHandle());for await(const o of n)if(o)if(o.kind==="file")t.push(["",o,null]);else{t.push([o.name,o,o]);for await(const r of Qi(o,o.name))t.push(r)}return t}function Ji(e){return e.isFile}function Yi(e){return e.isDirectory}function S1(e){return typeof(e==null?void 0:e.showDirectoryPicker)=="function"}function C1(e){return new Promise((t,n)=>{e.file(t,n)})}function k1(e){return new Promise((t,n)=>{e.readEntries(t,n)})}async function ec(e,t){const n=await C1(e);return n.path=t,n}async function*tc(e){let t=[],n;const o=e.createReader();do n=await k1(o),t=t.concat(n);while(n.length>0);for(const r of t)if(Ji(r))yield[e.name,await ec(r,e.name)];else if(Yi(r)){const a=r;for await(const[i,c]of tc(a))yield[e.name+"/"+i,c]}}async function F1(e){const t=e.map(o=>o.webkitGetAsEntry()).filter(Boolean),n=[];for await(const o of t)if(Ji(o))n.push(await ec(o,""));else if(Yi(o))for await(const[r,a]of tc(o))a.path=r,n.push(a);return n}async function I1(e){let t=[];if(e.some(o=>!o.getAsFileSystemHandle))t=(await F1(e)).map(r=>new an({file:r,path:r.path}));else{const o=await N1(e);for(const[r,a,i]of o){const c=new an({file:a.kind==="file"?await a.getFile():null,handle:a,parent:i,path:r});t.push(c)}}return t}function M1(e){return new Promise((t,n)=>{const o=()=>n(`File (${e.name}) reading was aborted`),r=()=>{var i;return t(((i=a.result)==null?void 0:i.toString())||"")},a=new FileReader;a.onabort=o,a.onerror=o,a.onload=r,a.readAsText(e)})}function T1(e){return[...e].map(n=>[n,tmApi.getPathForFile(n)]).filter(n=>!!n[1])}async function sc(e){const t=[];e.forEach(n=>n.notOur=!Ad(n.fname,Xi));for(const[n,o]of e.entries()){if(!o.fileWeb){console.error("Empty entry or file",o);continue}try{const r={unid:Ne.asRelativeNumber(),idx:n,fname:o.fname,fpath:o.fpath,fmodi:o.fileWeb.lastModified,size:o.fileWeb.size,raw:"",newFile:!1,fromMain:!1,webFsItem:o.webFsItem,webFile:o.fileWeb,notOur:o.notOur,failed:!1,changesSet:ts()};try{r.raw=o.notOur?"":await M1(o.fileWeb)}catch(a){r.raw=a instanceof Error?a.message:JSON.stringify(a),r.failed=!0}t.push(r)}catch(r){console.error("Error processing drop item:",r,o)}}return t}async function D1(e){let t=await o(e);const n=await sc(t);return bt({rpath:zi(n.map(r=>r.fpath)),dir:void 0,fromMain:!1}),n;async function o(r){const a=(await I1(r)).filter(c=>c.file);let i=[];try{i=a.map(c=>({fname:c.file.name,fpath:c.path,fileWeb:c.file,webFsItem:c,notOur:!1})).filter(c=>!!c)}catch{console.error("cannot read from DataTransferItemList",r)}return i}}async function nc(e){let t=await o(e);return sc(t);async function o(r){let a=[];try{a=await Promise.all(r.map(async i=>{const c=new an({file:i,handle:y1(i)?i.handle:null,parent:A1(i)?i.directoryHandle:null,path:Hs(i.webkitRelativePath)});return{fname:i.name,fpath:c.path,fileWeb:i,webFsItem:c,notOur:!1}}))}catch{console.error("cannot read from File[]",r)}return a}}async function oc(e){const t=T1(e),n=t.map(o=>o[1]);if(t.length){const o=await of(n,Xi);return Ja(o),o}}const P1=f(null,async(e,t,n)=>{let o;if(Se()){const r=[...n.files];r.length&&(o=await oc(r))}else{const r=[...n.items].filter(a=>a.kind==="file");r.length&&(o=await D1(r))}o!=null&&o.length&&o&&t(Ct,o)}),R1=f(null,async(e,t,n)=>{const o=n?[...n]:[];if(!o.length)return;let r;Se()?r=await oc(o):r=await nc(o),r&&t(Ct,r)}),rc=f(null,async(e,t,{openAsFolder:n})=>{try{const o=await w1(n);if(L1(o),!Se()){let r=o?await nc(o):[];r&&t(Ct,r)}}catch{}});function L1(e){console.log("%cdoSetFilesFromModernDialogAtom","color: magenta"),e.forEach(t=>console.log(" ",t))}function $1(e,t,n,o){e===qt.url?n.sort(a):e===qt.index&&t===Me.highToLow&&n.sort(r);function r(i,c){const l=o(i),d=o(c),u=l.fileCnt.idx,m=d.fileCnt.idx;return u<m?1:u>m?-1:0}function a(i,c){var x,j;const l=o(i),d=o(c),u=((x=l==null?void 0:l.parsedSrc.stats)==null?void 0:x.loginFormDomain)||"zz",m=((j=d==null?void 0:d.parsedSrc.stats)==null?void 0:j.loginFormDomain)||"zz";return t===Me.lowToHigh?u<m?-1:u>m?1:0:u<m?1:u>m?-1:0}}const O1=f(e=>{const{regex:t,winOnly:n,webOnly:o,whyOnly:r,capOnly:a,clsOnly:i}=Tm(e(Kt.textAtom),e(Kt.caseSensitiveAtom)),c=e(uc),{showNormal:l,showManual:d,showEmpty:u,showFldCat:m}=c.shownManis,j=e(Le).filter(M=>{const O=e(M),{mani:U,meta:G,stats:{isFCat:ae}}=O.parsedSrc;if(ae&&!m||!ae&&!U)return!1;if(a)return Pl(U,t);if(i)return Rl(U,t);const te=Ll(G);if(n&&te||o&&!te||r&&!Gt(G))return!1;let se=gr(G)?u:xn(G)?d:l;return se&&t&&(se=Dm(O,t)),se}),{order:A,sortBy:k}=c.sortOrder;return $1(k,A,j,e),j}),to=f(e=>{const t=e(O1);if(!t.length)return[];const n=e(uc),o=n.itemsState.showIeMarker;return t.map(a=>{const i=e(a);return{id:i.fileCnt.unid,name:Lm(i,n.itemsState,e),icon:Bt(Pm(i,o)),fileUsAtom:a}})}),_1=f(null,(e,t)=>{t(Ct,[])});f(e=>!!e(Le).length);const so=f(!1),kt=f(!1);var z=(e=>(e[e.apps=0]="apps",e[e.fields=1]="fields",e[e.options=2]="options",e[e.save=3]="save",e))(z||{});const no=0,cn=3,ac={0:["Application window","Select the application window for training."],1:["Fields and submit","Set up new form fields and submission method."],2:["Options","Configure the new manifest settings."],3:["Save","Name the manifest and save the file."]},B1="text-xs font-semibold",E1="text-xs text-balance",Vo=[{label:Rt(0)},{label:Rt(1)},{label:Rt(2)},{label:Rt(3)}];function Rt(e){const[t,n]=ac[e];return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:B1,children:t}),s.jsx("div",{className:E1,children:n})]})}function z1(){return f(null,(e,t,{ctx:n})=>{t(n.pageAndDirectionAtom,[no,0]),t(n.appSelectedIdxAtom,-1),t(Ln,{width:300})})}function V1(){return f(null,async(e,t)=>{const n=re,o=e(n.appSelectedIdxAtom);let r=o===-1?void 0:e(Ae)[o];if(t(n.appSelectedIdxAtom,-1),await t(Ln,{width:300}),r){const i=e(Ae).findIndex(c=>c.item.hwnd===r.item.hwnd);t(n.appSelectedIdxAtom,i)}})}const ut=f(0);function W1(){return f(e=>e(ut),(e,t,n)=>{const o=e(Ae),r=e(ut);r===n?(r!==-1&&(o[r].editor.selected=!1),t(ut,-1)):(o.forEach((a,i)=>a.editor.selected=i===n),t(ut,n))})}const H1=f(e=>{const t=e(ut);return t===-1?void 0:e(Ae)[t]}),Jt=f([]),Wo=f(null,(e,t,n)=>{const o=e(Jt);t(Jt,[...o,n])}),U1=f(null,(e,t)=>{e(Jt).forEach(o=>o&&_.dismiss(o)),t(Jt,[])}),Yt=f([no,0]);function G1(){return Yt}function Z1(){return f(e=>e(Yt)[0])}function q1(){return f(null,(e,t,{next:n})=>{const o=e(Yt)[0];if(n||t(U1),n&&o===cn){t(Wo,_.error("Cannot save yet."));return}const r=pa(o+(n?1:-1),no,cn);if(n)if(r===z.fields){if(!e(H1)){t(Wo,_.error("Select application window first."));return}}else z.options;t(Yt,[r,n?1:-1])})}class K1{constructor(){N(this,"doInitAtom");N(this,"currentPageAtom");N(this,"pageAndDirectionAtom");N(this,"doAdvancePageAtom");N(this,"appSelectedIdxAtom");N(this,"doRefreshAppsAtom");this.doInitAtom=z1(),this.currentPageAtom=Z1(),this.pageAndDirectionAtom=G1(),this.doAdvancePageAtom=q1(),this.appSelectedIdxAtom=W1(),this.doRefreshAppsAtom=V1()}}const re=new K1,Ho=f(!1),vs=f(e=>e(Ho),(e,t,n)=>{n&&t(re.doInitAtom,{ctx:re}),t(Ho,n)});var ic=(e=>(e[e.none=0]="none",e[e.grab=1]="grab",e[e.define=2]="define",e[e.manual=3]="manual",e))(ic||{});const cc=f(0),oo=f(!1),X1={shownManis:Bm,sortOrder:Em,itemsState:zm},Q1={[$.login]:{},[$.cpass]:{}},J1={activeTab:"options",openTestArea:!1,nToGenerate:50},Y1={mani:{...J1,openGeneral:!1,openInOptions:Q1,openInForms:Wm}},e0={...Vm,...Y1},t0={positions:{}},s0={showStatusbar:!0,showOptOnRight:!0,showWelcome:!0,showQuickXml:!1},n0={allowHandleFiles:!1,showUiHeader:!1},o0={theme:"light",divider:t0,uiGeneral:s0,uiAdvanced:n0},Uo={appUi:o0,files:X1,right:e0},lc="pmat24-lite-app-settings",dc="v1",w=X(r0());function r0(){var o;let e=Uo;const t=localStorage.getItem(lc);if(t)try{e=(o=JSON.parse(t))==null?void 0:o[dc]}catch{console.error("storage bad format")}return ja(Uo,e)}ba(w.appUi.theme);ss(w,()=>{ba(w.appUi.theme)});const a0=$e(()=>{localStorage.setItem(lc,JSON.stringify({[dc]:w}))},400);ss(w,a0);const uc=dr(w.files),mc="tm-dlg-open-files",fc="tm-dlg-open-folders";function Go({openAsFolder:e}){const t=b(rc);return s.jsx(E,{asChild:!0,children:s.jsx("div",{onClick:()=>hc(t,e),children:e?"Open Folder...":"Open Files... (advanced)"})})}function hc(e,t){var o;if(Se()||!S1(window)){const r=t?fc:mc;(o=document.getElementById(r))==null||o.click()}else e({openAsFolder:!!t})}function Zo({openAsFolder:e}){const t=b(R1),n=e?fc:mc;function o(r){t(r.target.files);const a=document.getElementById(n);a&&(a.value="")}return s.jsx(ih,{id:n,openAsFolder:e,onChange:o,accept:".dpm,.dpn"})}function i0(){const{allowHandleFiles:e}=S(w.appUi.uiAdvanced);return Se()?s.jsxs(s.Fragment,{children:[e&&s.jsx(E,{onClick:()=>Te.loadManifestsDialog({}),children:"Open Files..."}),s.jsx(E,{onClick:()=>Te.loadManifestsDialog({openDirs:!0}),children:"Open Folder..."})]}):s.jsxs(s.Fragment,{children:[e&&s.jsx(Go,{}),s.jsx(Go,{openAsFolder:!0})]})}const c0="Ctrl+,",pc="Ctrl+F",l0="Ctrl+N",d0="Ctrl+S",u0="Alt+S";function m0(){const e=b(oo),t=b(so),n=b(kt),o=b(Ix),r=b($i);return rt(a=>a.ctrlKey&&a.key===",",a=>{a.preventDefault(),e(!0)}),rt(a=>a.ctrlKey&&a.key==="f",a=>{a.preventDefault(),t(!0)}),rt(a=>a.ctrlKey&&a.key==="n",a=>{a.preventDefault(),n(!0)}),rt(a=>a.ctrlKey&&a.key==="s",a=>{a.preventDefault(),o()}),rt(a=>a.altKey&&a.key==="s",a=>{a.preventDefault(),r()}),null}const Ht=[{id:11,name:"Login window"},{id:12,name:"Register window"},{id:13,name:"Forgot password window"},{id:14,name:"Reset password window"},{id:15,name:"Profile window"},{id:16,name:"Settings window"},{id:17,name:"Terms window"},{id:18,name:"Privacy window"},{id:19,name:"Cookie policy window"},{id:20,name:"404 window"},{id:21,name:"500 window"},{id:22,name:"Maintenance window"},{id:23,name:"Coming soon window"},{id:24,name:"Under construction window"},{id:25,name:"Custom window"}];function f0({selectedIdxAtom:e,toastIdAtom:t}){const n=g(e),[o,r]=T(t);p.useEffect(()=>()=>{o&&_.dismiss(o)},[o,n]);const a=b(kt);b(cc);const i=b(vs);return s.jsx(C,{variant:"default",size:"sm",onClick:()=>{let c;if(n===-1)c=_("Select application window first.");else if(n===1){setTimeout(()=>i(!0),0),a(!1);return}else c=_("No login fields detected.");c&&r(c)},children:"Create manifest"})}function h0({selectedIdxAtom:e}){const[t,n]=T(e);return s.jsxs("div",{className:"py-2 flex flex-col",children:[Ht.length===0&&s.jsx("div",{className:"px-3 text-muted-foreground",children:"No windows detected"}),Ht.length!==0&&Ht.map((o,r)=>{const a=r===t;return s.jsxs(R,{className:h("px-3 py-1.5 text-xs font-normal cursor-pointer select-none flex items-center gap-2.5",a&&"bg-accent"),children:[s.jsx(Z,{className:"size-4",checked:a,onCheckedChange:i=>n(i?r:-1)}),s.jsx("div",{children:o.name})]},o.id)})]})}function p0({setIsOpen:e}){const t=p.useState(()=>f(1))[0],n=p.useState(()=>f(void 0))[0],[o,r]=T(n);return p.useEffect(()=>()=>{o&&_.dismiss(o)},[o]),s.jsxs("div",{className:"min-h-56 text-xs",children:[s.jsxs(xs,{className:"relative text-base font-bold flex items-center",children:[s.jsx(gs,{asChild:!0,children:s.jsx("div",{className:"py-4",children:"New manifest"})}),s.jsx(Qe,{onClick:()=>e(!1),tabIndex:-1})]}),s.jsxs("div",{className:"px-4 py-4",children:[s.jsx("div",{className:"mb-4",children:"Select the login window for which you will create a manifest."}),s.jsxs("div",{className:"mb-1 flex items-center justify-between",children:["Application windows",s.jsx(C,{className:"font-normal",variant:"outline",size:"xs",onClick:()=>r(_("Updated")),tabIndex:-1,children:s.jsx(va,{className:"size-3",title:"Refresh windows list"})})]}),s.jsx("div",{className:"border-border border rounded",children:s.jsx(oe,{className:"h-[25vh]",children:s.jsx(h0,{windows:Ht,selectedIdxAtom:t})})}),s.jsx("div",{className:"mt-4 flex items-center justify-end",children:s.jsx(f0,{selectedIdxAtom:t,toastIdAtom:n})})]})]})}function x0(){const[e,t]=T(kt);return e?s.jsx(_e,{open:e,onOpenChange:()=>t(!1),children:s.jsx(Be,{className:"p-0 !w-2/3 max-w-3xl rounded-md data-[state=open]:[animation-duration:200ms]",noClose:!0,hiddenTitle:"New Manifest",children:s.jsx(p0,{setIsOpen:t})})}):null}var he=(e=>(e[e.complete=0]="complete",e[e.current=1]="current",e[e.notStarted=2]="notStarted",e))(he||{});function g0({idx:e,currentStep:t,label:n,isLast:o}){const r=j0(e,t),a=r===he.notStarted?qo.notStarted:qo.complete,i=r===he.complete?Ko.complete:Ko.incomplete,c=b0(e,r);return s.jsxs("div",{className:"flex items-start gap-4 [--size:40px] [--pt:8px]",children:[" ",s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative size-[calc(var(--size))]",children:[s.jsx("div",{className:`absolute inset-0 rounded-full ${a.circleBorderClasses}`}),s.jsx("div",{className:`absolute inset-1 rounded-full ${a.circleClasses} flex items-center justify-center`,children:c})]}),!o&&s.jsx("div",{className:`-mb-4 w-[2px] h-10 ${i}`})]}),s.jsx("div",{className:"flex-1 pt-[var(--pt)]",children:s.jsx("div",{className:"text-sm font-medium",children:n})})]})}function b0(e,t){return t===he.complete?s.jsx(w0,{className:"size-4"}):t===he.current?s.jsx(v0,{className:"size-4 1animate-spin"}):t===he.notStarted?s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e+1}):null}function j0(e,t){return e<t?he.complete:e===t?he.current:he.notStarted}const qo={complete:{circleClasses:"text-background bg-[#5c90f0]",circleBorderClasses:"bg-[#5c90f0]/50"},notStarted:{circleClasses:"text-foreground",circleBorderClasses:"bg-foreground/10"}},Ko={complete:"bg-[#5c90f0]",incomplete:"bg-[#5c90f0]/20"};function w0({className:e,...t}){return s.jsx("svg",{className:h("fill-none stroke-current stroke-2",e),viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",...t,children:s.jsx("path",{d:"M20 6 9 17l-5-5"})})}function v0({className:e,...t}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-2",e),viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[s.jsx("path",{d:"M12 2v4"}),s.jsx("path",{d:"m16.2 7.8 2.9-2.9"}),s.jsx("path",{d:"M18 12h4"}),s.jsx("path",{d:"m16.2 16.2 2.9 2.9"}),s.jsx("path",{d:"M12 18v4"}),s.jsx("path",{d:"m4.9 19.1 2.9-2.9"}),s.jsx("path",{d:"M2 12h4"}),s.jsx("path",{d:"m4.9 4.9 2.9 2.9"})]})}function y0({className:e,...t}){const n=g(re.currentPageAtom);return s.jsx("div",{className:h("max-w-64 bg-muted/20 flex flex-col gap-4",e),...t,children:Vo.map((o,r)=>s.jsx(g0,{idx:r,currentStep:n,label:o.label,isLast:r===Vo.length-1},r))})}function ys({page:e}){const[t,n]=ac[e];return s.jsxs("div",{className:"px-3 pt-3 text-sm bg-muted/30 flex flex-col gap-0.5",children:[s.jsx("div",{className:"text-xs font-semibold",children:t}),s.jsx("div",{className:"text-xs text-foreground/50",children:n})]})}function A0({triggerLabel:e,subLabel:t}){const[n,o]=p.useState("");return n?null:s.jsxs(yt,{onValueChange:r=>{console.log(r),o(r)},children:[s.jsx(st,{className:"px-2 w-max text-xs font-semibold gap-1",children:s.jsx(At,{placeholder:e})}),s.jsx(nt,{align:"center",children:s.jsxs(Oh,{children:[t&&s.jsx(wi,{children:t}),s.jsx(ye,{className:"text-xs",value:"banana",children:"Create from website or Windows application"}),s.jsx(ye,{className:"text-xs",value:"blueberry",children:"Define form manually for website"}),s.jsx(ye,{className:"text-xs",value:"apple",children:"Create manual mode (for Windows apps only)"})]})})]})}function N0({className:e,...t}){const n=g(re.currentPageAtom),o=b(re.doAdvancePageAtom);return s.jsxs("div",{className:h("px-4 flex items-center justify-end gap-1",e),...t,children:[s.jsx(C,{variant:"outline",size:"xs",onClick:()=>o({next:!1}),disabled:n<=0,children:"Prev"}),s.jsx(C,{variant:"default",size:"xs",onClick:()=>o({next:!0}),children:n===cn?"Save":"Next"})]})}const S0=xe.create(br);function C0({info:e,idx:t,...n}){const o=b(re.appSelectedIdxAtom),r=S(e.editor).selected,a=e.item;return s.jsxs("div",{className:h("relative m-1 pb-4 flex flex-col gap-1 overflow-hidden cursor-pointer"),onClick:()=>{e.editor.selected=!r,o(t)},...n,children:[s.jsx(I0,{className:h("m-1 max-w-52 max-h-36",r&&k0),data64:a.data}),s.jsx(Re,{children:r&&s.jsx(S0,{className:F0,initial:{scale:.9,opacity:0},animate:{scale:1.1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2}})}),s.jsx("div",{className:"m-1 text-xs font-semibold",children:a.caption})]})}const k0="outline outline-2 -outline-offset-2 outline-sky-500 outline-o ring-1 ring-sky-500 1ring-offset-1 ring-o rounded-md 1transition-all 1duration-[300ms] ",F0="absolute left-3.5 top-3 p-1 size-6 text-black bg-white border-2 border-sky-500 shadow-sm shadow-slate-500 rounded-full";function I0({data64:e,...t}){return s.jsx("img",{src:e,...t})}function M0({item:e,idx:t}){return s.jsx(s.Fragment,{children:e.item.type==="error"?s.jsx(T0,{info:e.item},e.uuid):s.jsx(C0,{info:e,idx:t},e.uuid)})}function T0({info:e,...t}){return s.jsxs("div",{className:"pb-4 flex flex-col gap-1",...t,children:[s.jsx(Od,{className:"max-w-8",title:"Broken image"}),s.jsxs("div",{children:["Error. hwnd: ",e.hwnd,', error code: "',e.errorCode,'"']})]})}function D0({className:e,...t}){const n=g(Ae);return s.jsx("div",{className:h("grid gap-1 grid-cols-[repeat(auto-fill,minmax(160px,1fr))] 1debug",e),...t,children:n.map((o,r)=>s.jsx(M0,{item:o,idx:r},o.uuid))})}function P0({className:e}){const t=b(re.doRefreshAppsAtom),n=Id(),[o,r]=p.useState(!0);async function a(){if(!o){console.error("updateApps - refresh disabled");return}r(!1);try{await t(),n(_("Updated"))}catch(i){console.error(`'updateApps' ${i instanceof Error?i.message:`${i}`}`),_.error(`'updateApps' ${i instanceof Error?i.message:`${i}`}`)}r(!0)}return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Re,{children:!o&&s.jsx(xe.div,{className:"",initial:{scale:.9,opacity:0},animate:{scale:1.1,opacity:1},exit:{scale:.9,opacity:0},children:s.jsx(Np,{className:"w-6 h-4 text-sky-500 [--barh:10%] [--framew:1px]",title:"Refresh windows list"})})}),s.jsx(C,{className:h("self-end mr-3",e),variant:"outline",size:"xs",tabIndex:-1,onClick:a,disabled:!o,title:"Refresh windows list",children:s.jsx(xe.div,{layout:!0,children:s.jsx(va,{className:"size-3",title:"Refresh windows list"})})})]})}function R0(){return s.jsxs("div",{className:"h-full text-xs grid grid-rows-[auto,1fr,auto]",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx(ys,{page:z.apps}),s.jsx(P0,{})]}),s.jsx("div",{className:"relative size-full",children:s.jsx("div",{className:"absolute inset-3",children:s.jsx(oe,{className:"px-2 py-1 size-full bg-muted/50 border border-border rounded-md",fullHeight:!0,fixedWidth:!0,children:s.jsx(D0,{})})})}),s.jsxs("div",{className:"px-3 pb-3 flex items-center  gap-2",children:[s.jsx(Z,{className:"",checked:!0}),"Define manifest content manually"]})]})}function L0(){return s.jsxs("div",{className:"h-full text-xs bg-sky-300 grid grid-rows-[auto,1fr,auto]",children:[s.jsx(ys,{page:z.fields}),s.jsx("div",{className:"relative size-full",children:s.jsx("div",{className:"absolute inset-0",children:"2-page-fields"})})]})}function $0(){return s.jsxs("div",{className:"h-full text-xs bg-yellow-300 grid grid-rows-[auto,1fr,auto]",children:[s.jsx(ys,{page:z.options}),s.jsx("div",{className:"relative size-full",children:s.jsx("div",{className:"absolute inset-0",children:"3-page-options"})})]})}function O0(){return s.jsxs("div",{className:"h-full text-xs bg-green-300 grid grid-rows-[auto,1fr,auto]",children:[s.jsx(ys,{page:z.save}),s.jsx("div",{className:"relative size-full",children:s.jsx("div",{className:"absolute inset-0",children:"4-page-save"})})]})}function _0(){const e=g(re.currentPageAtom),[t,n]=g(re.pageAndDirectionAtom);return s.jsx(fa,{transition:B0,children:s.jsx("div",{className:"h-full grid grid-rows-[1fr_auto] overflow-hidden",children:s.jsx("div",{className:"flex",children:s.jsxs(Re,{initial:!1,custom:n,mode:"wait",children:[e===z.apps&&s.jsx(Lt,{direction:n,currentStep:e,thisStep:z.apps,children:s.jsx(R0,{})},z.apps),e===z.fields&&s.jsx(Lt,{direction:n,currentStep:e,thisStep:z.fields,children:s.jsx(L0,{})},z.fields),e===z.options&&s.jsx(Lt,{direction:n,currentStep:e,thisStep:z.options,children:s.jsx($0,{})},z.options),e===z.save&&s.jsx(Lt,{direction:n,currentStep:e,thisStep:z.save,children:s.jsx(O0,{})},z.save)]})})})})}const B0={type:"spring",stiffness:300,damping:30},E0={enter:e=>({x:e>0?150:-150,opacity:1}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?150:-150,opacity:1,transition:{duration:0}})};function Lt({children:e,currentStep:t,thisStep:n,direction:o}){return s.jsx(xe.div,{custom:o,variants:E0,initial:"enter",animate:"center",exit:"exit",className:"w-full shrink-0",children:e})}function z0({className:e,...t}){const{screen:n,mani:o}=S(ve.testCreate),r=b(Ln),a=b(Zm);return s.jsxs("div",{className:h("px-2 py-0.5 text-[.67rem] grid grid-cols-[auto_auto_auto_auto] grid-rows-2 gap-x-2",e),...t,children:["screen:",s.jsxs(en,{className:"grid-cols-subgrid col-span-3",value:n,onValueChange:i=>{ve.testCreate.screen=i,r({width:300})},children:[s.jsxs(R,{className:h("col-start-1",We),children:[" ",s.jsx(Ie,{value:ze.A})," ",ze.A," "]}),s.jsxs(R,{className:h("col-start-2",We),children:[" ",s.jsx(Ie,{value:ze.B})," ",ze.B," "]}),s.jsxs(R,{className:h("col-start-3",We),children:[" ",s.jsx(Ie,{value:ze.none})," ",ze.none," "]})]}),"content:",s.jsxs(en,{className:"grid-cols-subgrid col-span-3",value:o,onValueChange:i=>{ve.testCreate.mani=i,a(i)},children:[s.jsxs(R,{className:h("",We),children:[" ",s.jsx(Ie,{value:Ve.win32})," ",Ve.win32," "]}),s.jsxs(R,{className:h("",We),children:[" ",s.jsx(Ie,{value:Ve.web})," ",Ve.web," "]}),s.jsxs(R,{className:h("",We),children:[" ",s.jsx(Ie,{value:Ve.none})," ",Ve.none," "]})]})]})}const We="text-[.67rem] flex items-center gap-1";function V0(){const e=b(vs);return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs(xs,{className:"relative text-base font-bold border-b border-foreground/20 flex items-center",children:[s.jsx(gs,{asChild:!0,children:s.jsx("div",{className:"py-3 text-sm",children:"New manifest"})}),!Se()&&s.jsx("div",{className:"absolute -left-7 -top-[14px] scale-[.74] bg-muted/50 rounded-tl-md border border-foreground/10",children:s.jsx(z0,{})}),s.jsx(C,{className:"absolute py-4 right-2 -top-0.5 hover:text-white hover:bg-red-500",variant:"ghost",size:"xs",tabIndex:-1,onClick:()=>e(!1),children:s.jsx(hr,{className:"size-4"})})]}),s.jsxs("div",{className:"h-full grid grid-cols-[auto_1fr]",children:[s.jsx(y0,{className:"p-4 bg-muted border-r border-foreground/20 justify-center"}),s.jsx(_0,{})]}),s.jsx(N0,{className:"py-3 border-t border-foreground/20"})]})}function W0(){const[e,t]=T(vs);return s.jsx(s.Fragment,{children:s.jsx(_e,{open:e,onOpenChange:t,children:s.jsx(Be,{className:H0,hiddenTitle:"Create manifest",noClose:!0,children:s.jsx(V0,{})})})})}const H0="p-0 !w-11/12 max-w-5xl h-4/5 min-h-[60vh] max-h-[90vh] rounded-md data-[state=open]:[animation-duration:200ms] ";//!1w-4/5 md:!1w-4/5 1max-w-3xl \
function U0(){const[e,t]=T(cc);return e?s.jsx(s.Fragment,{children:s.jsx(_e,{open:!!e,onOpenChange:()=>t(ic.none),children:s.jsx(Be,{className:"p-0 !w-2/3 max-w-3xl rounded-md data-[state=open]:[animation-duration:200ms]",noClose:!0,children:"demo"})})}):null}function G0(){return s.jsxs(s.Fragment,{children:[s.jsx(x0,{}),s.jsx(U0,{}),s.jsx(W0,{})]})}function xc({fceCtx:e}){const t=b(eo);return s.jsxs("div",{className:"relative py-2 border-border border-b flex flex-col items-center",children:[s.jsx("div",{className:"text-xs font-semibold",children:"Field Catalog"}),s.jsx(Qe,{className:"absolute right-1 top-1/2 -translate-y-1/2 p-2 hover:bg-muted hover:rounded-sm",onClick:t,tabIndex:-1})]})}function Z0({fceCtx:e}){const[t,n]=p.useState(!1);return s.jsxs(Je,{open:t,onOpenChange:n,modal:!0,children:[s.jsx(Ye,{asChild:!0,children:s.jsx(C,{variant:"ghost",tabIndex:-1,children:s.jsx(is,{className:"size-4 fill-current"})})}),s.jsx(Ee,{className:"min-w-36 text-xs",align:"end",children:s.jsx(q0,{})})]})}function q0(){const{activeView:e}=S(w).right;return s.jsx(_n,{checked:e===J.xml,onCheckedChange:t=>w.right.activeView=t?J.xml:J.forms,children:"Show XML"})}function gc({fceCtx:e}){const[t,n]=p.useState(!1);return s.jsxs(Je,{open:t,onOpenChange:n,modal:!0,children:[s.jsx(Ye,{asChild:!0,children:s.jsx(C,{className:"-mx-1",variant:"ghost",title:"Add new item",tabIndex:-1,children:s.jsx(ya,{className:"size-4 fill-current"})})}),s.jsx(Ee,{className:"min-w-36 text-xs",align:"end",children:s.jsx(K0,{fceCtx:e})})]})}function K0({fceCtx:e}){const t=b(Wi),n=b(e.focusGridAtom);function o(r){t(e,r),n(!0)}return s.jsxs(s.Fragment,{children:[s.jsx(E,{onClick:()=>{o(F.edit)},children:"Add Text Field"}),s.jsx(E,{onClick:()=>{o(F.psw)},children:"Add Password Field"})]})}function bc({fceCtx:e}){const t=g(e.hasSelectedItemAtom),n=b(Hi);return s.jsx(C,{className:"-mx-1",variant:"ghost",disabled:!t,title:"Delete current item",tabIndex:-1,onClick:()=>n(e),children:s.jsx(Hd,{className:"size-4"})})}const X0="w-full px-2 h-7 text-xs bg-mani-background border-border border rounded-md";function Q0({fceCtx:e}){const[t,n]=p.useState(!1),[o,r]=T(e.filterAtom);function a(c){r({...o,search:c.target.value})}const i=p.useRef(null);return p.useEffect(()=>{let c;return t&&i.current&&(c=setTimeout(()=>{var l;return(l=i.current)==null?void 0:l.focus()},700)),()=>clearTimeout(c)},[t]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"pr-1 overflow-hidden flex items-center gap-2",children:[s.jsx(xe.div,{layout:!0,children:s.jsx(C,{className:h("-mx-1",t&&"bg-muted"),variant:"ghost",title:"Filter items",tabIndex:-1,onClick:()=>n(!t),children:s.jsx(wa,{className:"size-4"})})}),s.jsx(Re,{children:t&&s.jsxs(xe.div,{className:"relative flex items-center gap-1",initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:30},transition:{duration:.2},children:[s.jsx("input",{ref:i,type:"text",className:X0,value:o.search,onChange:a}),s.jsx(C,{className:h("-mx-1",t&&"bg-muted"),variant:"ghost",title:"Clear filter",tabIndex:-1,onClick:()=>n(!1),children:s.jsx(In,{className:"size-4"})})]})})]})})}function J0({showPropsExpand:e}){const[t,n]=T(g1);return s.jsx(s.Fragment,{children:e&&s.jsx(C,{variant:"ghost",tabIndex:-1,title:"Show item details",onClick:()=>n(o=>!o),children:s.jsx(wu,{className:`size-3 ${t?"rotate-90":"-rotate-90"} transition-transform duration-200`})})})}function jc({fceCtx:e,showPropsExpand:t,className:n}){var r;return(r=e.inData)!=null&&r.openItemPickerDlg?s.jsx("div",{}):s.jsxs("div",{className:h("flex items-center justify-end",n),children:[s.jsx(gc,{fceCtx:e}),s.jsx(bc,{fceCtx:e}),s.jsx(J0,{showPropsExpand:t}),s.jsx(Z0,{fceCtx:e})]})}function Y0(e,t){const n=e.fType===F.button,o=e.fType===F.psw,r=e.fType===F.edit,a=n?[]:[...jr];a.length&&a.push("-");const i=t&&(t==null?void 0:t.split(":"))||[];i.length&&i.push("-");const c=r||o?Object.values(Ft(o)).map(O=>O.f):[],l=a.length,d=l+i.length,u=[...a,...i,...c],m=[...a.map(()=>0),...i.map(()=>l),...c.map(()=>d)];u.at(-1)==="-"&&u.pop();const x=rg(e,n,o),j=og(e,d,l,i,o),A=e.isRef||!e.value,k=n?!0:void 0,M=k?"Buttons have no state value":e.isRef&&sg(e.value,o)||void 0;return{dropdownAllItems:u,dropdownSelectedIndex:j,context:{dropdownIdxs:m,idxToStartRefs:d,idxToStartValues:l,listValues:i,isPsw:o},inputText:x,showAsRef:A,disabled:k,title:M}}function eg(e,t){return e?Ft(t)[e].i:-1}function tg(e,t){return e?Ft(t)[e].s:""}function sg(e,t){return e?Ft(t)[e].f:""}function ng(e){return e===me.askReuse?0:e===me.askConfirm?1:e===me.askAlways?2:0}function og(e,t,n,o,r){return e.isRef?t+eg(e.value,r):e.value?o.length?n+o.indexOf(e.value):-1:ng(e.valueAs)}function rg(e,t,n){return e.isRef?tg(e.value,n):e.value?e.value:e.isNon||t?"":jr[e.valueAs]}function Ft(e){return $l[e?"psw":"txt"]}function ag(e,t){return Object.keys(Ft(t))[e]}function ig(e,t,n){const{dropdownIdxs:o,idxToStartRefs:r,idxToStartValues:a,listValues:i,isPsw:c}=n,l=o[e];return l===r?{...t,value:ag(e-r,c),isRef:!0,valueAs:me.askReuse,isNon:!1}:l===a?{...t,value:i[e-a],isRef:!1,valueAs:me.askReuse,isNon:!1}:{...t,value:"",isRef:!1,valueAs:e,isNon:!1}}const cg="py-1 max-h-[50vh] text-popover-foreground bg-popover border-mani-border border radix-side-top:animate-slide-up radix-side-bottom:animate-slide-down rounded-lg shadow-md overflow-auto smallscroll smallscroll-light grid grid-cols-1 z-[51]",lg="relative mx-1 pl-7 pr-2 py-1.5 text-xs text-accent-foreground focus:text-accent-foreground focus:bg-accent rounded-md outline-none select-none cursor-default flex items-center";function dg({useItAtom:e,items:t,selectedIndex:n,onSetIndex:o}){return s.jsxs(An,{children:[s.jsx(Nn,{asChild:!0,children:s.jsx("button",{className:"px-1.5 border-mani-border-separator border-l outline-none group/btn",children:s.jsx(cs,{className:"size-4 border-muted-foreground rounded group-focus-within/btn:border"})})}),s.jsx(vn,{children:s.jsx(os,{className:cg,sideOffset:4,align:"end",children:t.map((r,a)=>s.jsx(ug,{item:r,idx:a,selectedIndex:n,onSetIndex:o},a))})})]})}function ug({item:e,idx:t,selectedIndex:n,onSetIndex:o}){const r=n===t;return e==="-"?s.jsx(yn,{className:"my-1 h-px bg-mani-border"},t):s.jsxs(rs,{className:h(lg,r&&"bg-accent"),onSelect:()=>o(t),children:[r&&s.jsx(Mn,{className:"absolute left-1.5 size-5 fill-foreground"}),s.jsx("span",{className:"flex-grow",children:e})]},t)}function mg(e){return e==="Backspace"||/^[a-z0-9]$/i.test(e)}function wc({useItAtom:e,valueLifeAtom:t,choosevalue:n,parentDisabled:o,className:r,...a}){const i=g(e),[c,l]=T(t),d=p.useMemo(()=>Y0(c,n),[Object.values(c),n]),{dropdownAllItems:u,dropdownSelectedIndex:m,context:x,inputText:j,showAsRef:A,disabled:k,title:M}=d,O=!i&&!c.isRef&&!c.value,U=A&&!c.isNon,G=o||k;return s.jsxs("div",{className:h(fg,js,!i&&"opacity-30 cursor-pointer",r),...a,children:[s.jsx("input",{className:h(hg,U&&pg,G&&"pointer-events-none"),value:O?"":j,onChange:L=>te(L.target.value),onKeyDown:se,onBlur:Ss,readOnly:G,disabled:G,title:M,...Oe}),u.length&&!G&&s.jsx(dg,{useItAtom:e,items:u,selectedIndex:m,onSetIndex:ae})]});function ae(L){l(B=>ig(L,B,x))}function te(L){l(B=>({...B,value:L,isRef:!1,valueAs:me.askReuse,isNon:!1}))}function se(L){A&&mg(L.key)&&l(B=>({...B,value:"",isRef:!1,valueAs:me.askReuse,isNon:!0}))}function Ss(){A&&!j&&l(L=>({...L,value:"",isRef:!1,valueAs:me.askReuse,isNon:!1}))}}const fg="h-7 grid grid-cols-[minmax(0,1fr)_auto] bg-mani-background border-mani-border-muted border rounded overflow-hidden",hg="px-2 py-3 h-7 bg-mani-background text-mani-foreground truncate outline-none",pg="text-[0.6rem] !text-blue-400 cursor-default",xg="text-xs font-normal flex flex-col select-none cursor-default";function Xo({label:e,children:t,className:n,...o}){return s.jsxs("div",{className:h(xg,n),...o,children:[e,t]})}const ro="text-mani-foreground bg-mani-background border-mani-border-muted border outline-none ring-mani-ring focus:ring-1 focus:ring-offset-1 focus:ring-offset-mani-background focus:ring-mani-ring-activated ",gg="",bg="";function jg({editAtom:e,className:t,...n}){const[o,r]=T(e);return s.jsx(tt,{className:h("h-7 text-xs rounded",gg,js,t),...Oe,value:o,onChange:a=>r(a.target.value),...n})}function wg({editAtom:e,className:t,...n}){const[o,r]=T(e);return s.jsx(Wn,{className:h("min-h-12 text-xs rounded",bg,ro,t),value:o,onChange:a=>r(a.target.value),...Oe,...n})}const vg="absolute top-1 right-1.5 p-1 h-4 aspect-square text-xs text-muted-foreground rounded-sm select-none cursor-default flex items-center justify-center";function yg({fceCtx:e}){const t=g(e.selectedIdxStoreAtom);return s.jsx("div",{className:vg,children:t===-1?"":`${t+1}`})}function Ag({fceCtx:e}){var o;const t=g(e.selectedItemAtom),n=!((o=e.inData)!=null&&o.openItemPickerDlg);return s.jsx(s.Fragment,{children:n&&s.jsxs("div",{className:"pt-1 text-[.65rem] h-4 text-muted-foreground",children:["ID: ",t?t.fieldValue.dbname:"No item selected"]})})}const Ng="pt-2 flex flex-col disabled:opacity-25 disabled:pointer-events-none",vc="opacity-0 pointer-events-none cursor-not-allowed",Sg=e=>h(Ng,!e&&vc);function yc({fceCtx:e}){const t=g(e.hasSelectedItemAtom),n=g(e.fcePropAtoms.valueLifeAtom),o=p.useMemo(()=>Sg(t),[t]);return s.jsxs(s.Fragment,{children:[s.jsx(yg,{fceCtx:e}),s.jsxs("div",{className:h("select-none cursor-default",!t&&vc),children:["Field Type: ",n.fType===F.edit?"Text":"Password"]}),s.jsx(Xo,{label:"Name",className:o,children:s.jsx(jg,{disabled:!t,editAtom:e.fcePropAtoms.dispNameAtom})}),s.jsx(Xo,{label:"Description",className:o,children:s.jsx(wg,{disabled:!t,editAtom:e.fcePropAtoms.ownernoteAtom})}),s.jsx(Ag,{fceCtx:e})]})}function Cg({idx:e,fceItem:t,fceCtx:n,className:o,...r}){const a=S(t.editor)[n.isPicker?"isSelectedInPicker":"isSelectedInView"],{displayname:i}=S(t.fieldValue);return s.jsxs("div",{"data-list-item":a?"selected":"","data-list-uiid":t.fceMeta.uuid,className:h(Tg,o),...r,children:[s.jsx("div",{className:h("col-start-1 pr-1.5 text-[0.65rem] text-right text-muted-foreground"),children:e+1}),s.jsx(Dg,{className:"col-start-2 mr-1.5 size-4 opacity-50",isPsw:t.fieldValue.fType===F.psw}),s.jsx("div",{className:h("col-start-3 truncate"),children:i})]})}const kg="[--selected-fg:hsl(var(--foreground))] [--selected-fg-hover:hsl(var(--foreground))] [--selected-bg:hsl(var(--muted))] [--selected-bg-active:hsl(var(--accent))] [--selected-outline:#3b3b3b] ",Fg="dark:[--selected-fg:hsl(var(--foreground))] dark:[--selected-fg-hover:hsl(var(--foreground))] [--selected-bg:hsl(var(--muted))] dark:[--selected-bg-active:#04395e] dark:[--selected-outline:#007fd4] ",Ig="[--parent-active:0] focus-within:[--parent-active:1] [--parent-selected-bg:var(--selected-bg)] focus-within:[--parent-selected-bg:var(--selected-bg-active)] ",Ac=`${kg} ${Fg} ${Ig}`,Nc="data-[list-item=selected]:text-[var(--selected-fg)] hover:data-[list-item=selected]:text-[var(--selected-fg)] data-[list-item=selected]:bg-[var(--parent-selected-bg)] hover:data-[list-item=selected]:bg-[var(--parent-selected-bg)] data-[list-item=selected]:outline data-[list-item=selected]:[outline-width:calc(var(--parent-active)_*_1px)] data-[list-item=selected]:[outline-offset:-2px] outline-[var(--selected-outline)]",Mg="ml-2 mr-2 py-1 col-span-full grid grid-cols-subgrid items-center text-foreground bg-background hover:text-accent-foreground hover:bg-muted cursor-pointer",Tg=`${Mg} ${Nc}`;function Dg({isPsw:e,className:t}){var r;const n=e?"psw":"edit",o=(r=Ue[n])==null?void 0:r.call(Ue,{className:t,title:`Field type: ${n}`});return o||s.jsx("div",{className:"text-red-500",children:"NaN"})}function Pg({fceCtx:e,className:t,...n}){const o=g(e.shownAtom),r=b(ws),[a,i]=T(e.focusGridAtom),c=p.useRef(null);p.useEffect(()=>{var u;return(u=c.current)==null?void 0:u.focus()},[c.current]),p.useEffect(()=>{a&&(setTimeout(()=>{var u;return(u=c.current)==null?void 0:u.focus()},300),i(!1))},[a]);function l(u){r({fceCtx:e,idx:u,doubleClick:!1})}function d(u){r({fceCtx:e,idx:u,doubleClick:!0})}return s.jsx("div",{ref:c,className:h(Ac,t),...n,children:o.map((u,m)=>s.jsx(Cg,{idx:m,fceItem:u,fceCtx:e,onClick:()=>l(m),onDoubleClick:()=>d(m)},u.fceMeta.uuid))})}function ao(e){return s.jsx(Rg,{...e,children:s.jsx(Pg,{className:h("grid grid-cols-[minmax(32px,auto)_auto_minmax(0px,1fr)] outline-none select-none"),tabIndex:0,fceCtx:e.fceCtx})})}function Rg({fceCtx:e,className:t,children:n,...o}){const{ref:r,width:a,height:i}=as(),{ref:c}=Lg(e);return s.jsx("div",{className:h("relative w-full",t),...o,children:s.jsx("div",{className:"absolute inset-0 py-px flex flex-col",ref:l=>{r(l),c(l)},children:s.jsx(oe,{style:{width:a,height:i},children:n})})})}function Lg(e){const t=p.useRef(null),n=b(qx),[o,r]=T(e.selectedItemAtom);return p.useEffect(()=>{const i=n({container:t.current,fceCtx:e});r(i)},[t.current]),p.useEffect(()=>{n({container:t.current,fceCtx:e})},[o]),{ref:p.useCallback(i=>{t.current=i},[])}}function Sc({fceCtx:e}){var r;const t=b(eo),o=!!((r=e.inData)!=null&&r.openItemPickerDlg);return s.jsxs(s.Fragment,{children:[o&&s.jsx($g,{fceCtx:e}),s.jsx(C,{className:ro,onClick:t,children:o?"Cancel":"Close"})]})}function $g({fceCtx:e}){const t=g(e.selectedItemAtom),n=b(Ki);return s.jsx(C,{className:ro,disabled:!t,onClick:()=>n({selectedItem:t}),children:"Select"})}function Og({fceCtx:e}){var o;const t=b(Ux);p.useEffect(()=>{t({fceCtx:e})},[]);const n=!((o=e.inData)!=null&&o.openItemPickerDlg);return s.jsx(s.Fragment,{children:n?s.jsx(Bg,{fceCtx:e}):s.jsx(Eg,{fceCtx:e})})}const _g="h-full grid grid-rows-[1fr_auto] grid-cols-1 @[400px]/fc-body:grid-cols-2 gap-y-2 @[400px]/fc-body:gap-y-0 border-border border rounded";function Bg({fceCtx:e}){return s.jsxs("div",{className:"h-full grid grid-rows-[auto_1fr]",children:[s.jsx(xc,{fceCtx:e}),s.jsxs("div",{className:"@container/fc-body p-3 pt-0 pb-2 h-full grid grid-rows-[auto_1fr_auto]",children:[s.jsx(jc,{className:"py-1",fceCtx:e,showPropsExpand:!0}),s.jsxs("div",{className:_g,children:[s.jsx(ao,{className:"h-full",fceCtx:e}),s.jsx("div",{className:"relative px-2 py-1 border-border border-t @[400px]/fc-body:border-t-0 @[400px]/fc-body:border-l",children:s.jsx(yc,{fceCtx:e})})]}),s.jsx("div",{className:"pt-2 flex items-center justify-end gap-x-2",children:s.jsx(Sc,{fceCtx:e})})]})]})}function Eg({fceCtx:e}){return s.jsxs("div",{className:"h-full grid grid-rows-[auto_1fr]",children:[s.jsx(xc,{fceCtx:e}),s.jsxs("div",{className:"p-3 pt-0 pb-2 h-full grid grid-rows-[auto_1fr_auto] 1gap-3",children:[s.jsx(jc,{className:"py-1",fceCtx:e,showPropsExpand:!0}),s.jsx("div",{className:"-mx-3 pt-1 h-full border-border 1border-b rounded flex",children:s.jsx(ao,{className:"flex-shrink-0",fceCtx:e})}),s.jsx("div",{className:"pt-2 flex items-center justify-center gap-x-2",children:s.jsx(Sc,{fceCtx:e})})]})]})}function zg(){const e=g(to);return s.jsx(oe,{className:"h-[50vh] max-h-[75vh]",children:s.jsx("div",{children:e.map(t=>{const n=t.icon;return n&&s.jsxs("div",{className:"flex items-center gap-1 leading-5",children:[s.jsx(n,{className:"flex-none p-px size-4"}),s.jsx("div",{className:"truncate",children:t.name})]},t.id)})})})}const Vg="inline-block w-8 font-bold font-mono tracking-tight",Wg=[{key:"win",description:"for Windows apps"},{key:"web",description:"for websites"},{key:"why",description:"with problems"},{key:"cap",description:"with window caption"},{key:"cls",description:"with window classname"}];function Hg(){return s.jsx(s.Fragment,{children:s.jsx("div",{className:"w-max grid grid-cols-[auto_minmax(0,1fr)]",children:Wg.map(e=>s.jsxs(p.Fragment,{children:[s.jsxs("span",{className:Vg,children:[e.key,":"]}),e.description]},e.key))})})}const Ug=[["Ascending","0"],["Descending","1"]];function Gg(){const{order:e}=S(w.files.sortOrder);return s.jsx(Un,{items:Ug,value:e===Me.lowToHigh?"0":"1",onValueChange:t=>w.files.sortOrder.order=t==="0"?Me.lowToHigh:Me.highToLow})}function Zg({setIsOpen:e}){const[t,n]=T(Kt.textAtom);function o(r){t&&(r.key==="Escape"?(r.preventDefault(),n("")):r.key==="Enter"&&(r.preventDefault(),e(!1)))}return s.jsxs("div",{className:"text-xs grid gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ld,{className:"absolute left-3 top-1/2 -translate-y-1/2 p-px size-4"}),s.jsx(tt,{className:"pl-9 text-xs",value:t,onKeyDown:o,onChange:r=>n(r.target.value),placeholder:"Search for manifests",spellCheck:"false"})]}),s.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"font-bold",children:"Filter result"}),s.jsx(zg,{})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("div",{className:"font-bold",children:"Sort options"}),s.jsx(Gg,{})]}),s.jsxs("div",{children:[s.jsx("div",{className:"pb-0.5 font-bold",children:"Filter modifiers"}),s.jsx("div",{className:"pb-1.5 text-balance",children:"Use a search prefix to display only logins:"}),s.jsx(Hg,{})]})]})]})]})}const io="backdrop-blur-[0.5px] bg-background/80";function qg(){const[e,t]=T(so);return s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"flex-none",variant:"ghost",onClick:()=>t(!0),title:`Filter files ${pc}`,children:s.jsx(wa,{className:"p-px size-4"})}),s.jsx(_e,{open:e,onOpenChange:()=>t(!1),children:s.jsxs(Be,{className:"px-3 py-3 !w-4/5 max-w-3xl data-[state=open]:[animation-duration:200ms]",noClose:!0,hiddenTitle:"Files filter",overlayClasses:io,children:[" ",s.jsx(Zg,{setIsOpen:t})]})})]})}const Kg="!w-4/5 max-w-4xl",Xg="!w-80 min-w-fit max-w-xl",Qg="p-0 h-4/5 min-h-[60vh] max-h-[90vh] text-xs gap-0 select-none data-[state=open]:[animation:none] data-[state=closed]:[animation:none] 1data-[state=open]:[animation-duration:200ms] data-[state=closed]:[animation-duration:200ms] ";function Jg(){var o;const e=b(eo),t=g(wt),n=!((o=t==null?void 0:t.inData)!=null&&o.openItemPickerDlg);return s.jsx(_e,{open:!!t,onOpenChange:e,children:s.jsx(Re,{children:!!t&&s.jsxs(s2,{children:["//",s.jsx(xe.div,{children:s.jsx(t2,{className:h(n?Kg:Xg,Qg),noClose:!0,hiddenTitle:"Field Catalog",overlayClasses:io,children:s.jsx(Og,{fceCtx:t})})}),"// "]})})})}const Yg="fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] z-50 p-6 w-full md:w-full max-w-lg bg-background 1data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] 1data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] border sm:rounded-lg shadow-lg duration-200 grid gap-4",e2=e=>e.preventDefault(),t2=p.forwardRef(({className:e,children:t,noClose:n,withScroll:o,modal:r,overlayClasses:a,onPointerDownOutside:i,hiddenTitle:c,...l},d)=>s.jsxs(s.Fragment,{children:[o?s.jsx(On,{className:a}):s.jsx($n,{className:a}),s.jsxs(wn,{ref:d,className:v(Yg,e),onPointerDownOutside:r?e2:i,"aria-describedby":void 0,forceMount:!0,...l,children:[c&&s.jsx(ns,{className:"sr-only",children:c}),t,!n&&s.jsx(Qe,{})]})]}));function s2({children:e,container:t}){return s.jsx(di,{container:t,forceMount:!0,children:e})}const Ut="block mb-1 text-xs font-semibold",ct="py-1 flex flex-col gap-2",q="text-xs font-normal flex place-items-center gap-1.5 cursor-pointer";function n2({setIsOpen:e}){const t=S(w).files.itemsState,{showStatusbar:n,showOptOnRight:o,showWelcome:r,showQuickXml:a}=S(w.appUi.uiGeneral),i=S(w,{sync:!0}).right.mani;return s.jsxs("div",{className:"min-h-56 text-xs select-none",children:[s.jsxs(xs,{className:"relative text-base font-bold border-border border-b flex items-center",children:[s.jsx("div",{className:"py-2",children:"PMAT Options"}),s.jsx(Qe,{className:"right-1 -top-0.5 p-2 hover:bg-muted hover:rounded-md",tabIndex:-1,onClick:()=>e(!1)})]}),s.jsxs("div",{className:"px-4 py-4 grid grid-cols-1 gap-6",children:[s.jsxs("div",{children:[s.jsx(R,{className:Ut,children:"File list"}),s.jsxs("div",{className:ct,children:[s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:t.showIndex,onCheckedChange:c=>w.files.itemsState.showIndex=!!c}),"Show file index"]}),s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:t.showIeMarker,onCheckedChange:c=>w.files.itemsState.showIeMarker=!!c}),"Show IE warning icon"]}),s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:t.showFname,onCheckedChange:c=>w.files.itemsState.showFname=!!c}),"Show always file name"]}),s.jsxs(R,{className:h(q,t.showFname&&"opacity-30 pointer-events-none"),children:[s.jsx(Z,{checked:t.showChosen,onCheckedChange:c=>w.files.itemsState.showChosen=!!c}),"Show user defined name instead of domain name"]}),s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:t.selectAsTrigger,onCheckedChange:c=>w.files.itemsState.selectAsTrigger=!!c}),"Select the same file will deselect it"]}),s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:t.selectEmptySpace,onCheckedChange:c=>w.files.itemsState.selectEmptySpace=!!c}),"Empty space click will deselect current item"]})]})]}),s.jsxs("div",{children:[s.jsx(R,{className:Ut,children:"UI/UX"}),s.jsx("div",{className:ct,children:s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:r,onCheckedChange:c=>w.appUi.uiGeneral.showWelcome=!!c}),"Show Welcome screen on start"]})}),s.jsx("div",{className:ct,children:s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:n,onCheckedChange:c=>w.appUi.uiGeneral.showStatusbar=!!c}),"Show status bar"]})}),s.jsx("div",{className:ct,children:s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:a,onCheckedChange:c=>w.appUi.uiGeneral.showQuickXml=!!c}),"Show quick access button to XML manifest content"]})}),s.jsx("div",{className:ct,children:s.jsxs(R,{className:q,children:[s.jsx(Z,{checked:o,onCheckedChange:c=>w.appUi.uiGeneral.showOptOnRight=!!c}),"Show manifest form option labels on the right side"]})})]}),s.jsxs("div",{children:[s.jsx(R,{className:Ut,children:"Dialog Password Policy"}),s.jsxs(R,{className:q,children:["Number of generated passwords",s.jsx(tt,{className:"h-6 px-0 max-w-10 text-xs text-center",value:i.nToGenerate,onChange:c=>w.right.mani.nToGenerate=+c.target.value})]})]}),s.jsx("div",{children:s.jsx(o2,{})})]}),s.jsx("div",{className:"py-2 boreder-border border-t text-center",children:s.jsx(C,{variant:"default",size:"sm",onClick:()=>e(!1),children:"Close"})})]})}function o2(){const{allowHandleFiles:e,showUiHeader:t}=S(w.appUi.uiAdvanced),{showFldCat:n}=S(w.files.shownManis);return s.jsxs(s.Fragment,{children:[s.jsx(R,{className:Ut,children:"Advanced settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 grid-flow-dense",children:[s.jsxs(R,{className:h("col-start-1",q),children:[s.jsx(Z,{checked:e,onCheckedChange:o=>w.appUi.uiAdvanced.allowHandleFiles=!!o}),"Allow opening of individual files"]}),s.jsxs(R,{className:h("col-start-1",q),children:[s.jsx(Z,{checked:n,onCheckedChange:o=>w.files.shownManis.showFldCat=!!o}),"Show field catalog files"]}),s.jsxs(R,{className:h("col-start-2",q),children:[s.jsx(Z,{checked:t,onCheckedChange:o=>w.appUi.uiAdvanced.showUiHeader=!!o}),"Show application main header"]})]})]})}const r2="p-0 !w-1/2 max-w-xl data-[state=open]:[animation-duration:200ms]";function a2(){const[e,t]=T(oo);return e?s.jsx(s.Fragment,{children:s.jsx(_e,{open:e,onOpenChange:()=>t(!1),children:s.jsx(Be,{className:r2,noClose:!0,hiddenTitle:"Options",overlayClasses:io,children:s.jsx(n2,{setIsOpen:t})})})}):null}function i2(){return s.jsxs(s.Fragment,{children:[s.jsx(a2,{}),s.jsx(G0,{}),s.jsx(Jg,{}),s.jsx(m0,{}),s.jsx(Zo,{}),s.jsx(Zo,{openAsFolder:!0}),s.jsx(tp,{}),s.jsx(xp,{doSetFilesFromDropAtom:P1}),s.jsx(af,{}),s.jsx(cf,{})]})}function c2(){const e=b(kt);return s.jsx(s.Fragment,{children:s.jsxs(E,{onClick:()=>e(!0),children:["Create manifest...",s.jsx(et,{className:Nt,children:l0})]})})}function l2(){const e=g(ne),t=b(St);return s.jsx(s.Fragment,{children:s.jsxs(E,{onClick:()=>e&&t(e),disabled:!e,children:["Save",s.jsx(et,{className:Nt,children:d0})]})})}function d2(){const e=g(ne),t=b(Mx);return s.jsx(s.Fragment,{children:s.jsx(E,{onClick:()=>e&&t(e),disabled:!e,children:"Save As..."})})}function u2(){const e=b($i),t=!!S(fs).size;return s.jsx(s.Fragment,{children:s.jsxs(E,{onClick:e,disabled:!t,children:["Save All",s.jsx(et,{className:Nt,children:u0})]})})}function m2(){return s.jsx(s.Fragment,{children:Se()&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{}),s.jsx(E,{onClick:()=>Te.menuCommand({what:"exit"}),children:"Exit"})]})})}function es({openAsFolder:e,...t}){const n=b(rc);return s.jsx(C,{onClick:()=>hc(n,e),...t,children:e?"Open Folder...":"Open Files... (advanced)"})}function f2(){const{allowHandleFiles:e}=S(w.appUi.uiAdvanced);return s.jsxs(s.Fragment,{children:[e&&s.jsx(es,{className:"text-[.65rem]"}),s.jsx(es,{className:"text-[.65rem]",openAsFolder:!0})]})}function h2(){const e=b(qi),t=p.useState(()=>f(null))[0];function n(){Bi()?e({inData:{openItemPickerDlg:!1,showTxt:!0,showPsw:!0,outBoxAtom:t}}):_.warning(s.jsx("div",{className:"text-zinc-700",children:"The field catalog is not available until the folder is opened. Open the folder first."}))}return s.jsx(C,{className:"text-[.65rem]",onClick:n,children:"Field Catalog..."})}function Ds({label:e,theme:t,current:n}){return s.jsxs(E,{className:"text-xs grid grid-cols-[16px,1fr] items-center gap-x-2",onClick:()=>w.appUi.theme=t,children:[n===t&&s.jsx(br,{className:"size-4"}),s.jsx("div",{className:"col-start-2",children:e})]})}function p2(){const{theme:e}=S(w).appUi,t=e==="dark",n=e==="system",o=!t&&!n;return s.jsxs("div",{className:"focus-within:ring-1 focus-within:ring-ring rounded-md flex items-center",children:[s.jsxs(C,{variant:"ghost",size:"xs",tabIndex:-1,className:"py-0 border-y border-l border-input rounded-r-none",onClick:()=>w.appUi.theme=w.appUi.theme==="dark"?"light":"dark",children:[n&&s.jsx(Dd,{className:"size-4"}),o&&s.jsx(Md,{className:"size-4"}),t&&s.jsx(Td,{className:"size-4 p-0.5"})]}),s.jsxs(Je,{children:[s.jsx(Ye,{asChild:!0,children:s.jsx(C,{variant:"ghost",size:"xs",className:"px-1 py-0 border border-input rounded-l-none focus-visible:ring-0",children:s.jsx(Ol,{className:"size-3"})})}),s.jsxs(Ee,{align:"end",children:[s.jsx(Ds,{label:"Light",theme:"light",current:e}),s.jsx(Ds,{label:"Dark",theme:"dark",current:e}),s.jsx(Ds,{label:"System",theme:"system",current:e})]})]})]})}function x2(){const e=b(kt);return s.jsx(C,{variant:"outline",className:"text-[.65rem]",onClick:()=>e(!0),children:"Create mani"})}function g2(){const e=b(vs);return s.jsx(C,{variant:"outline",className:"text-[.65rem]",onClick:()=>e(!0),children:"Create"})}function b2(){const{showUiHeader:e}=S(w.appUi.uiAdvanced);return e?s.jsxs("div",{className:"px-2 py-2 bg-muted/20 border-border/50 border-b flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x2,{}),s.jsx(g2,{}),s.jsx(f2,{}),s.jsx(h2,{})]}),s.jsx(p2,{})]}):s.jsx("div",{})}const Qo={enabled:!1,constrainSet:`${y.ConstrainSet.withspecial}`,constrainSet0:`${y.ConstrainSet.withspecial}`,isCustom:!1,custom:"",minLen:Xt("8",{type:"number"}),maxLen:Xt("12",{type:"number"}),explanation:"",errorText:"",testPassword:"",testVerified:"",constrainPsw:`${y.ConstrainPsw.diffAp}`,useAs:`${y.UseAs.verify}`,fakeOptions:""},ln=[..._l,"Use custom rule"];function Cc(e){const t=Hu(e.policy,e.policy2,e.options),n=t.useAs!==y.UseAs.none,o=t.custom!=="";return n?{...Qo,enabled:n,constrainSet:o?`${ln.length-1}`:`${t.constrainSet}`,constrainSet0:`${t.constrainSet}`,isCustom:o,custom:t.custom,minLen:Xt(`${t.minLen}`,{type:"number",validate:Df}),maxLen:Xt(`${t.maxLen}`,{type:"number",validate:Pf}),constrainPsw:`${t.constrainPsw}`,useAs:`${t.useAs}`,fakeOptions:e.options}:Qo}function j2(e,t){const{enabled:n,constrainSet:o,custom:r,minLen:a,maxLen:i,explanation:c,testPassword:l,testVerified:d,constrainPsw:u,useAs:m}=e;return{enabledAtom:I(n,t),constrainSetAtom:I(o,t),constrainSet0Atom:I(o,t),isCustomAtom:I(e.isCustom,t),customAtom:I(r,t),minLenAtom:I(a,t),maxLenAtom:I(i,t),explanationAtom:I(c,t),errorTextAtom:I(e.errorText,t),testPasswordAtom:I(l,t),testVerifiedAtom:I(d,t),constrainPswAtom:I(u,t),useAsAtom:I(m,t),fakeOptionsAtom:I(e.fakeOptions,t)}}function kc(e,t,n){return{enabled:t(e.enabledAtom),constrainSet:t(e.constrainSetAtom),constrainSet0:t(e.constrainSet0Atom),isCustom:t(e.isCustomAtom),custom:t(e.customAtom),minLen:t(e.minLenAtom),maxLen:t(e.maxLenAtom),explanation:t(e.explanationAtom),errorText:t(e.errorTextAtom),testPassword:t(e.testPasswordAtom),testVerified:t(e.testVerifiedAtom),constrainPsw:t(e.constrainPswAtom),useAs:t(e.useAsAtom),fakeOptions:t(e.fakeOptionsAtom)}}function w2(e,t){return e.enabled===t.enabled&&e.constrainSet===t.constrainSet&&e.custom===t.custom&&e.minLen.data===t.minLen.data&&e.maxLen.data===t.maxLen.data&&e.constrainPsw===t.constrainPsw&&e.useAs===t.useAs&&e.fakeOptions===t.fakeOptions}function v2(e,t,n,o){o(t.enabledAtom,e.enabled),o(t.constrainSetAtom,e.constrainSet),o(t.constrainSet0Atom,e.constrainSet0),o(t.isCustomAtom,e.isCustom),o(t.customAtom,e.custom),o(t.minLenAtom,e.minLen),o(t.maxLenAtom,e.maxLen),o(t.explanationAtom,e.explanation),o(t.errorTextAtom,e.errorText),o(t.testPasswordAtom,e.testPassword),o(t.testVerifiedAtom,e.testVerified),o(t.constrainPswAtom,e.constrainPsw),o(t.useAsAtom,e.useAs),o(t.fakeOptionsAtom,e.fakeOptions)}function y2(e){const t=e.enabled?e.useAs==="0"?y.UseAs.none:e.useAs==="1"?y.UseAs.verify:y.UseAs.generate:y.UseAs.none,n=e.isCustom?+e.constrainSet0:+e.constrainSet,o=+e.constrainPsw,r={useAs:t,minLen:+e.minLen.data,maxLen:+e.maxLen.data,constrainSet:n,constrainPsw:o,custom:e.custom};return Ku(r,e.fakeOptions)}function A2(e,t){const n=Cc(e),o=j2(n,t),r=new nm;return{...o,original:e,fromFile:n,changed:!1,parser:r}}function N2(e,t,n){const o=kc(e,t),r=!w2(o,e.fromFile);e.changed=r}const S2=$e(N2);function C2({children:e,checked:t,onChange:n,className:o,...r}){return s.jsxs("label",{className:h("w-max inline-flex items-center gap-x-2 select-none cursor-pointer",o),...r,children:[s.jsx("input",{className:"place-self-center size-4 dark-checkbox",checked:t,onChange:n,type:"checkbox"}),e]})}function Jo({children:e,name:t,checked:n,onChange:o,className:r,...a}){return s.jsxs("label",{className:h("w-max inline-flex items-center gap-x-2 select-none cursor-pointer",r),...a,children:[s.jsx("input",{className:"size-4 dark-radio",name:t,checked:n,onChange:o,type:"radio"}),e]})}function k2({header:e,subHeader:t}){return s.jsxs(xs,{children:[s.jsx(gs,{className:"text-base",children:e}),s.jsx(mi,{className:"text-xs",children:t})]})}function Yo({error:e,className:t}){return s.jsx(s.Fragment,{children:e&&s.jsx(Tn,{className:h("absolute right-0.5 top-2 transform -translate-y-1/2 size-3 text-red-500/90",t)})})}function F2({dlgUiCtx:e}){const t=b(It),n=()=>t({dlgUiCtx:e});return s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsx("div",{className:"",children:"Password length"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{children:"min"}),s.jsx(nn,{stateAtom:e.minLenAtom,Trigger:Yo,children:s.jsx(sn,{className:"px-2 h-8 text-xs max-w-[6ch]",stateAtom:e.minLenAtom,onValueStateChange:n})}),s.jsx("div",{children:"max"}),s.jsx(nn,{stateAtom:e.maxLenAtom,Trigger:Yo,children:s.jsx(sn,{className:"px-2 h-8 text-xs max-w-[6ch]",stateAtom:e.maxLenAtom,onValueStateChange:n})})]})]})}function I2({dlgUiCtx:e}){const t=b(e.isCustomAtom),[n,o]=T(e.constrainSetAtom),r=b(e.constrainSet0Atom);function a(i){const c=+i===ln.length-1;c||r(i),t(c),o(i)}return s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{children:"Password complexity rule"}),s.jsx(R,{className:"flex-1 text-xs flex flex-col 1items-center",children:s.jsx(Un,{items:ln,value:n,onValueChange:a})})]})}function M2({dlgUiCtx:e}){return s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx(I2,{dlgUiCtx:e}),s.jsx(F2,{dlgUiCtx:e})]})}const As="h-6 bg-background active:scale-[.97] cursor-pointer";function T2(){const e=w.right.mani,t=S(e).openTestArea;return s.jsxs(C,{className:h(As,"px-2 space-x-0.5"),size:"sm",onClick:()=>e.openTestArea=!e.openTestArea,children:[s.jsx("span",{children:"Test area"}),s.jsx(cs,{className:h("size-3 transition-all",t&&"rotate-180")})]})}function D2({children:e}){const t=S(w).right.mani.openTestArea?["policy"]:[];return s.jsx(Rf,{type:"multiple",value:t,onValueChange:n=>w.right.mani.openTestArea=!!n.length,children:s.jsx(ci,{value:"policy",className:"border-none",children:s.jsx(li,{children:e})})})}function Fc({errorText:e,className:t,...n}){return s.jsx("div",{className:h("mt-1 min-h-4 text-red-500 select-text",!e&&"invisible",t),...n,children:e})}function P2({dlgUiCtx:e}){const t=g(e.explanationAtom),n=g(e.errorTextAtom);return s.jsxs("div",{className:"mt-2",children:[t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:"Password should consist of"}),s.jsx("div",{className:"grid grid-cols-[auto,1fr]",children:t.split(`
`).filter(Boolean).map((o,r)=>s.jsxs(p.Fragment,{children:[s.jsx("div",{className:"pl-4 pr-1",children:s.jsx(Mn,{className:"size-3"})}),s.jsx("div",{className:"text-xs",children:o},r)]},r))})]}),s.jsx(Fc,{className:"font-semibold",errorText:n})]})}const R2="h-8 text-mani-foreground bg-mani-background border-mani-border-muted";function L2({dlgUiCtx:e}){const[t,n]=T(e.testPasswordAtom),o=g(e.testVerifiedAtom),r=b(co);function a(i){const c=i.target.value;n(c),r({dlgUiCtx:e})}return s.jsxs("div",{className:"relative w-full",children:[s.jsx(tt,{className:R2,value:t,onChange:a,...Oe}),t&&s.jsxs("div",{className:"absolute right-2 top-0.5 flex items-center gap-2",children:[o&&s.jsx("div",{className:h(o==="0"?"text-red-500":"text-green-500"),children:o==="0"?"Invalid":"Valid"}),s.jsx("div",{className:"text-muted-foreground",children:t.length})]})]})}function $2({generatedList:e}){return s.jsx("div",{className:"mb-4 px-4 grid grid-cols-[auto,auto,auto,auto] gap-x-2 gap-y-0.5",children:e.map((t,n)=>{const o=`${n+1}`.padStart(2," "),r=`select-none ${t.ok?"text-green-500":"text-red-500"}`,a="text-[0.65rem] text-end text-muted-foreground select-none";return s.jsxs(p.Fragment,{children:[s.jsx("div",{className:r,title:O2,children:t.ok?"":""}),s.jsx("div",{className:a,title:_2,children:o}),s.jsx("div",{className:"font-mono",title:B2,children:t.psw}),s.jsx("div",{className:a,title:E2,children:`${t.psw.length}`.padStart(2," ")})]},n)})})}const O2="result of checking",_2="index",B2="generated password",E2="password length";function z2(e){const t=e.map((n,o)=>`${`${o+1}`.padStart(3," ")}. ${n.ok?"":""} ${n.psw}`).join(`
`);navigator.clipboard.writeText(t)}function V2({openAtom:e}){const[t,n]=T(e),o=g(Ic);return s.jsxs(Bn,{open:t,onOpenChange:n,children:[s.jsx(En,{asChild:!0,children:s.jsx("div",{})}),s.jsx(zn,{children:s.jsxs(bs,{className:"relative mx-4 p-0 w-auto min-w-52 text-foreground bg-background border-border border shadow",sideOffset:5,align:"center",children:[s.jsxs("div",{className:"text-xs",children:[s.jsxs("div",{className:"p-4 text-base text-center bg-muted rounded-t select-none overflow-hidden",children:[o.length," generated passwords"]}),s.jsx(oe,{className:"my-2 h-64",fullHeight:!0,children:t&&s.jsx($2,{generatedList:o})}),s.jsx("div",{className:"text-base text-center bg-muted rounded-b select-none overflow-hidden",children:s.jsx(C,{className:"w-full h-10 border-0 rounded-t-none active:scale-90",title:"Copy all generated passwords to clipboard",onClick:()=>z2(o),children:s.jsx(Pd,{className:"size-4"})})})]}),s.jsx(Vn,{className:"fill-muted stroke-border"})]})})]})}const W2="active:scale-[.97]";function H2({dlgUiCtx:e}){const t=p.useState(()=>f(!1))[0],n=b(Ic),o=b(t),r=S(w).right.mani.nToGenerate,a=b(lb);return s.jsxs("div",{children:[s.jsx(C,{className:W2,variant:"outline",size:"sm",title:`Generate test password. Ctrl+Click to generate ${r} passwords.`,onClick:i=>{i.ctrlKey?(n({dlgUiCtx:e}),o(!0)):a({dlgUiCtx:e})},children:"Generate"}),s.jsx(V2,{openAtom:t})]})}function U2({dlgUiCtx:e}){return s.jsxs("div",{className:"relative mt-4 px-4 pt-3 pb-1 border-border border rounded flex flex-col",children:[s.jsx("div",{className:"absolute left-0 -top-[9px] font-semibold",children:"Test area"}),s.jsx("div",{className:"mt-4",children:"Test password"}),s.jsxs("div",{className:"h-8 flex items-center space-x-2",children:[s.jsx(L2,{dlgUiCtx:e}),s.jsx(H2,{dlgUiCtx:e})]}),s.jsx(P2,{dlgUiCtx:e})]})}function G2(){return s.jsx(En,{asChild:!0,children:s.jsx(C,{className:h(As,"aspect-square"),size:"sm",tabIndex:-1,title:"Explanation",children:"?"})})}const Z2=[{c1:"A",c2:"Uppercase letters, i.e. A through Z"},{c1:"a",c2:"Lowercase letters, i.e. a through z "},{c1:"d",c2:"Digits, i.e. 0 through 9"},{c1:"s",c2:"Special characters, i.e. !#$%&()*+,?./:;??@[]^_`{|}~"},{c1:"( )",c2:"Group rule. Randomize order of generated characters inside group.         For example:         (asd) would require or generate a password with a lower case letter, a special character and a digit in any order, i.e. b$3, #1f or 0z!         But the use of asd without the parentheses would always have a lowercase character first, a special character second and then a number."},{c1:"[ ]",c2:"Characters set rule. Define a custom character set i.e. [abcdef] would limit the user to only those letters in the specified position.         For example:         A custom rule of [abcd]ds would generate only passwords with a, b, c or d in the first position,         a digit in the second position and a special character in the third position."},{c1:"{n,m}",c2:"Range rule. Define a range of acceptable occurrences of the previously indicated character set.         For example:         d{2,4}a{2,}s{3} indicates 2 to 4 digits followed by 2 or more lower case letters and 3 special characters.                 Note that when there is a comma but no upper range defined, as in {2,}, then the upper limit is only         constrained by the maximum length of the password as specified in the field described below.         When only one value is specified - without the comma, as in {3}, then the lower and upper         range are the same, i.e. in this case, exactly 3 special characters."},{c1:"~",c2:"Prevent two identical consecutive characters         For example:         This symbol would prevent passwords such as abCCd or fkiq&33."},{c1:"&",c2:"Prevent a character being in the same position as in the most recent password         For example:         This symbol would prevent using the password abc3def if the most recent previous password was dar3feg."}];function q2(){return s.jsx("div",{className:"mb-4 px-4 grid grid-cols-[auto,auto] gap-2",children:Z2.map((e,t)=>s.jsxs(p.Fragment,{children:[s.jsx("div",{className:"text-center font-bold",children:e.c1}),s.jsx("div",{className:"mr-3",children:e.c2})]},t))})}function K2(){return s.jsxs(Bn,{children:[s.jsx(G2,{}),s.jsx(zn,{children:s.jsxs(bs,{className:"relative mx-4 p-0 w-[460px] text-foreground bg-background border-border border shadow",sideOffset:5,align:"center",children:[s.jsxs("div",{className:"my-3 text-xs",children:[s.jsx("div",{className:"mb-2 text-base text-center",children:"Custom rule parts"}),s.jsx(oe,{className:"h-64",fullHeight:!0,children:s.jsx(q2,{})})]}),s.jsx(rh,{className:"absolute top-4 right-4",children:s.jsx(uu,{className:"size-3"})}),s.jsx(Vn,{className:"fill-background stroke-border"})]})})]})}function X2(){return s.jsx(Ye,{asChild:!0,children:s.jsx(C,{className:h(As,"aspect-square"),size:"sm",tabIndex:-1,title:"Explanation",children:s.jsx("span",{children:"+"})})})}const er=[{label:"Add characters set [A-Z]",action:"A{1,2}"},{label:"Add characters set [a-z]",action:"a{1,2}"},{label:"Add set of numbers",action:"d{1,2}"},{label:"Add special characters",action:"s{1,2}"},{label:"Add characters set",action:"[X-Z]{1,2}"},{label:"Add group",action:""}];function Q2({label:e,...t}){return s.jsx(E,{className:"text-xs",...t,children:s.jsx("div",{className:"",children:e})})}function J2({dlgUiCtx:e}){const t=b(e.customAtom),n=b(It);function o(r){t(a=>{const i=er[r],c=i.action?`${a}${i.action}`:`(${a})`;return n({dlgUiCtx:e,custom:c}),c})}return s.jsx("div",{className:"focus-within:ring-1 focus-within:ring-ring rounded-md flex items-center",children:s.jsxs(Je,{children:[s.jsx(X2,{}),s.jsx(Ee,{align:"start",className:"",children:er.map((r,a)=>s.jsx(Q2,{label:r.label,onSelect:()=>o(a)},a))})]})})}function Y2(){return s.jsx(En,{asChild:!0,children:s.jsx(C,{className:h(As,"p-0 text-red-500 hover:text-red-500 aspect-square"),size:"sm",tabIndex:-1,title:"Attention. Click to see the message",children:s.jsx(Tn,{className:"pt-px size-5"})})})}function eb({dlgUiCtx:e}){const t=g(e.errorTextAtom);return s.jsxs(Bn,{children:[t&&s.jsx(Y2,{}),s.jsx(zn,{children:s.jsxs(bs,{className:"relative mx-4 py-0 w-auto text-red-500 border-red-500 border shadow",sideOffset:5,align:"center",children:[s.jsx("div",{className:"my-3 text-xs",children:s.jsx(Fc,{errorText:t})}),s.jsx(Vn,{className:"fill-background stroke-red-500"})]})})]})}function tb({dlgUiCtx:e}){const[t,n]=T(e.customAtom),o=b(It);function r(a){o({dlgUiCtx:e,custom:a}),n(a)}return s.jsx(tt,{className:"pr-28 h-8 font-mono text-xs text-mani-foreground bg-mani-background border-mani-border-muted",value:t,onChange:a=>r(a.target.value),...Oe})}function sb({dlgUiCtx:e}){const t=g(e.isCustomAtom);return s.jsxs("div",{children:[s.jsx("div",{className:h("flex items-center gap-2",!t&&"invisible pointer-events-none"),children:s.jsxs("div",{className:"w-full space-y-1",children:[s.jsx("div",{className:"",children:"Custom rule"}),s.jsxs("div",{className:h("relative h-8 flex items-center justify-between space-x-2"),children:[s.jsx(tb,{dlgUiCtx:e}),s.jsxs("div",{className:"absolute right-1 flex items-center gap-1",children:[s.jsx(eb,{dlgUiCtx:e}),s.jsx(J2,{dlgUiCtx:e}),s.jsx(K2,{}),s.jsx(T2,{})]})]})]})}),t&&s.jsx(D2,{children:s.jsx(U2,{dlgUiCtx:e})})]})}function nb({dlgUiCtx:e}){return s.jsxs("div",{className:"mt-2 flex flex-col gap-2 select-none",children:[s.jsx(M2,{dlgUiCtx:e}),s.jsx(sb,{dlgUiCtx:e})]})}function ob({dlgUiCtx:e}){const[t,n]=T(e.constrainPswAtom);return s.jsx("div",{children:s.jsx(Un,{className:"mt-2 w-fit",items:_t,value:t,onValueChange:n})})}function rb({dlgUiCtx:e}){const[t,n]=T(e.useAsAtom);return s.jsxs("div",{className:"mt-2 grid space-y-2",children:[s.jsx(Jo,{name:"gen-type",checked:t===`${y.UseAs.verify}`,onChange:()=>n(`${y.UseAs.verify}`),children:"The user will enter a password"}),s.jsx(Jo,{name:"gen-type",checked:t===`${y.UseAs.generate}`,onChange:()=>n(`${y.UseAs.generate}`),children:"The password manager will generate a password"})]})}const Ps="text-sm font-bold border-gray-500 border-b";function ab({dlgUiCtx:e,doCloseWithOk:t}){const[n,o]=T(e.enabledAtom);return s.jsxs(s.Fragment,{children:[s.jsx(k2,{header:"Password Policy Editor",subHeader:"Specify password complexity, history and generation requirements."}),s.jsx(C2,{className:"mb-2",checked:n,onChange:()=>o(r=>!r),children:"Enable password policy"}),s.jsxs("div",{className:h("flex flex-col space-y-4",!n&&"opacity-10 pointer-events-none"),children:[s.jsxs("div",{children:[s.jsx("h2",{className:Ps,children:"Password complexity"}),s.jsx(nb,{dlgUiCtx:e})]}),s.jsxs("div",{children:[s.jsx("h2",{className:Ps,children:"Password history restrictions"}),s.jsx(ob,{dlgUiCtx:e})]}),s.jsxs("div",{children:[s.jsx("h2",{className:Ps,children:"Password generation"}),s.jsx(rb,{dlgUiCtx:e})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-x-2",children:[s.jsx(C,{size:"sm",className:"min-w-16",onClick:()=>t(!0),children:"OK"}),s.jsx(C,{size:"sm",className:"min-w-16",onClick:()=>t(!1),children:"Cancel"})]})]})}const co=f(null,(e,t,{dlgUiCtx:n,psw:o,prevPsw:r=""})=>{const{parser:a,testPasswordAtom:i,testVerifiedAtom:c}=n;o===void 0&&(o=e(i));const l=za(a.rulesAndMeta,r,o,a.rulesAndMeta.noRepeat);t(c,l?"1":"0")});function ib({min:e,max:t}){if(isNaN(e))return"Min password length is not a number";if(isNaN(t))return"Max password length is not a number";if(e<1)return"Min password length cannot be less than 1";if(t<e)return"Max password length is less than min password length"}function cb({min:e,max:t,totalMin:n,totalMax:o}){if(e>n)return`The custom rule can generate ${n} characters, but minimum required is ${e}`;if(t<o)return`The custom rule can generate ${o} characters, but maximun required is ${t}`}const It=f(null,(e,t,{dlgUiCtx:n,custom:o})=>{const{customAtom:r,parser:a,minLenAtom:i,maxLenAtom:c,explanationAtom:l,errorTextAtom:d,testVerifiedAtom:u}=n;try{t(u,""),o===void 0&&(o=e(r));const m={min:+e(i).data,max:+e(c).data},x=ib(m);if(x){t(d,x);return}const{min:j,max:A}=m;a.doParse({custom:o,minTotal:j,maxTotal:A});const k=[];Ia(a.rulesAndMeta.rules,k);const M=k.join(`
`);if(t(l,M),t(co,{dlgUiCtx:n}),o){const O=Nm(a.rulesAndMeta),U=cb({min:j,max:A,totalMin:O.totalMin,totalMax:O.totalMax});if(U){t(d,U);return}}t(d,"")}catch(m){t(d,em(m)),t(u,"")}}),lb=f(null,(e,t,{dlgUiCtx:n,prevPsw:o=""})=>{const{parser:r,customAtom:a,errorTextAtom:i,testPasswordAtom:c}=n;if(!e(a)){t(i,"The custom rule is empty");return}const d=Ba(r.rulesAndMeta,r.rulesAndMeta.noRepeat,o);t(c,d),t(co,{dlgUiCtx:n,psw:d,prevPsw:o})}),Rs=f([]),Ic=f(e=>e(Rs),(e,t,{dlgUiCtx:n})=>{const{parser:o,customAtom:r}=n;if(!e(r)){t(Rs,[]);return}const i="",c=[],l=w.right.mani.nToGenerate;let d=!l||isNaN(l)?50:l;for(let u=0;u<d;u++){const m=Ba(o.rulesAndMeta,o.rulesAndMeta.noRepeat,""),x=za(o.rulesAndMeta,i,m,o.rulesAndMeta.noRepeat);c.push({ok:x,psw:m})}t(Rs,c)}),db=f(null,(e,t,n)=>{const{dlgUiCtx:o,policiesAtom:r,openAtom:a,toastIdAtom:i,byOkButton:c}=n;if(!o.changed){t(a,!1);return}if(!c){ub(n,e,t),t(a,!1);return}const l=kc(o,e);if(l.isCustom&&!l.custom){const k="Custom rule is empty",M=_.error(k);t(o.errorTextAtom,k),t(i,M);return}if(!(!l.minLen.error&&!l.maxLen.error&&+l.minLen.data<=+l.maxLen.data)){const k=l.minLen.error||l.maxLen.error||"Min length must be less than max length",M=_.error(k);t(i,M),console.log("Dlg. close: toastId from atom",M);return}const m=y2(l);t(r,m);const x=JSON.stringify(l,null,2),j=JSON.stringify(m,null,2),A=o.changed?`
state ${x}
file ${j}`:"";console.log(`%cDlg. changed=${o.changed}%c${A}`,"background-color: purple; color: bisque","background-color: #282828; color: white"),t(a,!1)});function ub({dlgUiCtx:e,policiesAtom:t,toastIdAtom:n},o,r){const a=o(n);a&&_.dismiss(a),r(t,e.original);const i=Cc(e.original);i.errorText="",v2(i,e,o,r),r(It,{dlgUiCtx:e,custom:i.custom}),e.changed=!1}function mb({openAtom:e,toastIdAtom:t,policiesAtom:n}){const o=g(e),r=g(n),a=b(It),i=b(db);function c(d){i({dlgUiCtx:l,policiesAtom:n,openAtom:e,toastIdAtom:t,byOkButton:d})}const l=p.useMemo(()=>{function d({get:u,set:m}){S2(l,u,m)}return A2(r,d)},[r.policy,r.policy2,r.options]);return p.useEffect(()=>{a({dlgUiCtx:l})},[l]),s.jsx(_e,{open:o,onOpenChange:()=>c(!1),modal:!0,children:s.jsxs(Be,{className:"px-6 py-4 max-w-[500px] text-xs select-none",modal:!0,withScroll:!0,noClose:!0,children:[" ",s.jsx(ab,{dlgUiCtx:l,doCloseWithOk:c}),s.jsx(Qe,{className:"p-2 top-3 hover:bg-muted active:scale-[.97] focus:ring-0",tabIndex:-1})]})})}function fb({openAtom:e,toastIdAtom:t,policiesAtom:n}){return g(e)?s.jsx(mb,{openAtom:e,toastIdAtom:t,policiesAtom:n}):null}function hb(){const e=S(fs).size;return e?s.jsxs("div",{className:"px-1.5 py-0.5 text-orange-800 bg-orange-400 border-border border rounded flex items-center",children:[s.jsx(Aa,{className:"mr-0.5 size-3 text-orange-800 opacity-70",colorize:!0}),s.jsxs("span",{className:"text-[0.65rem] w-max",children:[e," unsaved"]})]}):null}function pb(){const[e,t]=T(Kt.textAtom);return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-light",children:"Filter:"}),s.jsx("div",{className:"ml-1 truncate",children:e}),s.jsx(C,{className:"flex-none p-1 h-auto",size:"xs",variant:"ghost",onClick:()=>t(""),children:s.jsx(In,{className:"size-3"})})]}):null}function xb(){const e=b(oo);return s.jsx(s.Fragment,{children:s.jsxs(E,{onClick:()=>e(!0),children:["Options",s.jsx(et,{className:Nt,children:c0})]})})}function gb(){const e=b(so);return s.jsxs(E,{onClick:()=>{e(!0)},children:["Filter files...",s.jsx(et,{className:Nt,children:pc})]})}function bb(){const e=b(_1);return s.jsx(E,{onClick:()=>{e()},children:"Clear files list"})}function jb(){return s.jsxs(s.Fragment,{children:[s.jsx(i0,{}),s.jsx(ue,{}),s.jsx(c2,{}),s.jsx(ue,{}),s.jsx(l2,{}),s.jsx(d2,{}),s.jsx(u2,{}),s.jsx(ue,{}),s.jsx(gb,{}),s.jsx(bb,{}),s.jsx(ue,{}),s.jsx(xb,{}),s.jsx(m2,{})]})}function wb(){const[e,t]=p.useState(!1);return s.jsxs(Je,{open:e,onOpenChange:t,modal:!0,children:[s.jsx(Ye,{asChild:!0,children:s.jsx(C,{variant:"ghost",children:s.jsx(is,{className:"size-4 fill-current"})})}),s.jsx(Ee,{className:"min-w-48 text-xs",align:"start",children:s.jsx(jb,{})})]})}const dn="px-2 py-1 text-xs bg-muted/30 border-border border-b";function vb({className:e,...t}){return s.jsxs("div",{className:h(dn,"h-10 select-none flex items-center justify-between gap-1",e),...t,children:[s.jsxs("div",{className:"pl-2.5 flex items-center gap-2",children:["Files",s.jsx(hb,{})]}),s.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_auto_auto] items-center",children:[s.jsx(pb,{}),s.jsx(qg,{}),s.jsx(wb,{})]})]})}const yb="data-tree-id",Ab="data-tree-folder-trigger",Nb="folder",Sb="folder-trigger";function un(e,t){if(e)if(e instanceof Array)for(let n=0;n<e.length;n++)t(e[n]),un(e[n],t);else e.children&&un(e.children,t)}function Mc(e){return e.map(t=>({...t,children:t.children?Mc(t.children):void 0}))}function mt(e,t){if(t&&e){!Array.isArray(e)&&(e=[e]);for(const n of e){if(n.id==t)return n;if(n.children){const o=mt(n.children,t);if(o)return o}}}}function Cb(e,t,n){const o=[];return t&&r(e,t),o;function r(a,i){if(a)if(a instanceof Array)for(let c=0;c<a.length;c++){if(o.push(a[c].id),r(a[c],i)&&!n)return!0;n||o.pop()}else{if(!n&&a.id==i)return!0;if(a.children)return r(a.children,i)}}}function kb(e,t,n){var i,c,l;if(!["ArrowDown","ArrowUp","End","Home","Enter"].includes(t.key))return;const r=[...e.querySelectorAll(`[${yb}]`)].map(d=>({id:d.dataset.treeId,el:d}));if(!r.length)return;if(t.preventDefault(),t.stopPropagation(),!n)return r[0].id;const a=r.findIndex(d=>d.id==n);if(a!==-1)switch(t.key){case"ArrowDown":case"ArrowUp":{const d=t.key==="ArrowDown"?a+1:a-1;if(d>=0&&d<r.length)return r[d].id;break}case"Enter":{((i=r[a])==null?void 0:i.el.dataset.state)!==void 0&&((l=(c=r[a])==null?void 0:c.el.querySelector(`[${Ab}]`))==null||l.click());break}case"End":return r[r.length-1].id;case"Home":return r[0].id}}const Fb="mr-2 pl-1 py-1 before:absolute before:left-0 before:w-full before:h-[1.75rem] before:bg-muted/80 before:opacity-0 hover:before:opacity-100 before:-z-10 ",Ib="text-accent-foreground dark:before:border-0 before:bg-accent before:opacity-100 before:border-l-2 before:border-l-accent-foreground/50 ",Mb="shrink-0 mr-2 size-4 text-accent-foreground/50",Tb="mr-2 pl-1 py-1 relative before:absolute before:left-0 before:right-1 before:w-full before:h-full before:bg-muted/80 before:opacity-0 hover:before:opacity-100 before:-z-10 cursor-pointer flex items-center ",Db="text-accent-foreground before:data-[tree-item-selected]:1border before:bg-accent before:opacity-100 before:border-l-2 before:border-l-accent-foreground/50 outline-primary-400 [outline-width:calc(var(--parent-active)_*_1px)] outline rounded-[3px] ",Pb="shrink-0 mr-2 size-4 text-accent-foreground/50",Rb="[--parent-active:0] focus-within:[--parent-active:1]",Tc=p.forwardRef((e,t)=>{const{data:n,initialSelectedItemId:o,onSelectChange:r,expandAll:a,IconTextRender:i,IconForFolder:c,IconForItem:l,arrowFirst:d,hideFolderIcon:u,selectAsTrigger:m,selectEmptySpace:x,scrollAreaProps:j,className:A,...k}=e,[M]=p.useState(()=>X({selectedId:void 0})),O=i||Lb,U=p.useMemo(()=>{const L=Cb(n,o,a),B=mt(n,M.selectedId);B&&(B.state.selected=!1);const Ce=mt(n,L[L.length-1]);return Ce&&(Ce.state.selected=!0,M.selectedId=Ce.id),L},[n,o,a]),G=p.useCallback((L,B)=>{if(L.stopPropagation(),B){const ke=M.selectedId!==B.id;if(m)ke&&Ce(),B.state.selected=ke,M.selectedId=ke?B.id:void 0;else{if(!ke)return;Ce(),B.state.selected=!B.state.selected,M.selectedId=B.id}}else{if(!x)return;Ce(),M.selectedId=void 0}function Ce(){if(M.selectedId){const ke=mt(n,M.selectedId);ke&&(ke.state.selected=!1)}}r==null||r(B)},[n,M,r,m]),ae=p.useRef(null),{ref:te,width:se,height:Ss}=as();return s.jsx("div",{ref:L=>{te(L),ae.current=L},className:h(Rb,A),tabIndex:0,onKeyDown:L=>{const B=kb(ae.current,L,M.selectedId);B&&G(L,mt(n,B))},children:s.jsx(oe,{style:{width:se,height:Ss},onClick:L=>G(L,void 0),...j,children:s.jsxs("div",{className:"relative z-0 p-px",children:[" ",s.jsx(lo,{ref:t,data:n,handleSelectChange:G,expandedItemIds:U,IconTextRender:O,IconForFolder:c,IconForItem:l,arrowFirst:d,hideFolderIcon:u,...k})]})})})});Tc.displayName="Tree.Root";const lo=p.forwardRef(({className:e,data:t,handleSelectChange:n,expandedItemIds:o,IconTextRender:r,IconForFolder:a,IconForItem:i,arrowFirst:c,hideFolderIcon:l,...d},u)=>s.jsx("div",{ref:u,role:"tree",className:e,...d,children:s.jsx("ul",{children:t instanceof Array?t.map(m=>s.jsx("li",{children:m.children?s.jsx(Nr,{type:"multiple",defaultValue:o,children:s.jsxs(yr,{value:`${m.id}`,"data-tree-id":m.id,"data-tree-folder":Nb,children:[s.jsx(Dc,{item:m,IconTextRender:r,Icon:a,arrowFirst:c,hideFolderIcon:l,onClick:x=>n(x,m)}),s.jsx(Rc,{className:"pl-6",children:s.jsx(lo,{data:m.children,handleSelectChange:n,expandedItemIds:o,IconTextRender:r,IconForFolder:a,IconForItem:i,arrowFirst:c,hideFolderIcon:l})})]})}):s.jsx(mn,{item:m,IconTextRender:r,onClick:x=>n(x,m),Icon:i})},m.id)):s.jsx("li",{children:s.jsx(mn,{item:t,IconTextRender:r,onClick:m=>n(m,t),Icon:i})})})}));lo.displayName="Tree.TreeItem";const mn=p.forwardRef(({className:e,item:t,IconTextRender:n,Icon:o,...r},a)=>{const{selected:i}=S(t.state);return s.jsx("div",{ref:a,className:v(Tb,i&&Db,e),"data-tree-id":t.id,...i&&{"data-tree-item-selected":""},...r,children:s.jsx(n,{item:t,Icon:o,hideFolderIcon:!1,iconClasses:Pb})})});mn.displayName="Tree.Leaf";const Dc=p.forwardRef(({className:e,item:t,IconTextRender:n,Icon:o,arrowFirst:r=!0,hideFolderIcon:a,...i},c)=>{const{selected:l}=S(t.state);return s.jsx(Pc,{className:v(Fb,l&&Ib,e),"data-tree-folder-trigger":Sb,...l&&{"data-tree-item-selected":""},arrowFirst:r,ref:c,...i,children:s.jsx(n,{item:t,Icon:o,hideFolderIcon:a,iconClasses:Mb})})});Dc.displayName="Tree.Folder";const Pc=p.forwardRef(({className:e,children:t,arrowFirst:n,...o},r)=>{const a=s.jsx(Bl,{className:h("shrink-0 ml-auto h-4 w-4 text-accent-foreground/50 transition-transform duration-200",n&&"mr-2")});return s.jsx(Ar,{children:s.jsx(gn,{asChild:!0,className:v("flex-1 w-full transition-all outline-none cursor-pointer flex items-center",n?"first:[&[data-state=open]>svg]:rotate-90":"last:[&[data-state=open]>svg]:rotate-90",e),ref:r,...o,children:s.jsxs("div",{children:[n&&s.jsx(s.Fragment,{children:a}),t,!n&&s.jsx(s.Fragment,{children:a})]})})})});Pc.displayName="Tree.Folder.Trigger";const Rc=p.forwardRef(({className:e,children:t,...n},o)=>s.jsx(bn,{ref:o,className:v("data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down transition-all overflow-hidden",e),...n,children:s.jsx("div",{children:t})}));Rc.displayName="Tree.Folder.Content";function Lb({item:e,Icon:t,iconClasses:n,hideFolderIcon:o}){const r=e.icon||!o&&t;return s.jsxs(s.Fragment,{children:[r&&s.jsx(r,{className:n,"aria-hidden":"true"}),s.jsx("span",{className:"flex-grow truncate",children:e.name})]})}function $b({trigger:e,body:t}){return s.jsx(Ai,{children:s.jsxs(Ni,{children:[s.jsx(Si,{asChild:!0,children:s.jsx("div",{children:e})}),s.jsx(Ci,{children:s.jsxs(Hn,{className:"p-0 max-w-72 text-xs border-border border shadow",children:[t,s.jsx(xd,{className:"fill-primary"})]})})]})})}function Ob({bailOut:e}){return s.jsx(s.Fragment,{children:e.map((t,n)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mn,{className:"flex-none self-start size-5 fill-red-500 stroke-muted stroke-[1]"}),t]},n))})}function _b({fileUs:e,fileIndex:t}){var o,r,a,i;const n=[(r=(o=e.parsedSrc.meta)==null?void 0:o[0])==null?void 0:r.disp.bailOut,(i=(a=e.parsedSrc.meta)==null?void 0:a[1])==null?void 0:i.disp.bailOut];return s.jsxs("div",{className:"px-3 py-1.5",children:[s.jsxs("div",{className:"mb-2 pt-1 pb-1 border-border border-b border-dotted",children:["There are problems in the file with index ",t,", check why:"]}),n.map((c,l)=>s.jsx(p.Fragment,{children:c&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-bold",children:`${l===0?"Login":"Password change"} form:`}),s.jsx("div",{className:"py-1",children:s.jsx(Ob,{bailOut:c})})]})},`bailout${l}`))]})}function Bb({IconToRender:e,name:t,fileUs:n,iconClasses:o}){const r=Gt(n.parsedSrc.meta),a=n.fileCnt.idx+1,i=s.jsx(s.Fragment,{children:e&&s.jsx(e,{className:o,"aria-hidden":"true"})});return r?s.jsx($b,{trigger:i,body:s.jsx(_b,{fileUs:n,fileIndex:a})}):i}const Eb="pr-1.5 pb-px size-3 w-auto min-w-[18px] text-[.575rem] text-muted-foreground flex items-center justify-end select-none cursor-default";function zb({idx:e}){return s.jsx("div",{className:Eb,title:"File index in the list of all loaded files",children:e})}function Vb({fileUs:e,item:t}){const o=!!S(e.fileCnt.changesSet).size,r=o?"This file has changes":void 0;return s.jsxs(s.Fragment,{children:[o&&s.jsx(Aa,{className:"flex-none mr-0.5 size-3",colorize:!0}),s.jsx("div",{className:h("truncate",o&&"text-orange-500 1font-semibold"),title:r,children:t.name})]})}function Wb({item:e,Icon:t,iconClasses:n,hideFolderIcon:o}){const r=e,a=g(r.fileUsAtom),i=a.fileCnt.idx+1,c=e.icon||!o&&t,l=S(w).files.itemsState.showIndex;return s.jsxs(s.Fragment,{children:[l&&s.jsx(zb,{idx:i}),s.jsx(Bb,{iconClasses:n,IconToRender:c,fileUs:a,name:e.name}),s.jsx(Vb,{fileUs:a,item:r})]})}function Hb(e){const t=Mc(e);return un(t,n=>{n.state=X({selected:!1})}),t}function Ub(){const{selectAsTrigger:e,selectEmptySpace:t}=S(w.files.itemsState),n=g(to),o=b($x);function r(i){var l;const c=(l=i)==null?void 0:l.fileUsAtom;o({newAtom:c})}const a=p.useMemo(()=>{const i=Hb(n);return s.jsx(Tc,{data:i,className:"w-full h-full outline-none",scrollAreaProps:{parentContentWidth:!0,fixedWidth:!0},IconTextRender:Wb,IconForFolder:zl,IconForItem:El,arrowFirst:!0,hideFolderIcon:!1,selectAsTrigger:e,selectEmptySpace:t,onSelectChange:r})},[n]);return s.jsx("div",{className:"relative w-full h-full",children:s.jsx("div",{className:"absolute inset-px bottom-0.5 text-xs select-none",children:a})})}const Gb="focus-within:ring-border focus-within:ring-offset-background focus-within:ring-1 focus-within:ring-offset-1 focus-within:outline-none",Lc="p-1 h-full text-xs",$c=`h-full ring-border/50 ring-1 overflow-hidden ${Gb} focus-within:ring-offset-0 group`,Oc="h-full bg-background flex flex-col";function Zb(){return s.jsx("div",{className:`${Lc} pr-0`,children:s.jsx("div",{className:`${$c} rounded-l`,children:s.jsxs("div",{className:Oc,children:[s.jsx(vb,{}),s.jsx(Ub,{})]})})})}function qb({fileUs:e}){return s.jsx(s.Fragment,{children:e.parsedSrc.stats.isFCat?s.jsx(Xb,{fileUs:e}):s.jsx(Kb,{fileUs:e})})}function Kb({fileUs:e}){const t=g(e.parsedSrc.stats.loginFormChooseNameAtom);return s.jsx("div",{className:"pl-1 text-xs font-semibold",title:"Name from manifest file",children:t})}function Xb({fileUs:e}){var o,r;const t=(r=(o=e.fceAtomsForFcFile)==null?void 0:o.viewFceCtx)==null?void 0:r.isMaster,n=t?"":`The active field catalog is located at the root of the open folder 
and has the file name "field_catalog.dpn".`;return s.jsxs("div",{className:"text-xs font-semibold",title:"Name from manifest file",children:["Field Catalog"," ",s.jsx("span",{className:"text-xs font-normal text-orange-500 dark:text-yellow-500",title:n,children:t?"":"(inactive)"})]})}function Qb({fileUs:e}){const t=S(w).files.itemsState.showIeMarker,n=Rm(e,t);return s.jsx("div",{className:"flex items-center gap-1",children:n.map((o,r)=>{const a=n.length===2?r?"Password change form":"Login form":void 0;return s.jsx(o,{className:"size-4",title:a},r)})})}function Jb({fileUs:e}){var a,i,c,l,d,u,m,x;const t=e.parsedSrc.stats.loginFormDomain;if(!t){const j=xn(e.parsedSrc.meta)?"Manually defined login for a Windows application":"Login for a Windows application";return s.jsx("span",{className:"1shrink 1min-w-0 truncate",children:j})}const n=((l=(c=(i=(a=e.parsedSrc.meta)==null?void 0:a[0])==null?void 0:i.mani)==null?void 0:c.detection)==null?void 0:l.web_ourl)||t,o=(x=(m=(u=(d=e.parsedSrc.meta)==null?void 0:d[1])==null?void 0:u.mani)==null?void 0:m.detection)==null?void 0:x.web_ourl,r=o&&o!==n;return s.jsxs("div",{className:"flex items-center",children:[s.jsx(ej,{url:n,domain:t}),r&&s.jsx(_c,{url:o,title:"Open the password change site"})]})}const Yb="text-foreground opacity-70 hover:opacity-100 hover:text-foreground underline underline-offset-2";function ej({url:e,domain:t}){return s.jsxs("div",{className:"flex items-center gap-1",children:["The login is defined for "," ",e?s.jsx(_c,{domain:t,url:e,title:"Open the login site"}):s.jsx("div",{className:Yb,children:t})]})}const tj="text-foreground hover:text-foreground hover:opacity-100 opacity-70 underline underline-offset-2 flex items-center gap-1";function _c({domain:e,url:t,title:n}){return s.jsxs("a",{href:t,className:tj,target:"_blank",rel:"noreferrer noopener",title:n,children:[e,s.jsx(lu,{className:"pt-0.5 size-3"})]})}const sj={container:"text-[0.7rem] truncate",sm:"font-sans text-[0.6rem] opacity-50",xs:"opacity-20",lg:"px-px text-[0.7rem] text-foreground opacity-50 border-b border-dotted border-primary-500",l2:"px-1 text-[.7rem] font-bold text-foreground opacity-70"},nj=/^\{([0-9A-Za-z]{3,3})(.*)([0-9A-Za-z]{3,3})\}\.dpm$/;function oj({fname:e,large:t}){const{container:n,sm:o,xs:r,lg:a,l2:i}=sj,c=(e||"").match(nj);if(!c)return s.jsx("div",{className:n,children:s.jsx("span",{className:o,children:e})});const l=t?i:a;return s.jsxs("div",{className:n,children:["Filename:"," ",s.jsx("span",{className:r,children:"{"}),s.jsx("span",{className:l,children:c[1]}),s.jsx("span",{className:o,children:c[2]}),s.jsx("span",{className:l,children:c[3]}),s.jsx("span",{className:r,children:"}.dpm"})]})}const rj="text-background bg-orange-400 hover:bg-orange-500 active:scale-[.97]";function aj({fileUs:e,fileUsAtom:t}){const n=b(St),o=b(Lx);return!S(e.fileCnt.changesSet).size?null:s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"active:scale-[.97]",title:"Reset file changes",onClick:()=>o(t),children:"Reset"}),s.jsx(C,{className:rj,title:"Save file changes",onClick:()=>n(t),children:"Save"})]})}function uo(){const{activeView:e}=S(w).right;return s.jsx(_n,{checked:e===J.xml,onCheckedChange:t=>w.right.activeView=t?J.xml:J.forms,children:"Show XML"})}function Bc(){return s.jsx(E,{className:"pl-8",...wp,children:"More..."})}function ij({maniAtoms:e}){return s.jsxs(s.Fragment,{children:[s.jsx(uo,{}),s.jsx(ue,{}),s.jsx(Bc,{})]})}function cj({fceCtx:e}){const t=b(Wi),n=b(e.focusGridAtom);function o(r){t(e,r),n(!0)}return s.jsxs(s.Fragment,{children:[s.jsx(E,{onClick:()=>{o(F.edit)},children:"Add Text Field"}),s.jsx(E,{onClick:()=>{o(F.psw)},children:"Add Password Field"})]})}function lj({fceCtx:e}){const t=g(e.hasSelectedItemAtom),n=b(Hi),o=b(e.focusGridAtom);function r(){n(e),o(!0)}return s.jsx(s.Fragment,{children:s.jsx(E,{disabled:!t,onClick:r,children:"Delete selected item"})})}function dj({fceCtx:e}){return s.jsxs(s.Fragment,{children:[s.jsx(cj,{fceCtx:e}),s.jsx(lj,{fceCtx:e}),s.jsx(ue,{}),s.jsx(uo,{})]})}function uj({fileUs:e}){return s.jsxs(s.Fragment,{children:[s.jsx(uo,{}),s.jsx(ue,{}),s.jsx(Bc,{})]})}function mj(){const[e,t]=p.useState(!1);return s.jsxs(Je,{open:e,onOpenChange:t,modal:!0,children:[s.jsx(Ye,{asChild:!0,children:s.jsx(C,{variant:"ghost",children:s.jsx(is,{className:"size-4 fill-current"})})}),e&&s.jsx(Ee,{className:"min-w-36 text-xs",align:"end",children:s.jsx(fj,{})})]})}function fj(){const e=g(Kn);return e?w.right.activeView===J.xml?s.jsx(xj,{fileUs:e}):e.parsedSrc.stats.isFCat?s.jsx(pj,{fileUs:e}):s.jsx(hj,{fileUs:e}):null}function hj({fileUs:e}){const t=g(e.maniAtomsAtom);return s.jsx(s.Fragment,{children:t?s.jsx(ij,{maniAtoms:t}):s.jsx(Ec,{})})}function pj({fileUs:e}){var n;const t=(n=e.fceAtomsForFcFile)==null?void 0:n.viewFceCtx;return s.jsx(s.Fragment,{children:t?s.jsx(dj,{fceCtx:t}):s.jsx(Ec,{})})}function xj({fileUs:e}){return s.jsx(uj,{fileUs:e})}function Ec(){return s.jsx("div",{children:"no menu"})}function mo(){const{activeView:e}=S(w).right,{showQuickXml:t}=S(w.appUi.uiGeneral);if(!t)return null;const n=e===J.xml;function o(){return w.right.activeView=n?J.forms:J.xml}return s.jsx(C,{variant:"ghost",className:h("-mx-1",n&&"bg-muted"),onClick:o,children:s.jsx(Iu,{className:"size-4 fill-current"})})}function gj({fileUs:e}){return w.right.activeView===J.xml?s.jsx(bj,{fileUs:e}):e.parsedSrc.stats.isFCat?s.jsx(wj,{fileUs:e}):s.jsx(jj,{fileUs:e})}function bj({fileUs:e}){return s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(mo,{})})}function jj({fileUs:e}){return s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(mo,{})})}function wj({fileUs:e}){var n;const t=(n=e.fceAtomsForFcFile)==null?void 0:n.viewFceCtx;return t?s.jsxs(s.Fragment,{children:[s.jsx(Q0,{fceCtx:t}),s.jsx(gc,{fceCtx:t}),s.jsx(bc,{fceCtx:t}),s.jsx(mo,{})]}):null}function vj(){const e=g(ne),t=g(Kn);return!e||!t?s.jsx("div",{className:`${dn} h-10`,children:s.jsx("div",{className:"h-full select-none flex items-center",children:"No File"})}):s.jsx("div",{className:dn,children:s.jsx("div",{className:"relative max-w-4xl xl:border-r border-border",children:s.jsx(yj,{fileUs:t,fileUsAtom:e})})})}function yj({fileUs:e,fileUsAtom:t}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"py-1 text-muted-foreground space-y-1.5 cursor-default",children:[s.jsx(qb,{fileUs:e}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Qb,{fileUs:e}),s.jsx(Jb,{fileUs:e})]}),s.jsx(oj,{fname:e.fileCnt.fname})]}),s.jsxs("div",{className:" absolute right-0 top-0.5 flex items-center gap-2",children:[s.jsx(aj,{fileUs:e,fileUsAtom:t}),s.jsx(mj,{})]}),s.jsx("div",{className:" absolute right-1 bottom-0.5 flex items-center gap-1",children:s.jsx(gj,{fileUs:e})})]})}function Aj({useItAtom:e,className:t,...n}){const[o,r]=T(e);return s.jsx("input",{type:"checkbox",className:h("place-self-center size-4 dark-checkbox",t),checked:o,onChange:()=>r(a=>!a),...n})}const Nj="size-7 pt-1 text-[.6rem] text-mani-muted-foreground border-muted-foreground/40 border rounded select-none flex flex-col items-center gap-0.5";function Sj({useItAtom:e,maniField:t,className:n,...o}){const r=g(e),{password:a,type:i="NOTYPE"}=t,c=$u(t);return s.jsxs("div",{className:h(Nj,!r&&"opacity-30 cursor-pointer",n),title:c,...o,children:[s.jsx(Ru,{className:"size-3",field:t}),s.jsx("div",{className:"-mt-2",children:`${a?"psw":i}`})]})}const Cj="px-2 py-3 h-7 text-mani-foreground bg-mani-background border-mani-border-muted border ring-mani-ring focus:ring-1 focus:ring-offset-1 focus:ring-offset-mani-background focus:ring-mani-ring-activated truncate outline-none rounded ";function zc({useItAtom:e,valueAtom:t,className:n,...o}){const[r,a]=T(t),i=g(e);return s.jsx("input",{className:h(Cj,!i&&"opacity-30 cursor-pointer",n),value:r,onChange:c=>a(c.target.value),title:i?"This is a label that appears next to an input field.":void 0,...Oe,...o})}const kj="h-6 text-primary-900 dark:text-primary-300 bg-primary-100 dark:bg-primary-900";function Fj({items:e,value:t,onValueChange:n,triggerClasses:o,placeholder:r}){return s.jsxs(yt,{value:t,onValueChange:n,children:[s.jsx(st,{className:o,children:s.jsx("div",{className:"truncate",children:s.jsx(At,{placeholder:r})})}),s.jsx(nt,{align:"start",buttonClasses:kj,position:"item-aligned",children:e.map((a,i)=>{const c=typeof a=="string";if(c&&a==="-")return s.jsx(vi,{className:"my-1 h-px bg-mani-border"},i);const d=c?a:a[0],u=c?a:a[1],m=typeof u=="string"?u:u.key;return s.jsx(ye,{className:"text-xs",value:m,indicatorFirst:!0,children:d},i)})})]})}const Ij="px-2 py-1 w-full h-7 text-xs bg-mani-background border-mani-border-muted border rounded overflow-hidden cursor-pointer",Mj="text-[0.6rem] !text-blue-400 cursor-default";function Vc({rowCtx:e,fileUsCtx:t,onSelectCatItem:n,className:o,...r}){const{useItAtom:a,typeAtom:i,dbnameAtom:c,rfieldFormAtom:l}=e,d=b(Wc),u=b(Pj),m=g(a),x=g(i),j=g(e.fromFcAtom),A=g(l),k=p.useState(()=>f((j==null?void 0:j.fieldValue.dbname)||"-1"))[0],[M,O]=T(k);p.useEffect(()=>{A===Q.fieldcatalog&&O((j==null?void 0:j.fieldValue.dbname)||"-1")},[j,A]);const U=m1(x,j),G=Tj({fileUsCtx:t,rowCtx:e});function ae(te){if(te==="-1")u(e),O(te);else if(te==="-2")G();else{const se=Dj(U,te);se&&(d(e,se),O(se.fieldValue.dbname))}}return s.jsx(Fj,{triggerClasses:h(Ij,js,!m&&"opacity-30",M==="-1"&&Mj),items:U,value:M,onValueChange:ae,...r})}function Tj({fileUsCtx:e,rowCtx:t}){const n=b(qi),o=b(Wc),r=p.useState(()=>x1())[0],a=g(r);p.useEffect(()=>{const u=a==null?void 0:a.selectedItem;u&&(console.log('%cSelected from dialog "%s", %o',"color: tomato",u.fieldValue.displayname,u),o(t,u))},[t,a]);const i=g(t.fromFcAtom),c=(i==null?void 0:i.fieldValue.fType)===F.psw,l=(i==null?void 0:i.fieldValue.dbname)||t.metaField.mani.dbname;return p.useCallback(function(){const m=e.fileUs.fceAtomsRefForMani;n({fceAtoms:m,inData:{openItemPickerDlg:!0,dbid:l,outBoxAtom:r,showTxt:!c,showPsw:!!c}})},[c,l,r])}function Dj(e,t){const n=e.find(r=>typeof r=="string"?r===t:typeof r[1]=="string"?r[1]===t:r[1].key===t);return typeof(n==null?void 0:n[1])=="string"||n==null?void 0:n[1].fceItem}const Pj=f(null,(e,t,n)=>{t(n.fromFcAtom,void 0),t(n.rfieldFormAtom,Q.noname)}),Wc=f(null,(e,t,n,o)=>{t(n.fromFcAtom,o),t(n.rfieldFormAtom,Q.fieldcatalog),t(Rj,n,o)}),Rj=f(null,(e,t,n,o)=>{const{dbname:r,valueAs:a,value:i,isRef:c,fType:l,isNon:d}=o.fieldValue,u={valueAs:a,value:i,isRef:c,fType:l,isNon:d};t(n.dbnameAtom,r),t(n.valueLifeAtom,u)}),Lj="px-2 py-3 h-7 text-[.65rem] text-mani-foreground bg-mani-background border-mani-border-muted border ring-mani-ring focus:ring-1 focus:ring-offset-1 focus:ring-offset-mani-background focus:ring-mani-ring-activated rounded outline-none flex items-center justify-center gap-0.5";function Hc({useItAtom:e,typeAtom:t,policiesAtom:n,className:o,onClick:r,...a}){const i=p.useState(()=>f(void 0))[0],c=p.useState(()=>f(!1))[0],l=b(c),d=g(e),u=g(t),m=g(n),x=Ff(m.policy,m.policy2,u);if(x===ai.na)return s.jsx("div",{className:"text-center"});const j=If(x);return s.jsxs(s.Fragment,{children:[s.jsxs(C,{className:h(Lj,!d&&"opacity-30 cursor-pointer",o),onClick:A=>{r==null||r(A),l(!0)},...a,children:[j,"..."]}),s.jsx(fb,{openAtom:c,toastIdAtom:i,policiesAtom:n})]})}function $j({rowCtx:e,fileUsCtx:t}){const{useItAtom:n,typeAtom:o,labelAtom:r,valueLifeAtom:a,policiesAtom:i,metaField:c}=e,l=c.mani,d=b(n),u=()=>d(!0);function m(x){}return s.jsxs(s.Fragment,{children:[s.jsx(Sj,{useItAtom:n,maniField:l,onClick:u}),s.jsx(Aj,{useItAtom:n}),s.jsx(zc,{useItAtom:n,valueAtom:r,onClick:u}),s.jsx(wc,{useItAtom:n,valueLifeAtom:a,choosevalue:l.choosevalue,onClick:u}),s.jsx(Vc,{rowCtx:e,fileUsCtx:t,onSelectCatItem:m,onClick:u},e.metaField.uuid),s.jsx(Hc,{useItAtom:n,typeAtom:o,policiesAtom:i,onClick:u})]})}const Oj="p-2 grid grid-cols-[auto_auto_minmax(0,1fr)_minmax(0,1fr)_minmax(0,1fr)_minmax(0,max-content)] items-center gap-[3px] text-foreground rounded-sm",_j="mb-2 px-1 text-[.65rem] truncate text-muted-foreground border-mani-muted-foreground border-b select-none",Bj=[["Type","Type of field"],["Use it","Use this field or not"],["Label",`The label is shown to the user next to
the field for entering a value`],["Value",`Specifies the value to fill out the field
and how it is stored`],["Shared ID (Catalog)",`The Shared ID determines whether the value
will be shared through the field catalog`],["Policy","Password policy for the field"]];function Ej(){return s.jsx(s.Fragment,{children:Bj.map(([e,t],n)=>s.jsx("div",{className:_j,title:t,children:e},n))})}function zj({ctx:e}){return e.nAllAtoms.normal.rowCtxs.length?s.jsx(Wj,{ctx:e}):s.jsx(Vj,{})}function Vj(){return s.jsx("div",{className:"p-2 text-xs text-mani-title/30 select-none",children:"There are no fields in the form."})}function Wj({ctx:e}){return s.jsxs("div",{className:Oj,children:[s.jsx(Ej,{}),e.nAllAtoms.normal.rowCtxs.map((t,n)=>s.jsx($j,{rowCtx:t,fileUsCtx:e.nAllAtoms.fileUsCtx},n))]})}function Hj({ctx:e}){const t=e.nAllAtoms.normal.submitCtx.isWeb;return s.jsx("div",{className:"ml-1 p-1 flex items-center gap-1 select-none",children:t?s.jsxs(s.Fragment,{children:["After filling in the form fields,",s.jsx(Uc,{ctx:e}),"the form data."]}):s.jsx(Uj,{ctx:e})})}function Uc({ctx:e}){const{buttonNameItemsAtom:t,selectedAtom:n}=e.nAllAtoms.normal.submitCtx,o=g(t),[r,a]=T(n);return s.jsxs(yt,{value:r.toString(),onValueChange:i=>a(+i),children:[s.jsx(st,{className:"pl-2 pr-1 py-1 h-7 w-max text-xs gap-1",children:s.jsx(At,{placeholder:"Don't submit"})}),s.jsx(nt,{align:"start",children:o.map(({name:i},c)=>s.jsx(ye,{className:"text-xs",value:c.toString(),indicatorFirst:!0,children:i},c))})]})}function Uj({ctx:e}){const t=g(e.nAllAtoms.normal.submitCtx.selectedAtom)!==0;return s.jsxs(s.Fragment,{children:["After filling in the form fields,",t?" the":"",s.jsx(Uc,{ctx:e}),t?" button will be used to submit the form data.":" the form data."]})}const tr="ml-2 mt-1 -mb-1 text-xs font-semibold select-none";function Gj({ctx:e}){const t=!!e.nAllAtoms.normal.rowCtxs.length;return s.jsxs("div",{className:"mr-0.5 h-full flex flex-col",children:[s.jsx("div",{className:tr,children:"Form fields"}),s.jsx(zj,{ctx:e}),t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:tr,children:"Form submit options"}),s.jsx(Hj,{ctx:e})]})]})}function Zj({formType:e}){const t=e===$.cpass,n=t?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-semibold",children:"No"})," ","password change form"]}):"No login form";return s.jsxs("div",{className:"px-2 h-full flex flex-col gap-1",children:[s.jsx("div",{className:"pt-1 text-xs select-none",children:n}),t&&s.jsx(A0,{triggerLabel:"Create a password change form",subLabel:"How to create form"})]})}const qj="focus:ring-primary-600/50 dark:focus:ring-primary-400/70 focus:ring-offset-primary-200 dark:focus:ring-offset-primary-800 focus:ring-1 focus:ring-offset-1 focus:outline-none",Gc="",Kj="p-1 min-w-[14ch] text-sm text-primary-800 dark:text-primary-200 bg-primary-100 dark:bg-primary-800 data-[side=top]:animate-slideDownAndFade data-[side=right]:animate-slideLeftAndFade data-[side=bottom]:animate-slideUpAndFade data-[side=left]:animate-slideRightAndFade border-primary-500 dark:border-primary-400 dark:shadow-primary-500 border rounded shadow select-none",Xj="pr-3 py-1 rounded-sm outline-none data-[highlighted]:text-primary-800 dark:data-[highlighted]:text-primary-100 data-[highlighted]:bg-primary-400/30 dark:data-[highlighted]:bg-primary-700",Zc="h-8 text-xs font-semibold border-border border-b flex items-center justify-between",qc="px-1 py-px min-w-[1.5rem] text-[.55rem] leading-4 text-center bg-gradient-to-b from-primary-50/50 to-primary-100/50 dark:from-primary-800/50 dark:to-primary-700/50 border-primary-300 dark:border-primary-500 border border-dotted rounded-sm shadow-sm dark:shadow-inner dark:shadow-primary-400/20",Qj="hidden @[300px]/actions:flex items-center justify-between space-x-1";function Jj({item:e}){const t=g(e.charAtom).data,n=xa(g(e.repeatAtom).data);return s.jsxs("div",{className:Qj,children:[s.jsxs("div",{children:[n," ",ga(n,"time")]}),s.jsx("div",{className:qc,children:t})]})}function Yj({item:e}){const t=g(e.rowCtx.labelAtom)||"Field";return s.jsx("div",{className:"hidden @[300px]/actions:flex items-center justify-between",children:t})}function ew({item:e}){const t=g(e.rowCtx.typeAtom)===F.psw?"Password":"Text";return s.jsxs("div",{className:"hidden @[300px]/actions:flex items-center justify-between",children:[s.jsx(Yj,{item:e}),s.jsx("span",{className:h(qc,"font-normal"),children:t})]})}function tw({item:e}){const t=g(e.nAtom).data;return s.jsxs("div",{className:"hidden @[300px]/actions:block",children:[t," ms"]})}function sw({item:e}){const t=g(e.xAtom).data,n=g(e.yAtom).data;return s.jsxs("div",{className:"hidden @[300px]/actions:block",children:["x: ",t,", y: ",n]})}function fo(e){switch(e){case"kbd":return"Keystroke";case"fld":return"Field";case"dly":return"Delay";case"pos":return"Position";default:return""}}const Kc="ml-2 opacity-50 size-4";function ho({type:e,className:t=Kc}){switch(e){case"kbd":return s.jsx(Bd,{className:t});case"fld":return s.jsx(zd,{className:t});case"dly":return s.jsx(_d,{className:t});case"pos":return s.jsx(Ed,{className:t});default:return null}}function nw({ctx:e}){switch(e.type){case"kbd":return s.jsx(Jj,{item:e});case"fld":return s.jsx(ew,{item:e});case"dly":return s.jsx(tw,{item:e});case"pos":return s.jsx(sw,{item:e});default:return null}}function $t({ctx:e,type:t,password:n}){const o=b(Wp),r=fo(t);return s.jsxs(rs,{className:h(Xj,"text-xs grid grid-cols-[auto,1fr] gap-x-2 items-center"),onClick:()=>o(e.mAllAtoms.manual,t,!!n),children:[s.jsx(ho,{type:t}),s.jsx("div",{children:r})]})}const ow="mr-2.5 size-6 hover:bg-primary-200 dark:hover:bg-primary-700 border-muted-foreground/20 border rounded outline-none shadow-sm dark:shadow-primary-900 grid place-items-center";function rw({ctx:e}){return s.jsxs(An,{children:[s.jsx(Nn,{asChild:!0,children:s.jsx("button",{className:h(ow,qj),children:s.jsx(ya,{className:"size-3"})})}),s.jsx(vn,{container:document.getElementById("portal"),children:s.jsxs(os,{className:Kj,sideOffset:1,alignOffset:-8,side:"bottom",align:"end",children:[s.jsx($t,{ctx:e,type:"kbd"}),s.jsx($t,{ctx:e,type:"pos"}),s.jsx($t,{ctx:e,type:"fld"}),s.jsx($t,{ctx:e,type:"dly"})]})})]})}function aw({ctx:e}){const t=e.formIdx===$.login?"Login actions":"Password change actions";return s.jsxs("div",{className:h("-ml-1 -mt-1 pl-2",Zc),children:[s.jsx("div",{children:t}),s.jsx(rw,{ctx:e})]})}const iw="absolute -right-2 -top-[5px] px-2 py-1 text-primary-800 dark:text-primary-200 bg-primary-100 dark:bg-primary-800 border-primary-500/50 dark:border-primary-100/50 border shadow rounded flex animate-slideLeftAndFade",Ls="p-1 size-5 hover:bg-primary-300 dark:hover:bg-primary-400 rounded",cw="p-1 size-5 hover:text-white hover:bg-red-600 rounded";function lw({menuState:e,onClose:t}){const{onDelete:n,onUp:o,onDn:r,hasUp:a,hasDn:i}=e;return s.jsxs("div",{className:iw,children:[s.jsx(Vd,{className:h(Ls,!a&&"invisible"),title:"Move item up",onClick:o}),s.jsx(Wd,{className:h(Ls,!i&&"invisible"),title:"Move item down",onClick:r}),s.jsx(Ud,{className:cw,title:"Delete item",onClick:n}),s.jsx(In,{className:Ls,onClick:t})]})}const dw="p-1 size-5 hover:text-primary-700 hover:bg-primary-400/50 dark:hover:text-white dark:hover:bg-primary-500 rounded";function uw({menuState:e}){const t=p.useRef(null),[n,o]=p.useState(!1),r=a=>{a.preventDefault(),o(i=>!i)};return gd(t,()=>o(!1)),s.jsxs("button",{ref:t,className:h("relative mr-1 outline-none"),tabIndex:-1,children:[s.jsx(is,{className:dw,onClick:r}),n&&s.jsx(lw,{onClose:r,menuState:e})]})}const mw="mx-1 py-px leading-6 grid grid-cols-[min-content,5rem,1fr,min-content] items-center text-foreground bg-background hover:text-accent-foreground hover:bg-muted cursor-pointer",fw=`${mw} ${Nc}`;function hw({formCtx:e,chunk:t,menuState:n,idx:o,...r},a){const i=g(t.selectedAtom),c=g(t.hasErrorAtom),l=fo(t.type),d=c?"This row has errors":void 0;return s.jsxs("div",{ref:a,"data-list-item":i?"selected":"",className:h(fw,c&&"text-red-500 font-semibold"),title:d,...r,children:[s.jsx(ho,{type:t.type}),s.jsx("div",{className:"pl-3 pr-2 text-xs",children:l}),s.jsx("div",{className:"px-4 text-[.65rem] font-light",children:s.jsx(nw,{ctx:t})}),s.jsx(uw,{menuState:n})]})}const pw=xe.create(p.forwardRef(hw));function xw({ctx:e}){const t=e.mAllAtoms.manual,n=g(t.chunksAtom),o=b(Op),r=b(Zn),a=b(Hp),i=b(Up);return s.jsx(s.Fragment,{children:s.jsx("div",{className:h("min-h-10 outline-none",Ac),tabIndex:0,onKeyDown:c=>o(t,c.key),children:s.jsx(Re,{initial:!1,children:n.map((c,l)=>{const d=n.length-1,u={onDelete:m=>{m.stopPropagation(),a(t,l)},onUp:m=>{m.stopPropagation(),i(t,l,l-1)},onDn:m=>{m.stopPropagation(),i(t,l,l+1)},hasUp:l>0,hasDn:l<d};return s.jsx(pw,{formCtx:t,chunk:c,menuState:u,idx:l,onClick:m=>r(t,l,x=>m.ctrlKey?!x:!0)},c.uid5)})})})})}function gw({ctx:e,className:t,...n}){const o=_p(e.mAllAtoms.manual);return p.useEffect(()=>{o()},[]),s.jsxs("div",{className:h("p-1 pr-0 h-full border-border border rounded flex flex-col space-y-1 select-none",Gc,t),...n,children:[s.jsx(aw,{ctx:e}),s.jsx("div",{className:"relative h-full",children:s.jsx("div",{className:"absolute inset-0",children:s.jsx(oe,{className:"pr-1 h-full",children:s.jsx(xw,{ctx:e})})})})]})}function bw({type:e}){return s.jsx("div",{className:h("-mx-1 -mt-1 pl-2 pr-3",Zc),children:s.jsx(jw,{type:e})})}function jw({type:e}){const t=fo(e);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-xs font-light",children:["Action"," "]}),t,s.jsxs("span",{className:"text-xs font-light",children:[" ","properties"]})]}),s.jsx("div",{className:"opacity-50",children:s.jsx(ho,{type:e,className:h(Kc,"!opacity-100")})})]})}const ww="absolute mt-px mr-px right-3 top-1/2 transform -translate-y-1/2 size-4 text-red-500/90";function vw({error:e,className:t}){return s.jsx(s.Fragment,{children:e&&s.jsx(Tn,{className:h(ww,t)})})}function Mt({stateAtom:e,asCheckbox:t,containerClasses:n,...o}){return s.jsx(nn,{stateAtom:e,Trigger:vw,containerClasses:n,children:t?s.jsx(Cp,{stateAtom:e,...o}):s.jsx(sn,{stateAtom:e,...o})})}const sr="col-span-2 grid grid-cols-subgrid";function po({label:e,children:t}){return s.jsxs("div",{className:"col-span-2 py-1 pr-0.5 text-xs grid grid-cols-subgrid items-center",children:[s.jsx("div",{className:"font-light text-end",children:e}),t]})}function H({label:e,...t}){return s.jsx(po,{label:e,children:s.jsx(Mt,{...t})})}function yw({label:e,button:t,...n}){return s.jsx(po,{label:e,children:s.jsxs("div",{className:"w-full flex items-center justify-between gap-1",children:[s.jsx(Mt,{...n}),t]})})}function $s({label:e}){const t=S(w.appUi.uiGeneral).showOptOnRight;return s.jsx("div",{className:`col-span-2 mt-2 first:mt-0 pr-1 text-xs font-semibold ${t?"text-end":""} border-b border-foreground/30`,children:e})}const Aw="col-span-2 1first:mt-1.5 mt-1 1mb-2 1pb-1 1text-sm font-normal 1text-mani-title 1bg-muted 1border-mani-title border-border 1border-t 1border-b flex items-center gap-1 ";function Ns({label:e,formIdx:t,name:n}){const o=S(w).right.mani.openInOptions[t][n];function r(){w.right.mani.openInOptions[t][n]=!w.right.mani.openInOptions[t][n]}return s.jsx("div",{className:"col-span-1 w-full",children:s.jsxs(C,{className:h("w-full mr-0.5",Aw),onClick:r,children:[s.jsx("div",{className:"w-full text-start",children:e}),s.jsx(cs,{className:h("size-4 text-muted-foreground",o?"rotate-0 transition-transform":"-rotate-90 transition-transform")})]})})}function Nw({openAtom:e}){const t=b(e);return s.jsx(C,{className:"mr-0.5 col-start-2 place-self-end",onClick:()=>t(n=>!n),children:s.jsx($d,{className:"size-4 text-muted-foreground"})})}function Tt({open:e,children:t}){const[n,{height:o}]=bd(),[r,a]=p.useState(),i=p.useRef(!0);p.useEffect(()=>{o&&(i.current=!1)},[o]);const[c,l]=wr(()=>({height:e?o:0,ena:vd(e,r),config:i.current?{duration:0}:{mass:.2,tension:492,clamp:!0},onRest:()=>{i.current=!1}}),[e,o]);return p.useEffect(()=>{i.current&&c.height.set(o)},[o]),s.jsx(ha.div,{className:h("overflow-y-hidden smallscroll",sr),style:c,children:s.jsx("div",{ref:d=>{d&&(a(d),n(d))},className:sr,children:t})})}function Sw({valueAtom:e}){return s.jsxs("label",{className:"flex flex-col gap-0.5",children:[s.jsx("span",{children:"Delay the next action by"}),s.jsxs("div",{className:"max-w-24 flex items-center gap-1",title:"Delay in millisecond before performing the next action",children:[s.jsx(Mt,{stateAtom:e,asCheckbox:!1}),s.jsx("span",{children:"ms"})]})]})}function Cw({item:e}){return s.jsx(s.Fragment,{children:s.jsx(Sw,{valueAtom:e.nAtom})})}function ft({label:e,labelClasses:t,horizontal:n,children:o,...r}){return s.jsxs("label",{className:h("flex",n?"items-center space-x-2":"flex-col space-y-px"),...r,children:[s.jsx("div",{className:h("text-xs",t),children:e}),o]})}const kw="h-6 bg-primary-100 dark:bg-primary-900 text-primary-900 dark:text-primary-300";function xo({items:e,value:t,onValueChange:n,triggerClasses:o,placeholder:r}){return s.jsxs(yt,{value:t,onValueChange:n,children:[s.jsx(st,{className:h("px-2 py-1 w-max h-7 text-xs gap-1",o),children:s.jsx(At,{placeholder:r})}),s.jsx(nt,{align:"start",buttonClasses:kw,position:"item-aligned",children:e.map((a,i)=>{const c=typeof a=="string",l=c?a:a[0],d=c?a:a[1];return s.jsx(ye,{className:"text-xs",value:d,indicatorFirst:!0,children:l},i)})})]})}function Fw({items:e,label:t,labelClasses:n,title:o,horizontal:r=!1,...a}){return s.jsxs("div",{className:h("flex",r?"items-center gap-x-2":"flex-col gap-y-0.5"),title:o,children:[s.jsx("div",{className:h("text-xs",n),children:t}),s.jsx(xo,{items:e,...a})]})}const Iw=[["Text",`${F.edit}`],["Passowrd",`${F.psw}`]];function Mw({item:e}){const[t,n]=T(e.rowCtx.typeAtom);return s.jsx(xo,{items:Iw,value:`${t}`,onValueChange:o=>n(+o)})}function Tw({item:e}){const{useItAtom:t,typeAtom:n,policiesAtom:o}=e.rowCtx;return g(n)===F.psw?s.jsx(ft,{label:"Policy",className:"ml-2",children:s.jsx(Hc,{useItAtom:t,typeAtom:n,policiesAtom:o})}):null}function Dw({item:e,fileUsCtx:t}){const{useItAtom:n,labelAtom:o,valueLifeAtom:r}=e.rowCtx;function a(i){}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-[auto,1fr] gap-2",children:[s.jsx(ft,{label:"Type",children:s.jsx(Mw,{item:e})}),s.jsx(ft,{label:"Label",children:s.jsx(zc,{useItAtom:n,valueAtom:o})})]}),s.jsxs("div",{className:"grid grid-cols-[1fr,1fr,auto]",children:[s.jsx(ft,{label:"Value",children:s.jsx(wc,{useItAtom:n,valueLifeAtom:r,choosevalue:""})}),s.jsx(ft,{label:"Catalog",className:"ml-2",children:s.jsx(Vc,{rowCtx:e.rowCtx,fileUsCtx:t,onSelectCatItem:a})}),s.jsx(Tw,{item:e})]})]})}function Pw({valueAtom:e,triggerClasses:t}){const[n,o]=T(e);return s.jsx(Fw,{items:Vl,placeholder:"Select key",label:"Key to press",labelClasses:"min-w-[9ch]",triggerClasses:t,value:n.data,onValueChange:r=>o(a=>({...a,data:r})),title:"Key for this action"})}function Rw({valueAtom:e}){const t=g(e);return s.jsxs("label",{className:"flex flex-col gap-1",children:[s.jsx("span",{children:"Repeat"}),s.jsxs("div",{className:"max-w-[70px] flex items-center gap-1",title:"Number of times to repeat this key",children:[s.jsx(Mt,{stateAtom:e,asCheckbox:!1}),s.jsx("span",{className:"pt-0.5",children:`${ga(xa(t.data),"time")}`})]})]})}function Lw({label:e,children:t,className:n,...o}){return s.jsxs("div",{className:h("relative pl-1 pt-2 border-border border-dotted border rounded",n),...o,children:[s.jsx("div",{className:"absolute -left-1 -top-3 px-1 py-1 bg-muted/20 border-border border-dotted border rounded",children:e}),t]})}function Os({label:e,valueAtom:t}){const[n,o]=T(t);return s.jsxs("div",{className:h("flex-1 max-w-36 flex items-center @[190px]/modifier:flex-col @[190px]/modifier:gap-y-px gap-x-2"),children:[s.jsx("div",{className:"self-start @[190px]/modifier:pl-2 min-w-12 text-xs @[190px]/modifier:text-[0.65rem] font-light",children:e}),s.jsx("div",{className:"self-start",children:s.jsx(xo,{items:Wl,value:n.data,onValueChange:r=>o(a=>({...a,data:r}))})})]})}function $w({item:e}){return s.jsx(Lw,{className:"@container/modifier mt-2 max-w-[220px]",label:"Key modifiers:",children:s.jsxs("div",{className:"my-1.5 flex flex-col justify-between @[190px]/modifier:flex-row gap-1",children:[s.jsx(Os,{label:"Shift",valueAtom:e.shiftAtom}),s.jsx(Os,{label:"Control",valueAtom:e.ctrlAtom}),s.jsx(Os,{label:"Alt",valueAtom:e.altAtom})]})})}function Ow({item:e}){return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-x-3",children:[s.jsx(Pw,{valueAtom:e.charAtom,triggerClasses:"min-w-36"}),s.jsx(Rw,{valueAtom:e.repeatAtom})]}),s.jsx($w,{item:e})]})}const Ot=X({getPosProgress:{point:null}});function nr({valueAtom:e,label:t}){return g(e),s.jsxs("label",{className:"flex flex-col gap-1",children:[s.jsx("span",{children:t}),s.jsxs("div",{className:"max-w-24 flex items-center gap-1",title:`${t} offset from the top-left corner of the window client area`,children:[s.jsx(Mt,{stateAtom:e,asCheckbox:!1}),s.jsx("span",{className:"pt-0.5",children:"px"})]})]})}function _w({item:e}){const t=b(e.xAtom),n=b(e.yAtom);return p.useEffect(()=>ss(Ot.getPosProgress,()=>{console.log("buildState.getPosProgress.point",Ot.getPosProgress.point),t(r=>{var a;return{...r,data:`${((a=Ot.getPosProgress.point)==null?void 0:a.x)||0}`}}),n(r=>{var a;return{...r,data:`${((a=Ot.getPosProgress.point)==null?void 0:a.y)||0}`}})}),[]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(nr,{valueAtom:e.xAtom,label:"X"}),s.jsx(nr,{valueAtom:e.yAtom,label:"Y"})]})})}function Bw({ctx:e,fileUsCtx:t}){switch(e.type){case"fld":return s.jsx(Dw,{item:e,fileUsCtx:t});case"kbd":return s.jsx(Ow,{item:e});case"pos":return s.jsx(_w,{item:e});case"dly":return s.jsx(Cw,{item:e});default:return null}}const Ew="grid grid-rows-[auto,1fr] gap-2 overflow-hidden select-none",zw="px-1 flex flex-col gap-y-2";function Vw({ctx:e,className:t,...n}){const{manual:o,fileUsCtx:r}=e.mAllAtoms,a=g(o.chunksAtom),i=g(o.selectedIdxStoreAtom),c=a[i];return c?s.jsxs("div",{className:h(Ew,"p-1 border-border border rounded",Gc,t),...n,children:[s.jsx(bw,{type:c.type}),s.jsx("div",{className:zw,...n,children:s.jsx(Bw,{ctx:c,fileUsCtx:r})})]}):null}const Ww="min-w-60 h-full min-h-0 grid grid-cols-1 grid-rows-[minmax(100px,_1fr),auto] @[600px]:grid-cols-2 @[600px]:gap-y-0 gap-y-2 gap-x-1 ";function Hw({ctx:e}){return s.jsx(s.Fragment,{children:s.jsxs("div",{className:Ww,children:[s.jsx(gw,{className:"@container/actions",ctx:e}),s.jsx(Vw,{className:"@container/props min-h-[180px] text-xs",ctx:e})]})})}function Uw({ctx:e}){return s.jsx(Hw,{ctx:e})}function or({fileUs:e,formIdx:t}){var a;const n=g(e.maniAtomsAtom);if(!n)return null;if(!((a=e.parsedSrc.meta)==null?void 0:a[t]))return s.jsx(Zj,{formType:t});const r=n[t];if(!r)return null;if(r.manual){const i={maniAtoms:n,mAllAtoms:r,formIdx:t};return s.jsx(Uw,{ctx:i})}if(r.normal){const i={maniAtoms:n,nAllAtoms:r,formIdx:t};return s.jsx(Gj,{ctx:i})}return null}function Gw({ctx:e}){const{descAtom:t,hintAtom:n,balloonAtom:o}=e.oAllAtoms.options.p1General;return s.jsxs(s.Fragment,{children:[s.jsx(H,{stateAtom:t,label:"Description"}),s.jsx(H,{stateAtom:n,label:"User hint"}),s.jsx(H,{stateAtom:o,label:"First login notification counter",containerClasses:"!w-16"})]})}function Zw({ctx:e}){const t=e.oAllAtoms.options,n=g(t.isWebAtom),{ourlAtom:o,murlAtom:r,captionAtom:a,monitorAtom:i,dlg_tabAtom:c,dlg_classAtom:l,dlg_checkexeAtom:d,processnameAtom:u,commandlineAtom:m}=t.p2Detect;return n?s.jsxs(s.Fragment,{children:[s.jsx(H,{stateAtom:o,label:"Original URL"}),s.jsx(H,{stateAtom:r,label:"Match URL"})]}):s.jsxs(s.Fragment,{children:[s.jsx(H,{stateAtom:a,label:"Windows Caption"}),s.jsx(H,{stateAtom:i,label:"Monitor screen changes",asCheckbox:!0}),s.jsx(H,{stateAtom:l,label:"Window class name"}),s.jsx(H,{stateAtom:c,label:"Window tab"}),s.jsx(H,{stateAtom:d,label:"Tab executable"}),s.jsx(H,{stateAtom:u,label:"Process name"}),s.jsx(H,{stateAtom:m,label:"Command line"})]})}const qw="h-6 text-primary-900 dark:text-primary-300 bg-primary-100 dark:bg-primary-900";function Kw({items:e,defaultLabel:t,value:n,onValueChange:o}){return s.jsxs(yt,{value:n,onValueChange:o,children:[s.jsx(st,{className:"px-2 py-1 w-max h-7 text-xs gap-1",children:s.jsx(At,{placeholder:t})}),s.jsx(nt,{align:"start",buttonClasses:qw,position:"item-aligned",children:e.map((r,a)=>{const i=typeof r=="string",c=i?r:r[0],l=i?r:r[1];return s.jsx(ye,{className:"text-xs",value:l,indicatorFirst:!0,children:c},a)})})]})}function Xw({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M17.6 10.89c-.73-.49-1.42-.76-1.8-1.27-.48-.63-.87-.54-1.53-.39-2.32.53-4.66.95-7 1.4-.27.05-.55 0-.82 0-.4-3.2 1.94-5.64 5.44-5.76 3.45-.12 5.88 2.28 5.71 6.01Z"}),s.jsx("path",{d:"M6.73 13.19c.44.57.92 1.11 1.3 1.72.3.48.46 1.04.73 1.55a3.48 3.48 0 0 0 3.3 2.04c1.49 0 2.5-.8 3.21-2.05.54-.96 1.1-1.91 1.67-2.85.08-.14.26-.23.6-.24-.09.26-.14.53-.27.76-.46.79-.98 1.54-1.41 2.35-.82 1.55-2 2.56-3.82 2.57-1.82.01-3.02-.96-3.85-2.52-.44-.83-.99-1.61-1.47-2.42-.13-.22-.19-.48-.28-.73l.29-.19Z"}),s.jsx("path",{d:"M19.81 16.21c.5.74.56 3.12.19 3.58-.08.09-.19.22-.29.23l-3.28.19-.08-.43c.22-.09.44-.23.67-.26.77-.1 1.78.09 2.25-.33.41-.37.19-1.42.28-2.16.03-.24.14-.47.26-.82Z"}),s.jsx("path",{d:"M19.65 7.57c-.03-.56-.09-1.12-.1-1.68-.02-1.35-.04-1.37-1.4-1.38-.51 0-1.01-.02-1.52-.05-.08 0-.14-.11-.27-.2.09-.13.17-.34.25-.34.98-.03 1.96-.05 2.94-.02.18 0 .48.22.49.37.1 1.09.14 2.19.2 3.28l-.6.02Z"}),s.jsx("path",{d:"M4.54 16.37v1.53c0 1.6 0 1.59 1.64 1.61.47 0 .95.06 1.42.09l.04.3c-.16.09-.32.25-.49.27-2.96.41-3.7-.33-3.27-3.29.03-.19.16-.36.24-.54l.43.04Z"}),s.jsx("path",{d:"M4.08 7.6c-.08-.23-.2-.47-.22-.71-.27-2.93.26-3.43 3.19-3.05.19.03.38.14.85.33-.47.18-.67.31-.87.32-.54.03-1.08.04-1.62 0-.67-.04-.91.27-.88.91.03.47.02.95 0 1.43-.01.25-.1.49-.15.74l-.29.02Z"})]})}function Qw({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M8.13 13.22c0-1.19.02-2.39 0-3.58C8 7.97 10.12 9.63 9.9 7.77c-.04-.65 0-1.31-.01-1.96 0-1.06 1.99-.74 3.49-.74 1.27 0 .55 2.02.73 2.85-.01.6.22.93.85.86.75-.09.98.25.97.98-.04 2.24 0 4.49-.02 6.73.21 3.32-3.51 2.27-5.66 2.42-3.04.02-1.89-3.73-2.1-5.7Zm.62.24c-.15 5.24-.2 4.93 4.94 4.81.98-.02 1.48-.44 1.5-1.41.05-2.21.03-4.42.04-6.62 0-.53-.2-.77-.77-.76-1.64.03-3.29.03-4.93 0-.62-.01-.8.26-.78.83.02 1.05 0 2.1 0 3.15Zm3.34-7.82c-1.76.02-1.61-.24-1.62 1.64l.01.36c.01.11-.01.41.25.68s1.56.09 2.18.15c.8.04.62-.81.65-1.35 0-1.74 0-1.47-1.47-1.49Z"}),s.jsx("path",{d:"m11.29 7.42-.06-1.1.41-.02.06 1.1-.4.02Z"}),s.jsx("path",{d:"M12.27 7.37V6.24c.09 0 .35.05.43.05v1.13c-.09 0-.35-.05-.43-.05Z"})]})}function Jw({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M10.91 13.86c-.76.74-1.48 1.51-2.29 2.19-.25.21-.69.2-1.05.29.06-.36 0-.83.2-1.06.79-.91 1.66-1.76 2.52-2.6.55-.54.54-1.01-.02-1.53-.85-.8-1.7-1.6-2.48-2.47-.24-.27-.22-.76-.33-1.16.39.12.87.14 1.17.38.78.62 1.49 1.34 2.23 2.02l.38-.17V3.43l.39-.17 4.88 4.61c-1.02 1.04-1.92 2.01-2.88 2.92-.77.73-.78 1.32.04 2.02a18.2 18.2 0 0 1 2.21 2.18c.24.29.37 1.07.18 1.28-1.35 1.44-2.81 2.78-4.56 4.48v-6.72l-.61-.15Zm1.84 3.51.39.17c.49-.64 1.35-1.28 1.37-1.94.02-.57-.91-1.17-1.43-1.76l-.34.17v3.36Zm.2-11.23-.27.19v3.3l.43.16c.46-.66 1.27-1.31 1.27-1.97 0-.56-.92-1.13-1.43-1.69Z"})]})}const rr="fill-current stroke-none",_s="fill-none stroke-current [stroke-linecap:round] [stroke-miterlimit:10] [stroke-width:0.75px]";function Yw({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{className:_s,d:"M19.24 3.8s1.18.4 1.92 1.33.8 1.61.8 1.61"}),s.jsx("path",{className:_s,d:"M19.03 5.08s.81.23 1.3.84.5 1.08.5 1.08"}),s.jsx("path",{className:_s,d:"M18.8 6.27s.43.1.68.41.24.56.24.56"}),s.jsx("path",{className:rr,d:"M12.04 17H6.28c-1.11 0-1.32-.21-1.32-1.31V8.46c0-1.02.38-1.44 1.4-1.45 3.81-.02 7.62-.02 11.43 0 .85 0 1.25.41 1.26 1.27.02 2.61.01 5.21 0 7.82 0 .75-.16.89-.95.9-2.02.02-4.04 0-6.06 0Zm.15-4.91H6.63c-.31 0-.49.16-.49.48v2.93c0 .31.17.48.49.49l.78.01h9.96c.49.03.72-.17.7-.68-.02-.78 0-1.56 0-2.34-.01-.86-.03-.88-.88-.88h-4.98Zm-.11-3.91H6.89c-.69 0-.78.12-.77.8 0 .65.07.73.84.73h10.57c.37 0 .5-.21.52-.56.06-.83-.05-.98-.89-.98h-5.09Z"}),s.jsx("path",{className:rr,d:"M14.64 14.83c-.58 0-1.16.02-1.74-.01-.16 0-.3-.18-.45-.27.13-.16.24-.39.41-.45.23-.08.51-.05.77-.05h2.52c.33 0 .73.05.68.49-.04.39-.45.29-.72.29h-1.45Z"})]})}const lt="fill-current stroke-none",ar="fill-none";function ev({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{className:ar,d:"M15.97 11.86q-.99.07-1.38.75H8.3c-.45-.75-.32-1.45-.19-2.13 1.01-.41 6.25-.48 7.71-.1.32.45.25.96.16 1.48Z"}),s.jsx("path",{className:ar,d:"M15.82 10.38c-1.45-.38-6.69-.31-7.71.1-.13.68-.27 1.38.19 2.13h6.29q.39-.68 1.38-.75c.09-.52.16-1.03-.16-1.48Z"}),s.jsx("path",{className:lt,d:"M17.69 2.18c-.42-.23-.91-.14-1.38-.14h-6.19c-1.01 0-2.02-.02-3.03.01-.91.03-1.07.21-1.14 1.11v17.15c0 .47-.11.97.39 1.58 1.22.17 2.51.06 3.8.08 1.35.02 2.69.03 4.03 0 1.27-.03 2.56.14 3.78-.12.06-.31.11-.45.11-.59l.01-18.01c0-.38.01-.78-.38-1.06Zm-.64 16.36c-.98.29-7.82.37-9.77.11-.36-.95-.13-1.96-.17-2.94-.04-1 0-2 .08-3.1V4.16h9.77c.27 1.1.33 12.7.1 14.39Zm-3.99 2.3c-.39.32-.77.29-1.18.07-.23-.5-.04-.86.45-.92.59-.08.84.26.73.85Z"}),s.jsx("path",{className:lt,d:"M16.97 11.25a3.05 3.05 0 0 0-.29-1.16.93.93 0 0 0-.71-.52l-.16-.03H8.39c-.25 0-.44.08-.62.2l-.05.07a4.38 4.38 0 0 0 .07 3.43s1.01.37 1.64.36l2.3-.02h3.51c.62-.01 1.21-.13 1.46-.8l.01-.03.1-.3.05-.21c.06-.26.09-.54.1-.83v-.15Zm-1 .61q-.99.07-1.38.75H8.3c-.45-.75-.32-1.45-.19-2.13 1.01-.41 6.25-.48 7.71-.1.32.45.25.96.16 1.48Z"}),s.jsx("path",{className:lt,d:"m10.03 11.37.01-.32v-.02c-.81-.47-1.18-.45-1.51-.01-.32.41-.24.81.07 1.16.34.38.67.29 1.39-.34l.03-.46Z"}),s.jsx("path",{className:lt,d:"M11.72 10.6c-.55-.15-.95 0-1.25.46 0 .3-.05.6-.05.91.7.53 1.16.61 1.5.22.53-.6.25-1.13-.2-1.59Z"}),s.jsx("path",{className:lt,d:"M14.03 10.6c-.39-.19-.83.01-1.09.3-.25.27-.43.62-.18 1.03.15.25.31.46.64.47.47.02.79-.22.94-.58.15-.37.07-1.03-.31-1.22Z"})]})}function tv({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M6.87 13.77c0-1.38.1-1.47 1.52-1.46 1.31 0 1.37.09 1.36 1.62 0 1.34-.07 1.4-1.46 1.4-1.36 0-1.43-.08-1.42-1.55Z"}),s.jsx("path",{d:"M10.57 13.81c0-1.43.07-1.5 1.46-1.5 1.36 0 1.45.1 1.45 1.53 0 1.4-.09 1.48-1.49 1.48-1.38 0-1.43-.05-1.43-1.52Z"}),s.jsx("path",{d:"M17.13 13.85c0 1.39-.08 1.47-1.39 1.48-1.39 0-1.51-.11-1.51-1.48 0-1.42.1-1.53 1.47-1.53 1.36 0 1.44.08 1.43 1.54Z"}),s.jsx("path",{d:"M10.57 17.52c0-1.37.12-1.5 1.39-1.51 1.35 0 1.52.16 1.52 1.5 0 1.44-.08 1.53-1.46 1.53-1.39 0-1.45-.06-1.45-1.53Z"}),s.jsx("path",{d:"M13.48 6.44c0 1.35-.08 1.43-1.45 1.42-1.4 0-1.47-.07-1.47-1.51 0-1.37.05-1.41 1.55-1.4 1.32 0 1.37.06 1.36 1.49Z"}),s.jsx("path",{d:"M17.13 6.39c0 1.42-.04 1.47-1.38 1.47-1.45 0-1.52-.07-1.52-1.45 0-1.4.06-1.46 1.51-1.46 1.37 0 1.39.03 1.39 1.44Z"}),s.jsx("path",{d:"M9.75 10.14c0 1.38-.03 1.41-1.43 1.41-1.43 0-1.47-.03-1.46-1.48 0-1.34.1-1.43 1.44-1.44 1.39 0 1.45.07 1.45 1.51Z"}),s.jsx("path",{d:"M13.48 10.06c0 1.41-.06 1.48-1.37 1.48-1.47 0-1.54-.05-1.54-1.42 0-1.4.07-1.49 1.37-1.5 1.44 0 1.54.08 1.55 1.44Z"}),s.jsx("path",{d:"M17.13 10.18c0 1.34-.04 1.37-1.47 1.37-1.37 0-1.44-.08-1.43-1.53 0-1.3.1-1.39 1.49-1.38 1.36 0 1.42.07 1.41 1.55Z"}),s.jsx("path",{d:"M9.75 6.44c0 1.34-.09 1.42-1.46 1.42-1.35 0-1.44-.1-1.43-1.56 0-1.3.07-1.35 1.52-1.35 1.32 0 1.37.06 1.37 1.49Z"})]})}const ir="fill-current stroke-none",Bs="fill-none stroke-current [stroke-miterlimit:10] [stroke-linecap:round] [stroke-width:0.58px]",sv="fill-none stroke-current [stroke-miterlimit:10] [stroke-width:0.77px]";function nv({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{className:ir,d:"M11.99 17.55h-6c-1.29 0-1.81-.5-1.82-1.78-.02-2.51-.02-5.02 0-7.53 0-1.28.53-1.79 1.82-1.79h12.1c1.24 0 1.75.52 1.76 1.74.01 2.54.02 5.08 0 7.62 0 1.24-.5 1.72-1.75 1.73H12Zm.05-1.01c1.91 0 3.81-.02 5.72 0 .75.01 1.11-.22 1.1-1.03-.03-2.35-.03-4.7 0-7.05 0-.76-.34-1-1.04-1H6.2c-.73 0-1.03.31-1.02 1.03.02 2.32.02 4.64 0 6.96-.01.85.37 1.1 1.16 1.09 1.91-.03 3.81 0 5.72 0Z"}),s.jsx("path",{className:ir,d:"M6.94 15.47c-.35-.06-.53-.14-.53-.49 0-.43.36-.51.54-.52 1.01-.04 2.03-.04 3.04 0 .18 0 .51.1.51.46 0 .3-.14.44-.47.5s-2.75.1-3.09.04Z"}),s.jsx("rect",{className:sv,x:"6.57",y:"9.22",width:"4.02",height:"3.17",rx:".74",ry:".74"}),s.jsx("path",{className:Bs,d:"M14.57 13.13a1.5 1.5 0 0 0 0-2.2"}),s.jsx("path",{className:Bs,d:"M15.2 13.71a2.36 2.36 0 0 0 0-3.36"}),s.jsx("path",{className:Bs,d:"M15.83 14.22a3.06 3.06 0 0 0 0-4.44"})]})}const Es="fill-none stroke-current [stroke-linejoin:round] [stroke-linecap:round] [stroke-width:0.35px]",ov="fill-none stroke-current [stroke-linejoin:round] [stroke-linecap:round] [stroke-width:0.4]",rv="fill-none stroke-current [stroke-linejoin:round] [stroke-linecap:round] [stroke-width:0.75]";function av({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{className:rv,d:"M17 9.07H6.71"}),s.jsx("path",{className:Es,d:"M6.59 11.5h1.15s.55.06.55.54-.54.46-.54.46H6.59"}),s.jsx("path",{className:ov,d:"M6.59 14.62h3.76v-4.14H6.59v4.14Z"}),s.jsx("path",{className:Es,d:"M10.34 12.63c-1.06-.01-1.71.04-1.71.46s1.25.46 1.71.46"}),s.jsx("path",{className:Es,d:"M8.4 10.48c0 .99 1.32.88 1.95.88"}),s.jsx("path",{className:"stroke-none",d:"M11.99 17.55h-6c-1.29 0-1.81-.5-1.82-1.78-.02-2.51-.02-5.02 0-7.53 0-1.28.53-1.79 1.82-1.79h12.1c1.24 0 1.75.52 1.76 1.74.01 2.54.02 5.08 0 7.62 0 1.24-.5 1.72-1.75 1.73H12Zm.05-1.01c1.91 0 3.81-.02 5.72 0 .75.01 1.11-.22 1.1-1.03-.03-2.35-.03-4.7 0-7.05 0-.76-.34-1-1.04-1H6.2c-.73 0-1.03.31-1.02 1.03.02 2.32.02 4.64 0 6.96-.01.85.37 1.1 1.16 1.09 1.91-.03 3.81 0 5.72 0Z"})]})}function iv({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-current stroke-none",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"M13.78 9.98c-.08 2.24-1.38 3.96-3.68 4.79-.71.26-1.47.41-2.2.6-.21.05-.44.01-.48-.25-.04-.25.16-.37.37-.43.56-.17 1.14-.3 1.7-.48 2.37-.74 3.51-2.18 3.48-4.33-.01-.64-.13-1.22-.87-1.31-.73-.09-1.07.39-1.22 1.02-.31 1.35-1.05 2.32-2.4 2.76-.29.09-.61.1-.92.12-.2 0-.45-.02-.49-.27-.04-.27.19-.36.4-.37 1.66-.1 2.4-1.1 2.75-2.62.25-1.08 1.11-1.52 2.14-1.33.93.17 1.47.97 1.43 2.11Z"}),s.jsx("path",{d:"M15.25 10.7c-.13 1.02-.06 2.09 1.26 2.6.15.06.3.22.2.42-.12.23-.34.19-.55.16-.86-.13-1.65-1.1-1.73-2.22-.05-.62 0-1.24 0-1.87-.03-1.53-.86-2.56-2.18-2.71-1.27-.15-2.36.63-2.76 2.01-.16.54-.31 1.06-.74 1.46-.32.3-.68.47-1.13.43-.21-.02-.45-.06-.49-.3-.04-.27.2-.34.41-.37.68-.11.96-.57 1.16-1.17.71-2.14 2.04-3.04 3.91-2.71 1.64.29 2.68 1.82 2.65 3.92v.36Z"}),s.jsx("path",{d:"M16.7 10.26c0 .55-.08 1.11.18 1.63.08.16.1.35-.07.46-.21.13-.4.02-.55-.14-.49-.51-.43-1.15-.35-1.77.11-.85.05-1.66-.3-2.44a3.85 3.85 0 0 0-3.79-2.39c-1.77.09-2.94 1.05-3.66 2.63-.16.35-.1 1.13-.71.88-.44-.19-.07-.82.08-1.21a4.72 4.72 0 0 1 5.36-2.95 4.73 4.73 0 0 1 3.81 4.36c.02.31 0 .62 0 .93Z"}),s.jsx("path",{d:"M12.6 14.89c1.25.21 2.21.96 3.32 1.34.09.03.18.22.17.33-.02.22-.23.25-.4.23a3.68 3.68 0 0 1-1.65-.59c-.9-.59-1.77-.58-2.75-.2-.83.32-1.72.51-2.59.73-.29.07-.69.21-.79-.2-.09-.35.31-.4.56-.47l4.14-1.17Z"}),s.jsx("path",{d:"M12.27 10.11a3.85 3.85 0 0 1-2.24 3.14c-.68.35-1.43.51-2.17.66-.26.05-.62.15-.71-.19-.12-.45.32-.45.59-.53.36-.11.74-.16 1.1-.27 1.43-.43 2.44-1.25 2.66-2.82.04-.3.07-.71.49-.66.35.04.31.4.28.67Z"}),s.jsx("path",{d:"m12.3 17.23-2.3.63c-.3.08-.61.13-.92.17-.18.02-.36-.08-.37-.27 0-.1.12-.24.22-.32 1.43-1.06 4.55-1.09 6-.07.17.12.4.22.28.47-.11.23-.34.18-.55.14-.74-.17-1.35-.72-2.36-.74Z"}),s.jsx("path",{d:"M11.96 18.03c.81-.02 1.31.11 1.78.34.19.09.39.21.32.46-.07.26-.32.28-.51.19-.99-.47-1.97-.17-2.95.03-.26.05-.62.15-.72-.19-.12-.4.28-.41.53-.48.6-.16 1.21-.28 1.55-.35Z"}),s.jsx("path",{d:"M13.52 13.8c.03-.38.33-.39.56-.2a7.5 7.5 0 0 0 2.16 1.15c.16.06.32.17.25.38-.02.08-.12.16-.21.2-.57.25-2.69-.89-2.77-1.52Z"})]})}function cv({className:e,title:t,...n}){return s.jsxs("svg",{className:h("fill-none stroke-current stroke-[.75]",e),viewBox:"0 0 24 24",...n,children:[t&&s.jsx("title",{children:t}),s.jsx("path",{d:"m13.76 16.08-.88-.18c.01-1.11-.8-1.68-1.48-2.28-.37-.13-.64.02-.9.1-2.32.74-5.12-1.46-5.17-4.09a4.27 4.27 0 0 1 6.21-3.84c1.38.66 2.68 2.63 2.21 4.5-.23.9-.05 1.51.65 2.14 1.17 1.05 2.19 2.27 3.37 3.31.89.78 1.02 1.66.78 2.74-1.17.5-2.24-.08-3.34-.33-.29-.22-.1-.61-.33-.89-.22-.23-.6-.04-.85-.28-.21-.22-.08-.55-.28-.9ZM8.52 9.15c.48 0 .92-.42.92-.89a1 1 0 0 0-.97-.96c-.46 0-.96.53-.93 1.01.02.41.53.85.99.85Z"})]})}const lv=[{displayName:"No additional credential",value:"0"},{displayName:"Password",value:"1",icon:"password"},{displayName:"Fingerprint",value:"2",icon:"fingerprint"},{displayName:"PKI smart card",value:"4",icon:"smartcard"},{displayName:"Contactless writable card",value:"20",icon:"contactless"},{displayName:"PIN",value:"80",icon:"pin"},{displayName:"One-Time Password",value:"800",icon:"otp"},{displayName:"Proximity ID card",value:"100",icon:"prox"},{displayName:"FIDO Key",value:"8000",icon:"fido"},{displayName:"Bluetooth",value:"200",icon:"bluetooth"},{displayName:"Face",value:"10",icon:"face"}],dv={password:e=>s.jsx(cv,{...e}),fingerprint:e=>s.jsx(iv,{...e}),smartcard:e=>s.jsx(av,{...e}),contactless:e=>s.jsx(nv,{...e}),pin:e=>s.jsx(tv,{...e}),otp:e=>s.jsx(ev,{...e}),prox:e=>s.jsx(Yw,{...e}),fido:e=>s.jsx(Qw,{...e}),bluetooth:e=>s.jsx(Jw,{...e}),face:e=>s.jsx(Xw,{...e})},uv=lv.map((e,t)=>{const n=e.icon&&dv[e.icon];return[s.jsxs("div",{className:"flex items-center",children:[n&&s.jsx(n,{className:"mr-1 size-6"},t),e.displayName]}),e.value]});function mv({stateAtom:e,onValueStateChange:t,...n}){const[o,r]=T(e);function a(i){const c=i==="0"?"":i;r(l=>{const d={...l,data:c,dirty:l.initialData!==c};return t==null||t(d),d})}return s.jsx(po,{label:"Extended authentication policy",children:s.jsx(Kw,{items:uv,value:o.data||"0",onValueChange:a,...n})})}function fv({ctx:e}){const{options:t}=e.oAllAtoms,{aimAtom:n,lockAtom:o,auth_plAtom:r}=t.p3Auth,a=t.formIdx===$.login;return s.jsxs(s.Fragment,{children:[s.jsx(H,{stateAtom:n,label:"Authenticate immediately",asCheckbox:!0}),s.jsx(H,{stateAtom:o,label:"Lock out login fields",asCheckbox:!0}),a&&s.jsx(mv,{stateAtom:r})]})}function hv({atoms:e}){const{qNameAtom:t,qUrlAtom:n}=e.p4QL;return s.jsxs(s.Fragment,{children:[s.jsx(H,{stateAtom:t,label:"Name displayed on the mini-dashboard"}),s.jsx(H,{stateAtom:n,label:"Quick Link URL"})]})}function pv({atoms:e}){const{idAtom:t,locAtom:n}=e.p5Icon;return s.jsxs(s.Fragment,{children:[s.jsx(H,{stateAtom:t,label:"Location ID"}),s.jsx(H,{stateAtom:n,label:"Location"})]})}function Xc(e){const t="detection",{formIdx:n}=e.oAllAtoms.options,o=S(w).right.mani.openInOptions[n][t];return s.jsxs(s.Fragment,{children:[s.jsx(Ns,{label:"Screen detection",formIdx:n,name:t}),s.jsx(Tt,{open:o,children:s.jsx(Zw,{ctx:e})})]})}function Qc(e){const t="auth",{formIdx:n}=e.oAllAtoms.options,o=S(w).right.mani.openInOptions[n][t];return s.jsxs(s.Fragment,{children:[s.jsx(Ns,{label:"Authentication",formIdx:n,name:t}),s.jsx(Tt,{open:o,children:s.jsx(fv,{ctx:e})})]})}function Jc(e){const t="ql",{formIdx:n}=e.oAllAtoms.options,o=S(w).right.mani.openInOptions[n][t];return s.jsxs(s.Fragment,{children:[s.jsx(Ns,{label:"Quick link",formIdx:n,name:t}),s.jsx(Tt,{open:o,children:s.jsx(hv,{atoms:e.oAllAtoms.options})})]})}function Yc(e){const t="icon",{formIdx:n,isWebAtom:o}=e.oAllAtoms.options,r=S(w).right.mani.openInOptions[n][t];return g(o)?null:s.jsxs(s.Fragment,{children:[s.jsx(Ns,{label:"Password Manager Icon",formIdx:n,name:t}),s.jsx(Tt,{open:r,children:s.jsx(pv,{atoms:e.oAllAtoms.options})})]})}function xv({ctx:e}){const t=p.useState(()=>f(!1))[0],n=g(t),{nameAtom:o}=e.oAllAtoms.options.p1General;return s.jsxs(s.Fragment,{children:[s.jsx(yw,{label:"Managed login name",stateAtom:o,button:s.jsx(Nw,{openAtom:t})}),s.jsx(Tt,{open:n,children:s.jsx(Gw,{ctx:e})})]})}function gv({ctx:e}){return s.jsxs(s.Fragment,{children:[s.jsx(Xc,{...e}),s.jsx(Qc,{...e}),s.jsx(Jc,{...e}),s.jsx(Yc,{...e})]})}function bv({ctx:e}){return s.jsxs(s.Fragment,{children:[s.jsx(Xc,{...e}),s.jsx(Qc,{...e}),s.jsx(Jc,{...e}),s.jsx(Yc,{...e})]})}function jv({maniAtoms:e}){const[t,n]=e,o=t&&{maniAtoms:e,oAllAtoms:{fileUsCtx:t.fileUsCtx,options:t.options},formIdx:$.login},r=n&&{maniAtoms:e,oAllAtoms:{fileUsCtx:n.fileUsCtx,options:n.options},formIdx:$.cpass};return s.jsxs(s.Fragment,{children:[t&&o&&s.jsxs(s.Fragment,{children:[s.jsx($s,{label:"Manifest options"}),s.jsx(xv,{ctx:o}),s.jsx($s,{label:"Login form options"}),s.jsx(gv,{ctx:o})]}),n&&r&&s.jsxs(s.Fragment,{children:[s.jsx($s,{label:"Password change form options"}),s.jsx(bv,{ctx:r})]})]})}const wv="ml-1 mr-3 grid grid-cols-[auto_minmax(0,1fr)] gap-x-2 gap-y-0.5 select-none";function vv({fileUs:e}){const t=g(e.maniAtomsAtom);if(!t)return null;const[n,o]=t;return!n&&!o?s.jsx("div",{children:"No forms. It can be a manifest to exclude website support (It has to be no fields not forms)."}):s.jsx("div",{className:wv,children:s.jsx(jv,{maniAtoms:t})})}function yv({hasCpass:e,hasChanges:t}){const n=e?"Password change":s.jsxs("div",{children:[s.jsx("span",{className:"text-foreground",children:"No"})," password change"]});return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(yi,{children:[s.jsx(Vt,{value:"options",className:"text-xs select-none",title:"Manifest options",children:"Options"}),s.jsx(Vt,{value:"login",className:"text-xs select-none",title:"Login fields",children:"Login"}),s.jsx(Vt,{value:"cpass",className:"text-xs select-none",title:"Password change fields",children:n})]}),t&&s.jsx(C,{children:"Save"})]})}const Av="@container/tab-content flex-1 mt-1 size-full min-h-0 max-w-4xl overflow-hidden";function Nv({fileUsAtom:e}){var u;const{ref:t,width:n,height:o}=as(),r=S(w).right.mani.activeTab,a=g(e),[i,c]=T(a.maniAtomsAtom);if(p.useEffect(()=>{!i&&c(m=>m||Ri(a,e))},[i,a,e]),!i)return null;const l=((u=a.parsedSrc.meta)==null?void 0:u.length)===2;return s.jsxs(rp,{className:"p-1 h-full flex flex-col",value:r,onValueChange:m=>w.right.mani.activeTab=m,children:[s.jsx(yv,{hasCpass:l,hasChanges:!1}),s.jsx("div",{ref:t,className:Av,children:s.jsxs(oe,{style:{width:n,height:o},horizontal:!0,fullHeight:!0,children:[s.jsx(Wt,{value:"options",tabIndex:-1,children:s.jsx(vv,{fileUs:a})}),s.jsx(Wt,{value:"login",tabIndex:-1,children:s.jsx(or,{fileUs:a,formIdx:0})}),s.jsx(Wt,{value:"cpass",tabIndex:-1,children:s.jsx(or,{fileUs:a,formIdx:1})})]})})]})}function Sv(){const e=g(ne);return e?s.jsx(Nv,{fileUsAtom:e}):null}function Cv({fceCtx:e,className:t,...n}){return s.jsxs("div",{className:h("size-full max-w-4xl grid grid-rows-[1fr,auto]",t),...n,children:[s.jsx(ao,{fceCtx:e}),s.jsx("div",{className:"relative mx-3 my-2 p-2 border-border border rounded-md",children:s.jsx(yc,{fceCtx:e})})]})}function kv(e){var r;const t=g(ne);if(!t)return null;const o=(r=g(t).fceAtomsForFcFile)==null?void 0:r.viewFceCtx;return o?s.jsx(Cv,{fceCtx:o,...e}):s.jsx("div",{...e,children:"No body"})}vr.registerLanguage("xml",Hl);function Fv({children:e,...t}){return s.jsx(vr,{language:"xml",useInlineStyles:!1,...t,children:e})}function Iv({text:e,className:t,...n}){const{ref:o,width:r,height:a}=as();return s.jsx(s.Fragment,{children:s.jsx("div",{className:h("size-full",t),ref:o,...n,children:s.jsx(oe,{style:{width:r,height:a},horizontal:!0,children:s.jsx(Fv,{className:"p-1 dark:opacity-60",children:e})})})})}function Mv(){return s.jsx("div",{className:`${Lc} pl-0`,children:s.jsx("div",{className:`${$c} rounded-r`,children:s.jsxs("div",{className:Oc,children:[s.jsx(vj,{}),s.jsxs("div",{className:"relative w-full h-full",children:[" ",s.jsx("div",{className:"absolute inset-px bottom-0.5 text-xs",children:s.jsx(Tv,{})})]})]})})})}function Tv(){const e=g(Kn),{activeView:t}=S(w).right,n=e?e.parsedSrc.stats.isFCatRoot||e.fileCnt.raw?void 0:"Not supported format":"No file selected";return n?s.jsx("div",{className:"h-full text-muted-foreground flex items-center justify-center",children:n}):t===J.xml?s.jsx(Iv,{text:(e==null?void 0:e.fileCnt.raw)||""}):e!=null&&e.parsedSrc.stats.isFCat?s.jsx(kv,{}):s.jsx(Sv,{})}const Dv={getItem(e){return w.appUi.divider.positions[e]||""},setItem(e,t){w.appUi.divider.positions[e]=t}};function Pv(){const e=p.useRef(null),t=p.useRef(null);return s.jsxs(Fh,{direction:"horizontal",className:"w-full",autoSaveId:"main",storage:Dv,children:[s.jsx(ko,{ref:e,collapsible:!0,defaultSize:25,children:s.jsx(Zb,{})}),s.jsx(Mh,{className:"my-[3px] pb-4 items-end z-20",tabIndex:-1,children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:Io,onClick:()=>Fo(e,t,!0),children:s.jsx(vo,{})}),s.jsx(Ph,{className:Dh}),s.jsx("button",{className:Io,onClick:()=>Fo(e,t,!1),children:s.jsx(vo,{className:"rotate-180"})})]})}),s.jsx(ko,{ref:t,collapsible:!0,children:s.jsx(Mv,{})})]})}const Rv={color:"black",WebkitTextFillColor:"transparent",WebkitTextStroke:"0.1px hsl(var(--foreground))",WebkitFontSmoothing:"antialiased"};function Lv(){const e=g(Le),t=S(w.appUi.uiGeneral).showWelcome,{allowHandleFiles:n}=S(w.appUi.uiAdvanced),o=t&&!e.length;return s.jsx(fa,{transition:{type:"spring",duration:.7},children:s.jsx(Re,{children:o&&s.jsx(xe.div,{className:"absolute inset-0 bg-muted z-[21]",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-y-4",children:[s.jsx("div",{className:"text-2xl font-extrabold opacity-30 scale-y-125",style:Rv,children:"Welcome to the Password Manager Admin Tool"}),s.jsx("div",{className:"text-xs text-balance",children:n?"Open the file or folder containing the manifest files to start working with the application.":"Open the folder containing the manifest files to start working with the application."}),n&&s.jsx(es,{}),s.jsx(es,{openAsFolder:!0}),!1,s.jsx(Gd,{className:"absolute left-0.5 bottom-0 p-1.5 w-12 text-border rounded"})]})})})})}function $v(){return s.jsxs("div",{className:"relative bg-muted overflow-hidden",children:[s.jsx(Lv,{}),s.jsx(Pv,{})]})}const Ov="_rocketAnimation_2r4me_1",_v={rocketAnimation:Ov};function Bv(){const{msg:e}=S(Zs),t=wr({opacity:e?1:0,config:{duration:1250}});return s.jsxs(ha.div,{style:t,className:"p-2 py-1.5 text-green-400 flex items-center gap-1",children:[s.jsx(Rd,{className:"size-5",style:{animation:e?`${_v.rocketAnimation} 1.2s infinite`:""}}),s.jsx("div",{className:"text-xs",style:{transition:"opacity 1.2s 1s"},children:e})]})}function Ev(){const e=g(to),{normal:t,manual:n,empty:o,fc:r}=S(ce);if(!(e!=null&&e.length))return s.jsx("div",{className:"text-[.65rem]",children:"No files loaded"});const a=dt("Loaded:",e.length,!0),i=` ( ${dt("normal:",t)}, ${dt("manual:",n)}, ${dt("empty:",o)}, ${dt("field catalog:",r)})`,c=`${a}${i}`;return s.jsx("div",{className:"text-[.65rem] leading-5 text-muted-foreground flex items-center gap-1 select-none",children:c})}function dt(e,t,n=!1){return`${e} ${t} ${n?`file${t>1?"s":""}`:""}`}function zv(){const e=S(w).appUi.uiGeneral;return s.jsx(s.Fragment,{children:e.showStatusbar&&s.jsxs("div",{className:"px-2 py-1 min-h-9 bg-muted/20 border-border/50 border-t flex items-center justify-between",children:[s.jsx(Ev,{}),s.jsx(Bv,{})]})})}function Vv(){return s.jsxs(s.Fragment,{children:[s.jsx(Pu,{}),s.jsxs("div",{className:"h-screen text-sm text-foreground bg-background grid grid-rows-[auto,1fr,auto] overflow-hidden",children:[" ",s.jsx(b2,{}),s.jsx($v,{}),s.jsx(zv,{})]}),s.jsx(i2,{})]})}jd.createRoot(document.getElementById("root")).render(s.jsx(Ul.StrictMode,{children:s.jsx(Vv,{})}));
